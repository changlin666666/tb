(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fff97fec","chunk-90af3744"],{"0c3f":function(e,t,r){"use strict";var a=r("7bc1");t["a"]={list:function(e){return a["a"].post("/exam/backend/question-classify/page",e)},save:function(e){return a["a"].post("/exam/backend/question-classify/save",e)},del:function(e){return a["a"].get("/exam/backend/question-classify/delete",e)},detail:function(e){return a["a"].get("/exam/backend/question-classify/getById",e)},getQuestionlist:function(e){return a["a"].post("/exam/backend/question/page",e)},getQuestionByIdList:function(e){return a["a"].post("/exam/backend/question/getByIdList",e)},saveQuestion:function(e){return a["a"].post("/exam/backend/question/save",e)},getQuestionDetailById:function(e){return a["a"].get("/exam/backend/question/getById",e)},deleteQuestionById:function(e){return a["a"].get("/exam/backend/question/delete",e)},downloadTemplate:function(e){return a["a"].getBlob("/exam/backend/question/downloadTemplate",e,!0)},getPaperlist:function(e){return a["a"].post("/exam/backend/paper/page",e)},savePaper:function(e){return a["a"].post("/exam/backend/paper/save",e)},getPaperDetailById:function(e){return a["a"].get("/exam/backend/paper/getById",e)},deletePaperById:function(e){return a["a"].get("/exam/backend/paper/delete",e)},openPaperById:function(e){return a["a"].get("/exam/backend/paper/open",e)},closePaperById:function(e){return a["a"].get("/exam/backend/paper/close",e)},getPaperListByNameKeyword:function(e){return a["a"].get("/exam/backend/paper/getPaperListByNameKeyword",e)},paperInspectionPage:function(e){return a["a"].post("/exam/backend/paper/paperInspectionPage",e)},getPaperedList:function(e){return a["a"].post("/exam/backend/user-paper-record/testPaperPage",e)},getUserPaperRecordById:function(e){return a["a"].get("/exam/backend/user-paper-record/getById",e)},marking:function(e){return a["a"].post("/exam/backend/user-paper-record/update",e)},getTestPaperStatistics:function(e){return a["a"].get("/exam/backend/paper/getTestPaperStatistics",e)},getTestPaperStatisticsUserPage:function(e){return a["a"].post("/exam/backend/paper/getTestPaperStatisticsUserPage",e)},getTestPaperStatisticsDeptPage:function(e){return a["a"].get("/exam/backend/paper/getTestPaperStatisticsDeptPage",e)},questionnaireStatistics:function(e){return a["a"].get("/exam/backend/paper/questionnaireStatistics",e)},questionnaireStatisticsForShortAnswerAndFillInTheBlanks:function(e){return a["a"].post("/exam/backend/paper/questionnaireStatisticsForShortAnswerAndFillInTheBlanks",e)},getPaperStatistics:function(e){return a["a"].get("/exam/backend/paper/getById",e)}}},"1b59":function(e,t,r){},"611f":function(e,t,r){"use strict";r("9cde")},"65c0":function(e,t,r){"use strict";r("1b59")},"6abb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"notification"},[r("div",{staticClass:"content-header"},[r("el-form",{ref:"elForm",staticClass:"filter-form",attrs:{inline:!0,model:e.searchForm}},[r("el-form-item",[r("el-select",{attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"请输入试卷名称","remote-method":e.remoteMethod,loading:e.loading},on:{clear:e.clearpaperOptions},model:{value:e.searchForm.paperId,callback:function(t){e.$set(e.searchForm,"paperId",t)},expression:"searchForm.paperId"}},e._l(e.paperOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-input",{attrs:{placeholder:"用户姓名",clearable:""},model:{value:e.searchForm.userNameKeyword,callback:function(t){e.$set(e.searchForm,"userNameKeyword",t)},expression:"searchForm.userNameKeyword"}})],1),r("el-form-item",[r("el-select",{attrs:{placeholder:"考试状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.doSearch}},[e._v("查询")]),r("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:e.resetParams}},[e._v("重置")])],1)],1)],1),r("div",{staticClass:"table"},[r("kr-table",{ref:"table",attrs:{columns:e.columns,fetchFunc:e.getList,searchParams:e.searchForm},on:{"selection-change":e.handleSelectionChange}})],1),r("dialogForm",{ref:"dialogForm"})],1)},s=[],n=r("1da1"),i=r("5530"),o=r("ade3"),c=(r("96cf"),r("b0c0"),r("159b"),r("0c3f")),l=r("f477"),u=r("6e48"),d=r("2f62"),p={name:"sys-notification",props:{},components:{dialogForm:u["default"]},data:function(){this.$createElement;var e=this;return{paperOptions:[],loading:!1,searchForm:{ascs:"",current:1,descs:"create_time",paperId:null,paperType:1,size:20,status:null,userNameKeyword:null},statusOptions:[{value:null,label:"全部"},{value:0,label:"待阅卷"},{value:1,label:"已阅卷"}],selectedRows:[],total:100,rows:[],columns:[{prop:"userId",sortable:!0,label:"用户名称",align:"center",render:function(e,t){var r;return e("div",[null===(r=JSON.parse(localStorage.getItem("allUser"))[t.userId])||void 0===r?void 0:r.name])}},Object(o["a"])({prop:"subjectiveScore",label:"主观题得分",align:"center",width:150},"align","center"),Object(o["a"])({prop:"objectiveScore",label:"客观题得分",align:"center",width:150},"align","center"),Object(o["a"])({prop:"score",label:"总得分",align:"center",width:150},"align","center"),{prop:"examiner",label:"阅卷人员",width:150,align:"center",render:function(e,t){var r;return e("div",{style:"color:var(--defaultTheme)"},[null===(r=JSON.parse(localStorage.getItem("allUser"))[t.examiner])||void 0===r?void 0:r.name])}},{prop:"reviewTime",label:" 阅卷时间",sortable:!0,align:"center",width:150},{prop:"status",label:"试卷状态",sortable:!0,align:"center",width:150,render:function(e,t){return e("div",[0===t.status&&e("el-tag",["待阅卷"]),1===t.status&&e("el-tag",{attrs:{type:"success"}},["已阅卷（系统阅卷）"]),2===t.status&&e("el-tag",{attrs:{type:"warning"}},["已阅卷（人工阅卷）"])])}},{prop:"qualify",label:"是否及格",align:"center",width:150,render:function(e,t){return e("div",[0!==t.status?(0===t.qualify&&e("el-tag",["不及格"]),1===t.qualify&&e("el-tag",{attrs:{type:"warning"}},["及格"])):"-"])}},{label:"操作",headerAlign:"center",prop:"ffff",width:180,fixed:"right",align:"center",render:function(t,r){return t("div",[t("el-button",{on:{click:function(){return e.read(r)}},attrs:{type:"text",size:e.size,icon:"krIconfont kr-icon_yulan"}},["批阅试卷"])])}}],showDetail:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(d["c"])({size:function(e){return e.config.defaultSize}})),{},{getList:function(){return c["a"].getPaperedList}}),watch:{},created:function(){this.searchForm.paperId=this.$route.query.paperId,this.paperOptions=[{value:this.$route.query.paperId,label:this.$route.query.name}]},mounted:function(){},methods:{clearpaperOptions:function(){this.paperOptions=[]},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,this.paperOptions=[],c["a"].getPaperListByNameKeyword({keyword:e,paperType:1}).then((function(e){t.loading=!1,e.data.data.forEach((function(e){t.paperOptions.push({value:e.id,label:e.name})}))}))):this.paperOptions=[]},resetParams:function(){this.searchForm.status=null,this.searchForm.userNameKeyword=null,this.searchForm.paperId=null,this.doSearch()},doSearch:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.table.init();case 1:case"end":return t.stop()}}),t)})))()},handleSelectionChange:function(e){this.selectedRows=e},read:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs.dialogForm.init(e);case 1:case"end":return r.stop()}}),r)})))()},getDictList:function(e){return l["a"].getDictList(e)}}},f=p,m=(r("65c0"),r("2877")),v=Object(m["a"])(f,a,s,!1,null,"34534db0",null);t["default"]=v.exports},"6e48":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,title:"试卷详情",width:"90%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},[r("div",{staticClass:"all-box"},[r("div",{staticClass:"all-box-left"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"card-box"},e._l(e.form.questions,(function(t,a){return r("div",{key:a,staticClass:"item",on:{click:function(t){return e.fastLocation(a)}}},[r("div",{staticClass:"num",class:{right:1===e.form.userAnswers[a].correct,error:0===e.form.userAnswers[a].correct,noView:-1===e.form.userAnswers[a].correct}},[e._v(e._s(a+1))])])})),0)])],1),r("div",{staticClass:"all-box-center"},[r("el-card",{staticClass:"box-card"},e._l(e.form.questions,(function(t,a){return r("div",{key:t.id,staticClass:"clearfix"},[e.lookMasterQuestion&&3!==e.form.questions[a].type||e.lookOnlyError&&0!==e.form.userAnswers[a].correct?e._e():r("el-row",{attrs:{gutter:20,id:"qustion"+a}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"question-top"},[r("div",{staticClass:"question-index"},[e._v(e._s(a+1))]),0===t.type?r("el-tag",{attrs:{effect:"dark"}},[e._v("单选题")]):e._e(),1===t.type?r("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("多选题")]):e._e(),2===t.type?r("el-tag",{attrs:{effect:"dark",color:"rgb(128,7,183)",type:"info"}},[e._v("判断题")]):e._e(),3===t.type?r("el-tag",{attrs:{effect:"dark",type:"warning"}},[e._v("简答题")]):e._e(),4===t.type?r("el-tag",{attrs:{effect:"dark",type:"danger"}},[e._v("填空题")]):e._e(),r("div",{staticClass:"question-title"},[e._v(" "+e._s(t.content)+" ")])],1),r("ul",{staticClass:"question-bottom"},e._l(t.answers,(function(t,a){return r("li",{key:t.id,staticClass:"question-answer"},[r("span",{staticClass:"tag"},[e._v(e._s(e.getFromCharCode(a)))]),r("p",{staticClass:"content"},[e._v(e._s(t.content))]),t.correct?r("span",{staticClass:"right"},[r("i",{staticClass:"el-icon-success",staticStyle:{color:"rgb(26, 172, 26)"}}),e._v(" 答案 ")]):e._e()])})),0),r("div",{staticClass:"as-box"},[r("div",[3!==t.type?r("div",{staticClass:"isCorrect"},[e.form.userAnswers[a].correct?r("div",[r("i",{staticClass:"el-icon-circle-check correct"}),r("span",[e._v("答对了")])]):r("div",[r("i",{staticClass:"el-icon-circle-check error"}),r("span",[e._v("答错了")])])]):e._e(),r("div",[e._v(" 学员得分："),r("span",[e._v(e._s(3===t.type&&0===e.form.status?"待阅卷后显示得分":e.form.userAnswers[a].userScore)+" ")])]),r("div",[e._v(" 学员答案： "),r("span",[e._v(" "+e._s(3===t.type?e.form.userAnswers[a].answer:e.form.userAnswers[a].answer.toUpperCase())+" ")])])]),r("div",{staticClass:"question-analysis"},[t.analysis?r("div",[e._v("大题解析：")]):e._e(),r("p",[e._v(" "+e._s(t.analysis)+" ")])])])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"listopt clearfix"},[r("div",{staticClass:"opt-box"},[r("div",{staticClass:"item"},[e._v(" 判断： "),r("i",{staticClass:"el-icon-success check-icon",class:{"check-icon-right":1===e.form.userAnswers[a].correct},on:{click:function(t){return e.changeCorrect(a,1)}}}),r("i",{staticClass:"el-icon-error check-icon",class:{"check-icon-error":0===e.form.userAnswers[a].correct},on:{click:function(t){return e.changeCorrect(a,0)}}})]),r("div",{staticClass:"item"},[e._v(" 得分： "),r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:0,max:t.score},model:{value:e.form.userAnswers[a].userScore,callback:function(t){e.$set(e.form.userAnswers[a],"userScore",t)},expression:"form.userAnswers[index].userScore"}})],1),r("div",{staticClass:"item"},[e._v("总分："+e._s(t.score))])])])])],1)],1)})),0)],1),r("div",{staticClass:"all-box-right"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"card-box"},[r("div",{staticClass:"el-card__body"},[r("div",[e._v("及格分/总分")]),r("div",{staticStyle:{color:"rgb(158,9,226)"}},[e._v(" "+e._s(e.form.qualifyScore+"/"+e.form.totalScore)+" ")]),r("el-divider"),r("div",[e._v("人员姓名")]),r("div",{staticStyle:{color:"rgb(10, 132, 255)"}},[e._v(" "+e._s(e.getName)+" ")]),r("el-divider"),r("div",[e._v("考试成绩")]),r("div",{staticStyle:{color:"rgb(255, 75, 80)"}},[e._v(e._s(e.getTotalScore))]),r("el-divider"),r("div",[e._v("仅看错题")]),r("div",[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.lookOnlyError,callback:function(t){e.lookOnlyError=t},expression:"lookOnlyError"}})],1),r("el-divider"),r("div",[e._v("仅看主观题")]),r("div",[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.lookMasterQuestion,callback:function(t){e.lookMasterQuestion=t},expression:"lookMasterQuestion"}})],1),r("el-divider"),r("div",[e._v("考试状态")]),r("div",[e.isQualify?r("span",{staticStyle:{color:"green"}},[e._v("通过")]):r("span",{staticStyle:{color:"red"}},[e._v("未通过")])]),r("el-divider"),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交阅卷 ")])],1)])])],1)])])},s=[],n=r("1da1"),i=r("5530"),o=(r("96cf"),r("b0c0"),r("159b"),r("4de4"),r("f477")),c=r("0c3f"),l=r("2f62"),u={props:{allClassifyTypeList:{type:Array,default:function(){return[]}}},data:function(){return{dictUtils:o["a"],visible:!1,loading:null,form:{userAnswers:[]},paperForm:{questions:[{content:""}]},selectedQuestionList:[],lookOnlyError:!1,lookMasterQuestion:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])({user:function(e){return e.user.user}})),{},{getTotalScore:function(){return this.form.userAnswers.reduce((function(e,t){return e+t.userScore}),0)},isQualify:function(){return this.form.userAnswers.reduce((function(e,t){return e+t.userScore}),0)>=this.form.qualifyScore},getName:function(){var e;return null===(e=JSON.parse(localStorage.getItem("allUser"))[this.form["userId"]])||void 0===e?void 0:e.name}}),watch:{},created:function(){},mounted:function(){},methods:{init:function(e){var t=this;this.visible=!0,this.lookOnlyError=!1,this.lookMasterQuestion=!1,this.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function r(){var a,s,n,i,o,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:".el-dialog__body"}),r.next=3,c["a"].getUserPaperRecordById({id:e.id});case 3:return i=r.sent,o=i.data,t.form=o.data,r.next=8,c["a"].getPaperDetailById({id:t.form.paperId});case 8:l=r.sent,t.$set(t.form,"questions",null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.data.questions),t.$set(t.form,"qualifyScore",null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.data.qualifyScore),t.$set(t.form,"totalScore",null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.data.totalScore),0===t.form.status&&(null===(u=t.form.userAnswers)||void 0===u||u.forEach((function(e,r){var a;3===(null===(a=t.form.questions[r])||void 0===a?void 0:a.type)&&(e.correct=-1)}))),t.loading.close();case 14:case"end":return r.stop()}}),r)}))))},submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<(null===(a=e.form.userAnswers)||void 0===a?void 0:a.length))){t.next=9;break}if(s=e.form.userAnswers[r],-1!==s.correct){t.next=6;break}return e.$message.error("第 "+(r+1)+" 题暂未批阅，无法保存"),t.abrupt("return");case 6:r++,t.next=1;break;case 9:return e.form.examiner=e.user.id,e.form.qualify=e.isQualify?1:0,e.form.reviewTime=e.getTime(),e.form.score=e.getTotalScore,e.form.objectiveScore=e.form.userAnswers.filter((function(e){if(3!==e.type)return!0})).reduce((function(e,t){return e+t.userScore}),0),e.form.subjectiveScore=e.form.userAnswers.filter((function(e){if(3===e.type)return!0})).reduce((function(e,t){return e+t.userScore}),0),e.form.status=2,console.log(e.form),t.next=19,c["a"].marking(e.form);case 19:if(n=t.sent,i=n.data,0==i.code){t.next=23;break}return t.abrupt("return",e.$message.error(i.msg));case 23:e.$message.success(i.msg),e.$parent.$refs.table.init(),e.close();case 26:case"end":return t.stop()}}),t)})))()},getTime:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate(),s=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),o=t+"-"+this.addZero(r)+"-"+this.addZero(a)+" "+this.addZero(s)+":"+this.addZero(n)+":"+this.addZero(i);return o},addZero:function(e){return e<10?"0"+e:e},fastLocation:function(e){var t=document.querySelector("#qustion"+e);t.scrollIntoView({block:"center",behavior:"smooth"})},close:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.visible=!1;case 1:case"end":return t.stop()}}),t)})))()},changeCorrect:function(e,t){var r=JSON.parse(JSON.stringify(this.form.userAnswers[e]));r.correct=t,r.userScore=t?this.form.questions[e].score:0,this.$set(this.form.userAnswers,e,r),console.log(this.form.userAnswers[e].correct)},getFromCharCode:function(e){return String.fromCharCode(64+parseInt(1+e))}}},d=u,p=(r("611f"),r("2877")),f=Object(p["a"])(d,a,s,!1,null,"7f1f21c0",null);t["default"]=f.exports},"9cde":function(e,t,r){}}]);