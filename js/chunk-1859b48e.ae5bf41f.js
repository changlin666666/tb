(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1859b48e"],{"3a40":function(e,t,r){"use strict";r("5d28")},"466d":function(e,t,r){"use strict";var a=r("d784"),s=r("825a"),n=r("50c4"),o=r("577e"),i=r("1d80"),l=r("8aa5"),u=r("14c3");a("match",(function(e,t,r){return[function(t){var r=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](o(r))},function(e){var a=s(this),i=o(e),c=r(t,a,i);if(c.done)return c.value;if(!a.global)return u(a,i);var d=a.unicode;a.lastIndex=0;var m,f=[],p=0;while(null!==(m=u(a,i))){var b=o(m[0]);f[p]=b,""===b&&(a.lastIndex=l(i,n(a.lastIndex),d)),p++}return 0===p?null:f}]}))},"5d28":function(e,t,r){},"5fab":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,title:e.title,width:e.width},on:{"update:visible":function(t){e.visible=t},close:function(t){e.visible=!1}}},[r("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,size:"medium",rules:e.rules,disabled:"view"===e.method},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"数据源地址",prop:"url"}},[r("el-input",{attrs:{placeholder:"数据源地址"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"数据源名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"数据源名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"数据源密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"数据源密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"数据源类型",prop:"sourceType"}},[r("el-select",{on:{change:e.selectType},model:{value:e.form.sourceType,callback:function(t){e.$set(e.form,"sourceType",t)},expression:"form.sourceType"}},e._l(e.typeList,(function(e,t){return r("el-option",{key:t,attrs:{value:e.name,label:e.name}})})),1)],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"是否启用",prop:"usable"}},[r("el-radio-group",{model:{value:e.form.usable,callback:function(t){e.$set(e.form,"usable",t)},expression:"form.usable"}},[r("el-radio-button",{attrs:{label:"1"}},[e._v("是")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{float:"left"},attrs:{type:"success"},on:{click:e.test}},[e._v("测 试")]),r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},s=[],n=r("1da1"),o=(r("7db0"),r("b0c0"),r("ac1f"),r("466d"),r("96cf"),r("e8b3")),i=r("d4ec"),l=r("ade3"),u=function e(){Object(i["a"])(this,e),Object(l["a"])(this,"driverClass",""),Object(l["a"])(this,"name",""),Object(l["a"])(this,"password",""),Object(l["a"])(this,"remarks",""),Object(l["a"])(this,"sourceType",""),Object(l["a"])(this,"url",""),Object(l["a"])(this,"usable",1),Object(l["a"])(this,"username","")},c={components:{},props:{width:{type:String,default:"50%"},treeData:{type:Array,default:function(){return[]}},treeProps:{type:Object,default:function(){return{children:"children",label:"name",disabled:"disabled"}}}},watch:{},data:function(){return{visible:!1,loading:!1,method:"",form:new u,rules:{url:[{required:!0,message:"地址不能为空",trigger:"blur"}],name:[{required:!0,message:"名称不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],sourceType:[{required:!0,message:"类型不能为空",trigger:"blur"}],username:[{required:!0,message:"用户名不能为空",trigger:"blur"}]},id:"",title:"",disabled:!1,typeList:[]}},mounted:function(){},computed:{},methods:{init:function(e,t,r){var a=this;this.method=e,this.form=new u,"add"===e?(this.nodeIds="",this.title="新建"):this.title="view"===e?"查看":"编辑",this.id=t,this.visible=!0,this.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getTypes();case 2:s=t.sent,n=s.data,a.typeList=n.data,a.$refs.form.resetFields(),"edit"!==e&&"view"!==e||(a.form=r,a.nodeIds=r.parentNodeIds);case 7:case"end":return t.stop()}}),t)}))))},selectType:function(e){var t=this.typeList.find((function(t){return t.name==e}));this.form.url=t.urlExample,this.form.driverClass=t.driverClass},test:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,o["a"].test(e.form);case 4:if(r=t.sent,a=r.data,e.loading=!1,0==a.code){t.next=10;break}t.next=11;break;case 10:return t.abrupt("return",e.$message.success(a.msg));case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},submit:function(){var e=this;try{this.$refs.form.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,s,n,i,l,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=28;break}if(a=e.form,s=/\{\w+\}/g,n=a.url.match(s),!(n&&n.length>0)){t.next=6;break}return t.abrupt("return",e.$message.error("数据源地址不正确"));case 6:if("add"!=e.method){t.next=16;break}return t.next=9,o["a"].add(a);case 9:if(i=t.sent,l=i.data,0==l.code){t.next=13;break}return t.abrupt("return",e.$message.error(l.msg));case 13:e.$message.success(l.msg),t.next=24;break;case 16:if("edit"!=e.method){t.next=24;break}return t.next=19,o["a"].save(a);case 19:if(u=t.sent,c=u.data,0==c.code){t.next=23;break}return t.abrupt("return",e.$message.error(c.msg));case 23:e.$message.success(c.msg);case 24:e.$emit("update"),e.visible=!1,t.next=29;break;case 28:return t.abrupt("return",!1);case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error(t)}}}},d=c,m=(r("3a40"),r("2877")),f=Object(m["a"])(d,a,s,!1,null,"2e96af02",null);t["default"]=f.exports},d4ec:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return a}))},e8b3:function(e,t,r){"use strict";var a=r("7bc1");t["a"]={list:function(e){return a["a"].post("/data-share/datasource/page",e)},add:function(e){return a["a"].post("/data-share/datasource/add",e)},del:function(e){return a["a"].get("/data-share/datasource/deleteById",e)},save:function(e){return a["a"].post("/data-share/datasource/edit",e)},detail:function(e){return a["a"].get("/data-share/datasource/getTableDetailById",e)},test:function(e){return a["a"].post("/data-share/datasource/test",e)},getTypes:function(){return a["a"].get("/data-share/datasource/getSupportDatabaseTypes")},use:function(e){return a["a"].get("/data-share/datasource/updateUsableById",e)}}}}]);