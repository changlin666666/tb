(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62060c7e"],{"5bf2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.visible,title:"权限分配",width:e.width},on:{"update:visible":function(t){e.visible=t},close:function(t){e.visible=!1}}},[n("el-table",{attrs:{data:e.tableList,size:"small",border:"","header-cell-style":{background:"#fafafa"}}},[n("el-table-column",{attrs:{label:"权限名称",align:"center",prop:"name"}}),n("el-table-column",{attrs:{label:"权限标识",align:"center",prop:"permission"}}),n("el-table-column",{attrs:{label:"权限开关",prop:"flag",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:1==t.row.flag},on:{change:function(n){return e.change(n,t.row,t.$index)}}}),e._v(" "+e._s(t.row.flag?"开启":"关闭")+" ")]}}])})],1)],1)},s=[],a=n("1da1"),i=(n("d81d"),n("4de4"),n("96cf"),n("a211")),u=n("f477"),o=n("6632"),l={components:{},props:{width:{type:String,default:"50%"}},watch:{},data:function(){return{visible:!1,method:"",id:"",title:"",dictUtils:u["a"],disabled:!1,data:[],tableList:[],menuId:"",roleId:""}},computed:{},methods:{init:function(e,t){var n=this;this.roleId=e,this.menuId=t,this.visible=!0,this.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,i["a"].getRoleBtn({roleId:e,menuId:t});case 2:s=r.sent,a=s.data,a.data?n.tableList=a.data:n.tableList=[];case 5:case"end":return r.stop()}}),r)}))))},change:function(e,t,n){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,a,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.tableList[n].flag=e,s=r.tableList.filter((function(e){return e.flag})).map((function(e){return e.id})),t.next=4,i["a"].bindBtn({functionIds:s,menuId:r.menuId,roleId:r.roleId});case 4:if(a=t.sent,u=a.data,0==u.code){t.next=8;break}return t.abrupt("return",r.$message.error(u.msg));case 8:r.$message.success(u.msg);case 9:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;try{this.$refs.form.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=14;break}return e.form.companyId=e.companyId,r=e.form,t.next=5,o["a"].saveRole(r);case 5:if(s=t.sent,a=s.data,0==a.code){t.next=9;break}return t.abrupt("return",e.$message.error(a.msg));case 9:e.$message.success(a.msg),e.$emit("update"),e.visible=!1,t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error(t)}}}},c=l,d=n("2877"),f=Object(d["a"])(c,r,s,!1,null,null,null);t["default"]=f.exports},6632:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n("7bc1"),s=function(e){return r["a"].post("/sys/role/list",e)},a=function(e){return r["a"].get("/sys/role/queryById",e)},i=function(e){return r["a"].post("/sys/role/saveRole",e)},u=function(e){return r["a"].post("/sys/role/delete",e)},o=function(e){return r["a"].get("/sys/role/useableList",e)},l=function(e){return r["a"].post("/sys/bind/queryBindRoles",e)};t["a"]={getRoleList:s,getRoleByID:a,saveRole:i,deleteRoleByID:u,useableList:o,userRoleList:l,use:function(e){return r["a"].get("/sys/role/enableRole",e)}}},a211:function(e,t,n){"use strict";var r=n("7bc1");t["a"]={bindBtn:function(e){return r["a"].post("/sys/roleB/bindFunction",e)},bindMenus:function(e){return r["a"].post("/sys/roleB/bindMenu",e)},del:function(e){return r["a"].post("/sys/roleB/delete",e)},getOwnMenus:function(e){return r["a"].post("/sys/roleB/getMenuList",e)},getMenus:function(e){return r["a"].get("/sys/roleB/getMenuTypeTree",e)},getMenusBind:function(e){return r["a"].post("/sys/roleB/queryBindMenus",e)},getRoleBtn:function(e){return r["a"].get("/sys/roleB/queryFunctionList",e)}}}}]);