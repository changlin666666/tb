(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7765650a"],{"4ba4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notification"},[a("div",{staticClass:"content-header"},[a("el-form",{ref:"elForm",staticClass:"filter-form",attrs:{inline:!0,model:e.searchForm}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"文章名称",clearable:""},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"状态选择",clearable:""},model:{value:e.articleStatus,callback:function(t){e.articleStatus=t},expression:"articleStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"草稿",value:0}}),a("el-option",{attrs:{label:"审核中",value:1}}),a("el-option",{attrs:{label:"已发布",value:2}}),a("el-option",{attrs:{label:"已驳回",value:-1}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"类型",clearable:""},model:{value:e.searchForm.menuId,callback:function(t){e.$set(e.searchForm,"menuId",t)},expression:"searchForm.menuId"}},e._l(e.menuIdOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.doSearch}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:e.resetParams}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"table"},[a("kr-table",{ref:"table",attrs:{columns:e.columns,fetchFunc:e.getList,searchParams:e.searchForm},on:{"selection-change":e.handleSelectionChange}},[a("div",{attrs:{slot:"handleButtons"},slot:"handleButtons"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addOrEdit("add")}}},[e._v("新增文章")])],1)])],1),a("formDialog",{ref:"form",attrs:{imgCutOption:e.imgCutOption}})],1)},n=[],s=a("1da1"),i=a("5530"),l=(a("d81d"),a("96cf"),a("0b34")),c=a("038f"),o=a("f477"),u=a("2f62"),d={name:"sys-notification",components:{formDialog:l["default"]},props:{},data:function(){this.$createElement;var e=this;return{imgCutOption:{boxWidth:620,boxHeight:410,originalGraph:!1,cutWidth:620,cutHeight:410},menuIdOptions:[{value:"000/006",label:"全部"},{value:"000/006/001",label:"党务工作"},{value:"000/006/002",label:"基层群团工作"},{value:"000/006/003",label:"纪检监察工作"},{value:"000/006/004",label:"干部工作"},{value:"000/006/005",label:"兵员工作"},{value:"000/006/006",label:"文职人员工作"},{value:"000/006/007",label:"宣传工作"},{value:"000/006/008",label:"保卫工作"},{value:"000/006/009",label:"战时政治工作"}],notiType:[],articleStatus:"",searchForm:{articleStatus:[],ascs:"",current:1,deptId:"",descs:"",menuId:"000/006",orgId:"",size:20},selectedRows:[],total:100,rows:[],columns:[{prop:"title",label:"文章标题",render:function(e,t){return e("div",{style:"color:var(--defaultTheme)"},[t.title])}},{prop:"author",sortable:!0,label:"作者"},{prop:"secretGrade",label:"密级",sortable:!0},{prop:"menuId",label:"类型",render:function(e,t){return e("div",["000/006/001"===t.menuId&&e("el-tag",["党务工作"]),"000/006/002"===t.menuId&&e("el-tag",["基层群团工作"]),"000/006/003"===t.menuId&&e("el-tag",["纪检监察工作"]),"000/006/004"===t.menuId&&e("el-tag",["干部工作"]),"000/006/005"===t.menuId&&e("el-tag",["兵员工作"]),"000/006/006"===t.menuId&&e("el-tag",["文职人员工作"]),"000/006/007"===t.menuId&&e("el-tag",["宣传工作"]),"000/006/008"===t.menuId&&e("el-tag",["保卫工作"]),"000/006/009"===t.menuId&&e("el-tag",["战时政治工作"])])}},{prop:"publishTime",label:"发布时间",sortable:!0,width:"300"},{prop:"status",label:"状态",render:function(e,t){return e("div",[0===t.status&&e("el-tag",["草稿"]),1===t.status&&e("el-tag",{attrs:{type:"warning"}},["审核中"]),2===t.status&&e("el-tag",{attrs:{type:"success"}},["已发布"]),-1===t.status&&e("el-tag",{attrs:{type:"danger"}},["已驳回"])])}},{label:"操作",headerAlign:"center",prop:"ffff",width:200,fixed:"right",align:"center",render:function(t,a){return t("div",[t("el-button",{on:{click:function(){return e.addOrEdit("view",a)}},attrs:{type:"text",size:e.size,icon:"krIconfont kr-icon_yulan"}},["查看"]),t("el-button",{attrs:{size:e.size,icon:"krIconfont kr-tianxie",type:"text"},on:{click:function(){return e.addOrEdit("edit",a)}}},["编辑"]),!1,t("el-button",{attrs:{size:e.size,icon:" kr-shanchu krIconfont",type:"text"},on:{click:function(){return e.del(a)}},style:"color:red"},["删除"])])}}],showDetail:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])({size:function(e){return e.config.defaultSize}})),{},{getList:function(){return c["a"].list}}),watch:{},created:function(){},mounted:function(){},methods:{resetParams:function(){this.searchForm.title="",this.articleStatus="",this.searchForm.menuId="000/006",this.searchForm.articleStatus=[],this.doSearch()},doSearch:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.searchForm.articleStatus=e.articleStatus||0===e.articleStatus?[e.articleStatus]:[],e.$refs.table.insidePage=1,e.$refs.table.init();case 3:case"end":return t.stop()}}),t)})))()},addOrEdit:function(e,t){this.$refs.form.init(e,t,"000/006")},handleSelectionChange:function(e){this.selectedRows=e},del:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e instanceof Array||(e=[e]),0!=e.length){a.next=3;break}return a.abrupt("return",t.$message.error("请选择需要删除的项!"));case 3:t.$confirm("此操作将永久删除所选, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.map((function(e){return e.id})),a.next=3,c["a"].del({articleId:r});case 3:if(n=a.sent,s=n.data,0==s.code){a.next=7;break}return a.abrupt("return",t.$message.error(s.msg));case 7:t.$message({type:"success",message:"删除成功!"}),t.doSearch();case 9:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 4:case"end":return a.stop()}}),a)})))()},getDictList:function(e){return o["a"].getDictList(e)},cancelNotification:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.status=0,a.next=3,c["a"].save({id:e.id});case 3:r=a.sent,n=r.data,0==n.code&&(t.$message.success("发布成功！"),t.doSearch()),t.$message.success("撤销成功！"),t.doSearch();case 8:case"end":return a.stop()}}),a)})))()},publicNotification:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.status=1,a.next=3,c["a"].publish({articleId:e.id,status:2});case 3:r=a.sent,n=r.data,0==n.code&&(t.$message.success("发布成功！"),t.doSearch());case 6:case"end":return a.stop()}}),a)})))()}}},m=d,f=(a("b948"),a("2877")),h=Object(f["a"])(m,r,n,!1,null,"11d0d8b6",null);t["default"]=h.exports},"92b7":function(e,t,a){},b948:function(e,t,a){"use strict";a("92b7")}}]);