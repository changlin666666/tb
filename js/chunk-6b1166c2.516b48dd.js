(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b1166c2"],{"0c3f":function(t,e,a){"use strict";var n=a("7bc1");e["a"]={list:function(t){return n["a"].post("/exam/backend/question-classify/page",t)},save:function(t){return n["a"].post("/exam/backend/question-classify/save",t)},del:function(t){return n["a"].get("/exam/backend/question-classify/delete",t)},detail:function(t){return n["a"].get("/exam/backend/question-classify/getById",t)},getQuestionlist:function(t){return n["a"].post("/exam/backend/question/page",t)},getQuestionByIdList:function(t){return n["a"].post("/exam/backend/question/getByIdList",t)},saveQuestion:function(t){return n["a"].post("/exam/backend/question/save",t)},getQuestionDetailById:function(t){return n["a"].get("/exam/backend/question/getById",t)},deleteQuestionById:function(t){return n["a"].get("/exam/backend/question/delete",t)},downloadTemplate:function(t){return n["a"].getBlob("/exam/backend/question/downloadTemplate",t,!0)},getPaperlist:function(t){return n["a"].post("/exam/backend/paper/page",t)},savePaper:function(t){return n["a"].post("/exam/backend/paper/save",t)},getPaperDetailById:function(t){return n["a"].get("/exam/backend/paper/getById",t)},deletePaperById:function(t){return n["a"].get("/exam/backend/paper/delete",t)},openPaperById:function(t){return n["a"].get("/exam/backend/paper/open",t)},closePaperById:function(t){return n["a"].get("/exam/backend/paper/close",t)},getPaperListByNameKeyword:function(t){return n["a"].get("/exam/backend/paper/getPaperListByNameKeyword",t)},paperInspectionPage:function(t){return n["a"].post("/exam/backend/paper/paperInspectionPage",t)},getPaperedList:function(t){return n["a"].post("/exam/backend/user-paper-record/testPaperPage",t)},getUserPaperRecordById:function(t){return n["a"].get("/exam/backend/user-paper-record/getById",t)},marking:function(t){return n["a"].post("/exam/backend/user-paper-record/update",t)},getTestPaperStatistics:function(t){return n["a"].get("/exam/backend/paper/getTestPaperStatistics",t)},getTestPaperStatisticsUserPage:function(t){return n["a"].post("/exam/backend/paper/getTestPaperStatisticsUserPage",t)},getTestPaperStatisticsDeptPage:function(t){return n["a"].get("/exam/backend/paper/getTestPaperStatisticsDeptPage",t)},questionnaireStatistics:function(t){return n["a"].get("/exam/backend/paper/questionnaireStatistics",t)},questionnaireStatisticsForShortAnswerAndFillInTheBlanks:function(t){return n["a"].post("/exam/backend/paper/questionnaireStatisticsForShortAnswerAndFillInTheBlanks",t)},getPaperStatistics:function(t){return n["a"].get("/exam/backend/paper/getById",t)}}},"531c":function(t,e,a){},"8c08":function(t,e,a){"use strict";a("531c")},"8c7a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"research-detail"},[a("div",{staticClass:"body"},[a("div",{staticClass:"search"},[a("div",{staticClass:"search-title"},[t._v(t._s(t.researchData.name)+" 数据统计")]),a("div",{staticClass:"userCount"},[t._v("已收集问卷："+t._s(t.userCount)+"份")])]),t._l(t.Statistics,(function(e,n){return a("div",{key:e.id,staticClass:"mb25"},[a("div",{staticClass:"left"},[a("p",{staticClass:"title"},[a("span",{staticClass:"order"},[t._v(t._s(n+1)+". ")]),a("span",[t._v(t._s(e.content))])]),a("div",{staticClass:"ml25"},[0==e.type?a("span",[t._v("试题类型：单选题")]):1==e.type?a("span",[t._v("试题类型：多选题")]):2==e.type?a("span",[t._v("试题类型：判断题")]):3==e.type?a("span",[t._v("试题类型：简答题")]):4==e.type?a("span",[t._v("试题类型：填空题")]):t._e(),4!=e.type&&3!=e.type?a("span",{staticClass:"pl35"},[t._v("有效答题量："+t._s(e.userCount||0))]):t._e(),3==e.type||4==e.type?a("div",[a("el-table",{staticClass:"mt10",staticStyle:{width:"540px"},attrs:{data:e.answers,border:!0}},[a("el-table-column",{attrs:{prop:"answers",label:"答案"}}),a("el-table-column",{attrs:{prop:"answerCount",label:"数据量"}})],1),e.query?a("kr-pagination",{staticStyle:{"margin-top":"30px","text-align":"center"},attrs:{total:e.query.total,"current-page":e.query.page,"page-size":e.query.size,pagerCount:10},on:{"current-change":function(a){return t.currentChange(e,a)}}}):t._e()],1):a("div",[a("el-table",{staticClass:"mt10",staticStyle:{width:"550px"},attrs:{data:e.answers,border:!0}},[a("el-table-column",{attrs:{prop:"content",label:"选项"}}),a("el-table-column",{attrs:{prop:"userCount",label:"数据量"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.userCount||0))]}}],null,!0)}),a("el-table-column",{attrs:{label:"占比"},scopedSlots:t._u([{key:"default",fn:function(n){var s=n.row;return[a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(e))]),t._v(" "+t._s(100*((s.userCount?Number(s.userCount):0)/(e.userCount?Number(e.userCount):0)||0).toFixed(2))+"%")]}}],null,!0)})],1)],1)])]),a("div",{staticClass:"right"},[3!=e.type&&4!=e.type?a("el-tabs",{on:{"tab-click":function(a){return t.handleClick(e.activeName,e,n)}},model:{value:e.activeName,callback:function(a){t.$set(e,"activeName",a)},expression:"item.activeName"}},[a("el-tab-pane",{attrs:{label:"柱状",name:"bar"}},[a("div",{staticStyle:{width:"400px",height:"200px"},attrs:{id:"box"+n+"-bar"}})]),a("el-tab-pane",{attrs:{label:"折线图",name:"line"}},[a("div",{staticStyle:{width:"400px",height:"200px"},attrs:{id:"box"+n+"-line"}})]),a("el-tab-pane",{attrs:{label:"饼状图",name:"pic"}},[a("div",{staticStyle:{width:"400px",height:"200px"},attrs:{id:"box"+n+"-pic"}})])],1):t._e()],1)])}))],2)])},s=[],r=a("1da1"),i=(a("96cf"),a("159b"),a("a9e3"),a("0c3f")),o={name:"statistics",data:function(){return{researchData:{},answersList:[],Statistics:[],StatisticsList:[],userCount:0,blaksList:[]}},mounted:function(){this.getById()},created:function(){},methods:{handleClick:function(t,e,a){"line"==t&&this.echartsLine(e,a),"bar"==t&&this.echartsBar(e,a),"pic"==t&&this.echartsPic(e,a)},echartsPic:function(t,e){var a=echarts.init(document.getElementById("box"+e+"-pic")),n=[];t.answers.forEach((function(t){n.push({value:t.userCount||0,name:t.content})}));var s={title:{},grid:{left:"10%"},tooltip:{},legend:{},series:[{name:"比例",radius:"50%",type:"pie",data:n}]};a.setOption(s)},echartsBar:function(t,e){var a;t.answers&&(null===(a=t.answers)||void 0===a?void 0:a.length)>3&&(document.getElementById("box"+e+"-bar").style.height="400px");var n=echarts.init(document.getElementById("box"+e+"-bar")),s=[],r=[];t.answers.forEach((function(t){s.push(t.content),r.push(t.userCount||0)}));var i={title:{text:""},grid:{left:"10%"},tooltip:{},legend:{},xAxis:{show:!0},yAxis:{type:"category",data:s},series:[{name:"比例",type:"bar",data:r}]};n.setOption(i)},echartsLine:function(t,e){var a;t.answers&&(null===(a=t.answers)||void 0===a?void 0:a.length)>3&&(document.getElementById("box"+e+"-line").style.height="400px");var n=echarts.init(document.getElementById("box"+e+"-line")),s=[],r=[];t.answers.forEach((function(t){s.push(t.content),r.push(t.userCount||0)}));var i={title:{text:""},grid:{left:"10%"},tooltip:{},legend:{},xAxis:{show:!0,type:"category",data:s},yAxis:{type:"value"},series:[{name:"比例",type:"line",data:r}]};n.setOption(i)},questionnaireStatistics:function(){var t=this;i["a"].questionnaireStatistics({paperId:this.$route.query.id}).then((function(e){var a=e.data,n=a.data.questions;t.userCount=a.data.userCount;var s={};n.forEach((function(t){s[t.questionId]=JSON.stringify(t)})),t.Statistics.forEach((function(e){if(s[e.questionId]){var a=JSON.parse(s[e.questionId]);e.userCount=a.userCount,e.answers.forEach((function(e){a.answers.forEach((function(a){a.answerId===e.id&&t.$set(e,"userCount",a.userCount)}))}))}})),t.$forceUpdate(),t.Statistics.forEach((function(e,a){3!=e.type&&4!=e.type&&t.echartsBar(e,a)}))}))},getAnswerName:function(t){try{this.answersList.forEach((function(e){if(e.id==t.answerId)throw t.content=e.content,new Error("error")}))}catch(e){}},getById:function(){var t=this;console.log(this.$route.query.id),i["a"].getPaperStatistics({id:this.$route.query.id}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.data,t.researchData=n.data,console.log(n),t.Statistics=n.data.questions,t.Statistics.forEach((function(t){t.activeName="bar"})),e.next=7,t.questionnaireStatistics();case 7:return e.next=9,n.data.questions.forEach((function(e){3!=e.type&&4!=e.type||t.questionnaireStatisticsForShortAnswerAndFillInTheBlanks(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},currentChange:function(t,e){this.questionnaireStatisticsForShortAnswerAndFillInTheBlanks(t,e)},questionnaireStatisticsForShortAnswerAndFillInTheBlanks:function(t,e){var a,n=this,s={ascs:"",current:e||1,descs:"",paperId:this.$route.query.id||t.paperId,paperType:0,questionId:t.questionId,size:(null===(a=t.query)||void 0===a?void 0:a.size)||10};i["a"].questionnaireStatisticsForShortAnswerAndFillInTheBlanks(s).then((function(t){var e,a=t.data;(null===(e=a.data.records)||void 0===e?void 0:e.length)>0&&n.Statistics.forEach((function(t){t.questionId===a.data.records[0].questionId&&(n.$set(t,"query",{size:Number(a.data.size),page:Number(a.data.current),total:Number(a.data.total)}),t.answers=a.data.records)}))}))}}},c=o,u=(a("8c08"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"5542bbb2",null);e["default"]=d.exports}}]);