(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4964d77b"],{"0ac7":function(s,t,e){s.exports=e.p+"img/u4741.4e7e7fa3.png"},"32a9":function(s,t,e){"use strict";e("6bee")},"6bee":function(s,t,e){},"77be":function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("KrPanel",{attrs:{title:"流程详情"}},[s.processList.length?e("kr-time-line",[e("kr-time-line-item",{attrs:{icon:"krIconfont kr-icon_fabu",text:"发起",success:""}},[e("div",{staticClass:"title"},[s._v("发起申请")]),e("div",{staticClass:"user-box"},[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(s.processList[0].startProcessUser),alt:""}}),e("div",{staticClass:"user-name"},[s._v(" "+s._s(s.processList[0].startProcessUser.name)+" ")])]),e("div",{staticClass:"m-t-20 info-color"},[s._v(" 发起【"+s._s(s.processList[0].processName)+"】 "),e("span",{staticStyle:{"padding-left":"5px"}},[s._v(s._s(s.$dayjs(s.processList[0].startTime).format("YYYY-MM-DD HH:mm:ss")))])]),s.processList[0].startCopyUser&&s.processList[0].startCopyUser.length?[e("div",{staticClass:"m-t-20"},[s._v("抄送")]),e("div",{staticClass:"m-t-20 copy-list"},s._l(s.processList[0].startCopyUser,(function(t,a){return e("div",{key:a,staticClass:"copy-user"},[e("div",[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(t),alt:""}})]),e("div",{staticStyle:{"text-align":"center"}},[s._v(s._s(t.name))])])})),0)]:s._e()],2),s._l(s.processList,(function(t,a){return e("kr-time-line-item",{key:a,attrs:{icon:"krIconfont kr-shenhe",text:"审批",success:s.processList[a+1]&&null!==s.processList[a+1].id}},[e("div",{staticClass:"title"},[s._v(" "+s._s(t.name)+" ")]),t.multipleInstances?[[e("div",{staticClass:"m-t-20"},[s._v("会签已审核")]),s._l(t.assigneeUserVOS,(function(t,a){return e("div",{key:a,staticClass:"m-t-20",staticStyle:{"padding-left":"20px"}},[e("div",[e("div",{staticClass:"user-box"},[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(t.assigneeUser)}}),e("div",{staticClass:"user-name"},[s._v(" "+s._s(t.assigneeUser.name)+" ")])]),e("div",{staticClass:"info-color m-t-20"},[e("span",{class:s.getType(t.state)},[s._v(s._s(s.getState(t.state)))]),e("span",{staticStyle:{"padding-left":"10px"}},[s._v(s._s(s.$dayjs(t.assigneeTime).format("YYYY-MM-DD HH:mm:ss")))])]),t.comments&&t.comments.length&&t.comments[0].fullMessage?e("div",{staticClass:"comment m-t-20"},[s._v(" 审核意见："+s._s(t.comments[0].fullMessage)+" ")]):s._e(),t.copyUser&&t.copyUser.length?[e("div",{staticClass:"m-t-20"},[s._v("抄送")]),e("div",{staticClass:"m-t-20 copy-list"},s._l(t.copyUser,(function(t,a){return e("div",{key:a,staticClass:"copy-user"},[e("div",[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(t),alt:""}})]),e("div",{staticStyle:{"text-align":"center"}},[s._v(s._s(t.name))])])})),0)]:s._e()],2)])}))],1===t.processStatus?[e("div",{staticClass:"m-t-20"},[s._v("会签待审批")]),e("div",{staticClass:"m-t-20 user-list-flex"},[s._l(t.candidateUsers,(function(a,i){return[s.isAssignee(t,a)?e("div",{key:i,staticClass:"user-box-flex"},[e("div",[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(a),alt:""}})]),e("div",{staticStyle:{"text-align":"center"}},[s._v(s._s(a.name))])]):s._e()]}))],2)]:s._e()]:[t.assigneeUser?[e("div",{staticClass:"user-box"},[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(t.assigneeUser?t.assigneeUser:{}),alt:""}}),e("div",{staticClass:"user-name"},[s._v(" "+s._s(t.assigneeUser.name)+" ")])]),e("div",{staticClass:"info-color m-t-20"},[e("span",{class:s.getType(t.state)},[s._v(s._s(s.getState(t.state)))]),e("span",{staticStyle:{"padding-left":"10px"}},[s._v(s._s(t.endTime?s.$dayjs(t.endTime).format("YYYY-MM-DD HH:mm:ss"):""))])]),t.comment?e("div",{staticClass:"comment m-t-20"},[s._v(" 审核意见："+s._s(t.comment)+" ")]):s._e(),t.copyUser&&t.copyUser.length?[e("div",{staticClass:"m-t-20"},[s._v("抄送")]),e("div",{staticClass:"m-t-20 copy-list"},s._l(t.copyUser,(function(t,a){return e("div",{key:a,staticClass:"copy-user"},[e("div",[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(t),alt:""}})]),e("div",{staticStyle:{"text-align":"center"}},[s._v(s._s(t.name))])])})),0)]:s._e()]:[e("div",[s._v("待审批")]),t.candidateUsers&&t.candidateUsers.length?e("div",{staticClass:"m-t-20 user-list-flex"},s._l(t.candidateUsers,(function(t,a){return e("div",{key:a,staticClass:"user-box-flex"},[e("div",[e("img",{staticClass:"user-img",attrs:{src:s.getAvatar(t),alt:""}})]),e("div",{staticStyle:{"text-align":"center"}},[s._v(s._s(t.name))])])})),0):s._e()]]],2)}))],2):s._e()],1)},i=[],r=(e("d81d"),e("b0c0"),e("a15b"),e("c740"),e("0ac7")),n=e.n(r),c={name:"prcoessTimeLine",props:{process:{type:Array,default:function(){return[]}}},computed:{processList:function(){for(var s=this.process,t=function(t){s[t].comments&&s[t].comments.map((function(e){e.taskId===s[t].id&&(s[t].comment=e.message)}))},e=0;e<s.length;e++)t(e);return s}},data:function(){return{defaultAvatar:n.a}},methods:{getState:function(s){var t=["等待审核","审核通过","已拒绝","驳回","撤销"];return t[s]},getType:function(s){var t=["","success","info","danger","warning"];return t[s]},getIcon:function(){var s=0,t=["kr-daichuli primary","kr-yitongguo success","kr-yijujue danger"];return this.processList.length&&(s=this.processList[this.processList.length-1].state),s=null==s?0:s,t[s]},getCopyUser:function(s){var t=s.map((function(s){return s.name}));return t.join(",")},getAvatar:function(s){return s&&s.avatar?this.$BASE_URL+"/source/download?id="+s.avatar:this.defaultAvatar},isAssignee:function(s,t){return-1===s.assigneeUserVOS.findIndex((function(s){return s.assigneeUser.id===t.id}))}}},l=c,o=(e("32a9"),e("2877")),m=Object(o["a"])(l,a,i,!1,null,"40bc30b1",null);t["default"]=m.exports}}]);