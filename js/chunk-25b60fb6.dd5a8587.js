(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25b60fb6"],{"02d8":function(e,t,r){"use strict";r("3ea0")},"236d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"notification"},[r("div",{staticClass:"content-header"},[r("el-form",{ref:"elForm",staticClass:"filter-form",attrs:{inline:!0,model:e.searchForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"组织",clearable:""},model:{value:e.searchForm.orgId,callback:function(t){e.$set(e.searchForm,"orgId",t)},expression:"searchForm.orgId"}},e._l(e.orgOptions,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-input",{attrs:{placeholder:"文章名称",clearable:""},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),r("el-form-item",[r("el-select",{attrs:{placeholder:"状态选择",clearable:""},model:{value:e.articleStatus,callback:function(t){e.articleStatus=t},expression:"articleStatus"}},[r("el-option",{attrs:{label:"全部",value:""}}),r("el-option",{attrs:{label:"草稿",value:0}}),r("el-option",{attrs:{label:"审核中",value:1}}),r("el-option",{attrs:{label:"已发布",value:2}}),r("el-option",{attrs:{label:"已驳回",value:-1}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.doSearch}},[e._v("查询")]),r("el-button",{attrs:{icon:"el-icon-refresh-right"},on:{click:e.resetParams}},[e._v("重置")])],1)],1)],1),r("div",{staticClass:"table"},[r("kr-table",{ref:"table",attrs:{columns:e.columns,fetchFunc:e.getList,searchParams:e.searchForm},on:{"selection-change":e.handleSelectionChange}},[r("div",{attrs:{slot:"handleButtons"},slot:"handleButtons"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.addOrEdit("add")}}},[e._v("新增文章")])],1)])],1),r("formDialog",{ref:"form",attrs:{imgCutOption:e.imgCutOption}})],1)},n=[],c=r("1da1"),i=r("5530"),s=r("ade3"),o=(r("96cf"),r("d81d"),r("0b34")),l=r("038f"),u=r("f477"),d=r("2f62"),f={name:"sys-notification",components:{formDialog:o["default"]},props:{},data:function(){this.$createElement;var e,t=this;return{imgCutOption:{boxWidth:920,boxHeight:520,originalGraph:!1,cutWidth:314,cutHeight:177},notiType:[],articleStatus:"",orgOptions:[{value:"",label:"全部"},{value:"57cf946e5ae548a595b49831bdad4a9f",label:"一处"},{value:"c4ea6673afde4494b04823bd0b407e40",label:"二处"},{value:"de2edc1cd277415da352cd31650ec032",label:"三处"},{value:"70dce1e4768148c4b033fd9a5fc09d59",label:"四处"},{value:"582a417a6cd740c69e2161bf3fe7fa48",label:"五处"},{value:"972b7554fe404bf9abdda590965b0f30",label:"支援保障营"},{value:"a7564421232f495d917b50c4a71c5b7f",label:"训练大队"}],searchForm:{articleStatus:[],ascs:"",current:1,deptId:"",descs:"",menuId:"000/008/002",orgId:"",size:20},selectedRows:[],total:100,rows:[],columns:[{prop:"title",label:"文章标题",render:function(e,t){return e("div",{style:"color:var(--defaultTheme)"},[t.title])}},{prop:"author",sortable:!0,label:"作者",width:120,align:"center"},{prop:"orgId",label:"组织",width:150,sortable:!0,align:"center",render:function(e,r){return e("div",[t.orgOptions.map((function(t){if(t.value===r.orgId)return e("el-tag",[t.label])}))])}},{prop:"secretGrade",label:"密级",width:100,sortable:!0,align:"center"},(e={prop:"publishTime",label:"发布时间",width:100,sortable:!0},Object(s["a"])(e,"width","300"),Object(s["a"])(e,"align","center"),e),{prop:"status",label:"状态",align:"center",width:100,render:function(e,t){return e("div",[0===t.status&&e("el-tag",["草稿"]),1===t.status&&e("el-tag",{attrs:{type:"warning"}},["审核中"]),2===t.status&&e("el-tag",{attrs:{type:"success"}},["已发布"]),-1===t.status&&e("el-tag",{attrs:{type:"danger"}},["已驳回"])])}},{label:"操作",headerAlign:"center",prop:"ffff",width:280,fixed:"right",align:"center",render:function(e,r){return e("div",[e("el-button",{on:{click:function(){return t.addOrEdit("view",r)}},attrs:{type:"text",size:t.size,icon:"krIconfont kr-icon_yulan"}},["查看"]),e("el-button",{on:{click:function(){return t.copyForYouxiuzhanbo(r)}},attrs:{type:"text",size:t.size,icon:"krIconfont kr-copy"}},["推送到优秀展播"]),e("el-button",{attrs:{size:t.size,icon:"krIconfont kr-tianxie",type:"text"},on:{click:function(){return t.addOrEdit("edit",r)}}},["编辑"]),!1,e("el-button",{attrs:{size:t.size,icon:" kr-shanchu krIconfont",type:"text"},on:{click:function(){return t.del(r)}},style:"color:red"},["删除"])])}}],showDetail:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(d["c"])({size:function(e){return e.config.defaultSize}})),{},{getList:function(){return l["a"].list}}),watch:{},created:function(){},mounted:function(){},methods:{resetParams:function(){this.searchForm.title="",this.articleStatus="",this.searchForm.articleStatus=[],this.doSearch()},doSearch:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.searchForm.articleStatus=e.articleStatus||0===e.articleStatus?[e.articleStatus]:[],e.$refs.table.insidePage=1,e.$refs.table.init();case 3:case"end":return t.stop()}}),t)})))()},addOrEdit:function(e,t){this.$refs.form.init(e,t,"000/008/002")},copyForYouxiuzhanbo:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={articleId:e.id,menuNodeIds:"000/008/001"},r.next=3,l["a"].copyToOtherMenu(a);case 3:if(n=r.sent,c=n.data,0==c.code){r.next=7;break}return r.abrupt("return",t.$message.error(c.msg));case 7:t.$message({type:"success",message:"推送到优秀展播成功"});case 8:case"end":return r.stop()}}),r)})))()},handleSelectionChange:function(e){this.selectedRows=e},del:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e instanceof Array||(e=[e]),0!=e.length){r.next=3;break}return r.abrupt("return",t.$message.error("请选择需要删除的项!"));case 3:t.$confirm("此操作将永久删除所选, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.map((function(e){return e.id})),r.next=3,l["a"].del({articleId:a});case 3:if(n=r.sent,c=n.data,0==c.code){r.next=7;break}return r.abrupt("return",t.$message.error(c.msg));case 7:t.$message({type:"success",message:"删除成功!"}),t.doSearch();case 9:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 4:case"end":return r.stop()}}),r)})))()},getDictList:function(e){return u["a"].getDictList(e)},cancelNotification:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.status=0,r.next=3,l["a"].save({id:e.id});case 3:a=r.sent,n=a.data,0==n.code&&(t.$message.success("发布成功！"),t.doSearch()),t.$message.success("撤销成功！"),t.doSearch();case 8:case"end":return r.stop()}}),r)})))()},publicNotification:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.status=1,r.next=3,l["a"].publish({articleId:e.id,status:2});case 3:a=r.sent,n=a.data,0==n.code&&(t.$message.success("发布成功！"),t.doSearch());case 6:case"end":return r.stop()}}),r)})))()}}},h=f,p=(r("02d8"),r("2877")),b=Object(p["a"])(h,a,n,!1,null,"9bd23072",null);t["default"]=b.exports},"3ea0":function(e,t,r){}}]);