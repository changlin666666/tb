(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1699fc67"],{"038f":function(e,t,r){"use strict";var a=r("5530"),i=r("7bc1");t["a"]={save:function(e){return i["a"].post("/cms/backend/article/save",Object(a["a"])({contributeFlag:1},e))},list:function(e){return i["a"].post("/cms/backend/article/page",e)},del:function(e){return i["a"].get("/cms/backend/article/delete",e)},detail:function(e){return i["a"].get("/cms/backend/article/getById",e)},copyToOtherMenu:function(e){return i["a"].get("/cms/backend/article/copyToOtherMenu",e)},publish:function(e){return i["a"].post("/cms/backend/article/updateArticleStatus",e)},getOaDeptTree:function(e){return i["a"].get("/sys/oadept/getOaDeptTree",e)},getMenuList:function(e){return i["a"].get("/cms/backend/menu/getMenuList",e)},getMenuTreeForAudit:function(e){return i["a"].get("/cms/backend/menu/getMenuTreeForAudit",e)},getCommentPage:function(e){return i["a"].post("/cms/backend/comment/page",e)},deleteComment:function(e){return i["a"].get("/cms/backend/comment/delete",e)},getArticleTileListByMenuNodeIdsAndKeyword:function(e){return i["a"].get("/cms/backend/article/getArticleTileListByMenuNodeIdsAndKeyword",e)},getTheoryEducationMenuTree:function(e){return i["a"].get("/cms/backend/menu/getTheoryEducationMenuTree",e)},getUsableTheoryEducationMenuTree:function(e){return i["a"].get("/cms/backend/menu/getUsableTheoryEducationMenuTree",e)},queryMenuById:function(e){return i["a"].get("/cms/backend/menu/getById",e)},saveMenu:function(e){return i["a"].post("/cms/backend/menu/save",e)},delMenu:function(e){return i["a"].get("/cms/backend/menu/delete",e)},getSpecialSubjectMenuTree:function(e){return i["a"].get("/cms/backend/menu/getSpecialSubjectMenuTree",e)},getRightSubjectMenuTree:function(e){return i["a"].get("/cms/backend/menu/getPopUpMenuTree",e)},getSpecialSubjectMenuTreeUsable:function(e){return i["a"].get("/cms/backend/menu/getUsablePopUpMenuTree",e)},getUsableSpecialSubjectMenuTree:function(e){return i["a"].get("/cms/backend/menu/getUsableSpecialSubjectMenuTree",e)},getForumArticleList:function(e){return i["a"].post("/forum/backend/article/page",e)},deleteForumArticleById:function(e){return i["a"].get("/forum/backend/article/delete",e)},saveForumArticle:function(e){return i["a"].post("/forum/backend/article/save",e)},queryForumArticleById:function(e){return i["a"].get("/forum/backend/article/getById",e)},getForumModulePage:function(e){return i["a"].post("/forum/backend/module/page",e)},updateEssenceById:function(e){return i["a"].get("/forum/backend/article/updateEssenceById",e)},updateToppingById:function(e){return i["a"].get("/forum/backend/article/updateToppingById",e)},getForumCommentList:function(e){return i["a"].post("/forum/backend/comment/page",e)},deleteForumCommentById:function(e){return i["a"].get("/forum/backend/comment/delete",e)},getArticleTileListByKeyword:function(e){return i["a"].get("/forum/backend/article/getArticleTileListByKeyword",e)},getCmsHistoryPage:function(e){return i["a"].post("/cms/backend/history/page",e)},getCmsScorePage:function(e){return i["a"].post("/cms/backend/score/page",e)},getOptoutscorePage:function(e){return i["a"].post("/cms/backend/optoutscore/page",e)},SaveOptoutscore:function(e){return i["a"].post("/cms/backend/optoutscore/save",e)},getAllOaDeptTree:function(e){return i["a"].get("/sys/oadept/getAllOaDeptTree",e)},getBannerList:function(e){return i["a"].post("/cms/backend/banner/page",e)},getBannerDetail:function(e){return i["a"].get("/cms/backend/banner/getById",e)},saveBanner:function(e){return i["a"].post("/cms/backend/banner/save",e)},deleteBannerByid:function(e){return i["a"].get("/cms/backend/banner/delete",e)},getViewBannerByTime:function(e){return i["a"].get("/cms/backend/banner/getByTime",e)}}},"102e":function(e,t,r){},"10cd":function(e,t,r){},"2f64":function(e,t,r){"use strict";r("10cd")},"39e0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,title:"文章管理",width:"80%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},["add"==e.method?r("div",{staticClass:"form-page"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"7em",disabled:"view"==e.method},on:{validate:e.formValidated}},[r("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"作者:",prop:"author"}},[r("el-input",{attrs:{placeholder:"请输入文章作者",clearable:""},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),r("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[r("el-input",{attrs:{placeholder:"请输入副标题",clearable:""},model:{value:e.form.subtitle,callback:function(t){e.$set(e.form,"subtitle",t)},expression:"form.subtitle"}})],1),r("el-form-item",{attrs:{label:"来源名称:",prop:"sourceName"}},[r("el-input",{attrs:{placeholder:"请输入来源名称",clearable:""},model:{value:e.form.sourceName,callback:function(t){e.$set(e.form,"sourceName",t)},expression:"form.sourceName"}})],1),r("el-form-item",{attrs:{label:"密级:",prop:"secretGrade"}},[r("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",size:e.size},model:{value:e.form.secretGrade,callback:function(t){e.$set(e.form,"secretGrade",t)},expression:"form.secretGrade"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"部门:"}},[r("el-col",{staticClass:"margin-t-20",attrs:{span:8}},[r("el-cascader",{staticStyle:{width:"250px"},attrs:{options:e.options2,props:e.expandTrigger},model:{value:e.inputs1,callback:function(t){e.inputs1=t},expression:"inputs1"}})],1)],1),r("el-form-item",{attrs:{label:"是否置顶:",prop:"topping"}},[r("el-col",{attrs:{span:12}},[r("el-radio",{attrs:{label:"1"},model:{value:e.form.topping,callback:function(t){e.$set(e.form,"topping",t)},expression:"form.topping"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.form.topping,callback:function(t){e.$set(e.form,"topping",t)},expression:"form.topping"}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"标题图:"}},[r("kr-upload",{attrs:{"http-request":e.httpRequest,action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png,.jpg,.gif","list-type":"picture-card","on-remove":e.handleImgRemove,imgEditEnable:!0,imgCutOption:e.imgCutOption,"before-upload":e.beforeupload}})],1),r("el-form-item",{attrs:{label:"正文:",prop:"content"}},[e.visible?r("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:300},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}):e._e()],1),r("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):e._e(),"edit"==e.method?r("div",{staticClass:"form-page"},[r("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.rules,"label-width":"7em",disabled:"view"==e.method},on:{validate:e.formValidated}},[r("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:e.form1.title,callback:function(t){e.$set(e.form1,"title",t)},expression:"form1.title"}})],1),r("el-form-item",{attrs:{label:"作者:",prop:"author"}},[r("el-input",{attrs:{placeholder:"请输入文章作者",clearable:""},model:{value:e.form1.author,callback:function(t){e.$set(e.form1,"author",t)},expression:"form1.author"}})],1),r("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[r("el-input",{attrs:{placeholder:"请输入副标题",clearable:""},model:{value:e.form1.subtitle,callback:function(t){e.$set(e.form1,"subtitle",t)},expression:"form1.subtitle"}})],1),null!=e.form1.sourceName?r("el-form-item",{attrs:{label:"来源名称:",prop:"sourceName"}},[r("el-input",{attrs:{placeholder:"请输入来源名称",clearable:""},model:{value:e.form1.sourceName,callback:function(t){e.$set(e.form1,"sourceName",t)},expression:"form1.sourceName"}})],1):e._e(),r("el-form-item",{attrs:{label:"密级:",prop:"secretGrade"}},[r("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",size:e.size},model:{value:e.form1.secretGrade,callback:function(t){e.$set(e.form1,"secretGrade",t)},expression:"form1.secretGrade"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"部门:"}},[r("el-col",{staticClass:"margin-t-20",attrs:{span:8}},[r("el-cascader",{staticStyle:{width:"250px"},attrs:{options:e.options2,props:e.expandTrigger},model:{value:e.inputs2,callback:function(t){e.inputs2=t},expression:"inputs2"}})],1)],1),r("el-form-item",{attrs:{label:"是否置顶:",prop:"topping"}},[r("el-col",{attrs:{span:12}},[r("el-radio",{attrs:{label:"1"},model:{value:e.form1.topping,callback:function(t){e.$set(e.form1,"topping",t)},expression:"form1.topping"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.form1.topping,callback:function(t){e.$set(e.form1,"topping",t)},expression:"form1.topping"}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"标题图:"}},[r("kr-upload",{attrs:{action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png,.jpg,.gif","list-type":"picture-card","on-remove":e.handleImgRemove,imgEditEnable:!0,imgCutOption:e.imgCutOption,"file-list":e.fileList1,"before-upload":e.beforeupload}})],1),r("el-form-item",{attrs:{label:"正文:",prop:"content"}},[e.visible?r("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:300},model:{value:e.form1.content,callback:function(t){e.$set(e.form1,"content",t)},expression:"form1.content"}}):e._e()],1),r("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):e._e(),"view"==e.method?r("div",{staticClass:"form-page"},[r("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.rules,"label-width":"7em",disabled:"view"==e.method},on:{validate:e.formValidated}},[r("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:e.form1.title,callback:function(t){e.$set(e.form1,"title",t)},expression:"form1.title"}})],1),r("el-form-item",{attrs:{label:"作者:",prop:"author"}},[r("el-input",{attrs:{placeholder:"请输入文章作者",clearable:""},model:{value:e.form1.author,callback:function(t){e.$set(e.form1,"author",t)},expression:"form1.author"}})],1),r("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[r("el-input",{attrs:{placeholder:"请输入副标题",clearable:""},model:{value:e.form1.subtitle,callback:function(t){e.$set(e.form1,"subtitle",t)},expression:"form1.subtitle"}})],1),null!=e.form1.sourceName?r("el-form-item",{attrs:{label:"来源名称:",prop:"sourceName"}},[r("el-input",{attrs:{placeholder:"请输入来源名称",clearable:""},model:{value:e.form1.sourceName,callback:function(t){e.$set(e.form1,"sourceName",t)},expression:"form1.sourceName"}})],1):e._e(),r("el-form-item",{attrs:{label:"密级:",prop:"secretGrade"}},[r("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",size:e.size},model:{value:e.form1.secretGrade,callback:function(t){e.$set(e.form1,"secretGrade",t)},expression:"form1.secretGrade"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),null!=e.form1.image?r("el-form-item",{attrs:{label:"标题图:",prop:"image"}},[r("img",{staticStyle:{width:"148px",height:"148px"},attrs:{src:e.previewUrl,alt:""}})]):e._e(),r("el-form-item",{attrs:{label:"正文:",prop:"content"}},[e.visible?r("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:300},model:{value:e.form1.content,callback:function(t){e.$set(e.form1,"content",t)},expression:"form1.content"}}):e._e()],1),r("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):e._e(),"view"!=e.method?r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"warning"},on:{click:function(t){return e.validForm(0)}}},[e._v(e._s("add"==e.method?"新增草稿":"保存草稿"))]),r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.validForm(1)}}},[e._v("立即发布")])],1):e._e()])},i=[],o=r("1da1"),n=r("5530"),l=(r("96cf"),r("c740"),r("a434"),r("b680"),r("d3b7"),r("25f0"),r("f477")),s=r("9f0d"),u=r("d4ec"),c=r("ade3"),d=function e(){Object(u["a"])(this,e),Object(c["a"])(this,"allowComment",1),Object(c["a"])(this,"allowSearch",1),Object(c["a"])(this,"articleCustoms",[{articleId:"",customName:"",customValue:""}]),Object(c["a"])(this,"articleFiles",[{articleId:"",duration:0,fileId:0,name:"",path:"",size:0,sort:0,type:0}]),Object(c["a"])(this,"author",""),Object(c["a"])(this,"content",""),Object(c["a"])(this,"contributeFlag",""),Object(c["a"])(this,"deptId",""),Object(c["a"])(this,"editor",""),Object(c["a"])(this,"id",""),Object(c["a"])(this,"image",""),Object(c["a"])(this,"linkUrl",""),Object(c["a"])(this,"menuId","000/005/003"),Object(c["a"])(this,"orgId",""),Object(c["a"])(this,"publishTime",""),Object(c["a"])(this,"secretGrade",""),Object(c["a"])(this,"sort",1),Object(c["a"])(this,"sourceName",""),Object(c["a"])(this,"status",0),Object(c["a"])(this,"subtitle",""),Object(c["a"])(this,"tags",""),Object(c["a"])(this,"title",""),Object(c["a"])(this,"topping",""),Object(c["a"])(this,"type",0),Object(c["a"])(this,"video",""),Object(c["a"])(this,"videoDuration",NaN)},m=r("038f"),p=r("85b6"),f=r("5444"),g=r("2f62"),b={components:{userSelect:s["a"],krUpload:p["a"]},props:{},data:function(){return{dictUtils:l["a"],visible:!1,data:null,form:new d,form1:new d,userIds:[],select1:"",organId:"",options:[{value:"核心",label:"核心"},{value:"绝密",label:"绝密"},{value:"机密",label:"机密"},{value:"秘密",label:"秘密"},{value:"公开",label:"公开"}],options1:[{value:1,label:"刊稿"},{value:0,label:"投稿"}],selectes:"",rules:{title:{required:!0,message:"请输入文章标题",trigger:"blur"},type:{required:!0,message:"请选择文章类型",trigger:"blur"},content:{required:!0,message:"请输入文章内容",trigger:"blur"},author:{required:!0,message:"请输入作者",trigger:"blur"},subtitle:{required:!0,message:"请输入副标题",trigger:"blur"},sourceName:{required:!0,message:"请输入来源名称",trigger:"blur"},secretGrade:{required:!0,message:"请输入来源密级",trigger:"blur"},inputs1:{required:!0,message:"请选择部门:",trigger:"blur"}},method:"",imgCutOption:{boxWidth:636,boxHeight:520,originalGraph:!1,rate:"4:3"},fileList1:[{url:""}],fileListimg:[],fileList2:[],inputs1:"",inputs2:"",size:"",fileSysType:"",currentFolderId:"",acceptFormate:"",previewUrl:"",cupload:{name:"",percent:0},options2:[{}],expandTrigger:{label:"name",value:"organId",children:"children"},pid:0,source:"file",duration:""}},computed:Object(n["a"])({},Object(g["c"])({user:function(e){return e.user.user}})),watch:{"form.fullFlag":{handler:function(e){0==e&&(this.form.notifyRecordIds=[])}}},created:function(){},mounted:function(){function e(){var e=new Date,r=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),o=e.getHours(),n=e.getMinutes(),l=e.getSeconds(),s=r+"-"+t(a)+"-"+t(i)+" "+t(o)+":"+t(n)+":"+t(l);return s}function t(e){return e<10?"0"+e:e}this.form.publishTime=e(this.form.publishTime),this.optiones()},methods:{optiones:function(){var e=this;m["a"].getOaDeptTree().then((function(t){e.options2=t.data.data}))},httpRequest:function(e){setTimeout((function(){e.onProgress({percent:25})}),1e3),setTimeout((function(){e.onProgress({percent:65})}),2e3),setTimeout((function(){e.onProgress({percent:100})}),3e3),setTimeout((function(){e.onSuccess()}),4e3)},handleImgRemove:function(e,t){var r=t.findIndex((function(t){return t.uid===e.uid}));r>=0&&t.splice(r,1)},beforeupload:function(e){var t=this,r="image/jpeg"===e.type||"image/png"==e.type,a=e.size/1024/1024<20;if(r){if(a)return console.log(e),f["d"].uploadFile({file:e,pid:this.pid,source:this.source}).then((function(e){console.log(e,"res"),t.form.image="/source/download?id="+e.data.data.id,t.form1.image="/source/download?id="+e.data.data.id,t.form.articleFiles=e.data.data}));this.$message.error("上传头像图片大小不能超过 20MB")}else this.$message.error("上传图片只能是JPG或PNG格式")},init:function(e,t){var r=this;this.method=e,this.visible=!0,this.userIds=[],this.from1=new d,this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("add"==e){a.next=11;break}return a.next=3,m["a"].detail({articleId:t.id});case 3:i=a.sent,r.form1=i.data.data,console.log(i),r.previewUrl="http://130.0.1.1:33400"+r.form1.image,r.fileList1[0].url="http://130.0.1.1:33400"+r.form1.image,console.log(r.form1,"form1"),console.log(r.fil),r.form1.type=String(r.form.type);case 11:case"end":return a.stop()}}),a)}))))},close:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.method="",e.visible=!1;case 2:case"end":return t.stop()}}),t)})))()},converseSize:function(e){var t="";return t=e>=1073741824?(e/1073741824).toFixed(2)+"G":e>=1048576?(e/1024/1024).toFixed(0)+"M":e>=1024?(e/1024).toFixed(0)+"kb":e&&e+"B",t},validForm:function(e){var t=this;if(console.log(this.form.deptId),"add"==this.method){if(1==this.inputs1.length)return void(this.form.deptId=this.inputs1.toString());if(this.inputs1.length>1){var r=this.inputs1.splice(0,1);this.form.deptId=r.toString()}this.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(a,"v"),!a){r.next=14;break}return t.form.status=e,r.next=5,m["a"].save(t.form);case 5:if(i=r.sent,o=i.data,0==o.code){r.next=9;break}return r.abrupt("return",t.$message.error(o.msg));case 9:t.$message.success(o.msg),t.$parent.$refs.table.init(),t.close(),r.next=15;break;case 14:return r.abrupt("return",!1);case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}else{if(1==this.inputs2.length)return void(this.form1.deptId=this.inputs2.toString());if(this.inputs2.length>1){var a=this.inputs2.splice(0,1);this.form1.deptId=a.toString()}this.$refs.form1.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(a,"v"),!a){r.next=14;break}return t.form1.status=e,r.next=5,m["a"].save(t.form1);case 5:if(i=r.sent,o=i.data,0==o.code){r.next=9;break}return r.abrupt("return",t.$message.error(o.msg));case 9:t.$message.success(o.msg),t.$parent.$refs.table.init(),t.close(),r.next=15;break;case 14:return r.abrupt("return",!1);case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},formValidated:function(e,t,r){console.log(e,t,r)},getDictList:function(e){return l["a"].getDictList(e)}}},h=b,v=(r("2f64"),r("8d65"),r("2877")),k=Object(v["a"])(h,a,i,!1,null,"16a36d34",null);t["default"]=k.exports},6395:function(e,t,r){"use strict";r("c502")},"85b6":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload",style:{"--drag-width":e.dragOption.width||"360px","--drag-height":e.dragOption.height||"220px"}},["picture-card"===e.$attrs["list-type"]?r("el-upload",e._b({ref:"upload",attrs:{"on-change":e.uploadImgsChange,"on-success":e.uploadSuccess,headers:{token:e.$store.state.user.user.token}},scopedSlots:e._u([{key:"file",fn:function(t){var a=t.file;return r("div",{},[r("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),r("span",{staticClass:"el-upload-list__item-actions"},[r("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[r("i",{staticClass:"el-icon-zoom-in"})]),e.imgEditEnable&&e.isView?r("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleEditImg(a)}}},[r("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.isView?r("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(a)}}},[r("i",{staticClass:"el-icon-delete"})]):e._e()])])}}],null,!1,863019275)},"el-upload",e.$attrs,!1),[r("i",{staticClass:"el-icon-plus"})]):r("el-upload",e._b({ref:"upload",attrs:{headers:{token:e.$store.state.user.user.token}},on:{"on-success":e.uploadImgsSuccess}},"el-upload",e.$attrs,!1),[e.$attrs.drag?r("div",{staticClass:"drag-tooltip"},[r("i",{staticClass:"el-icon-upload drag-tooltip-icon"}),r("div",{staticClass:"drag-tooltip-text"},[e._v(" 将文件拖到此处，或 "),r("em",[e._v("点击上传")])]),e.tooltip?r("div",{staticClass:"tooltip-text"},[e._v("支持扩展名："+e._s(e.tooltip))]):e._e()]):e._e(),r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),!e.$attrs.drag&&e.tooltip?r("div",{staticClass:"tooltip-text",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tooltip))]):e._e()],1),r("el-dialog",{attrs:{title:"图片预览",visible:e.dialogVisible,top:"3vh","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),r("el-dialog",{attrs:{title:"图片剪裁",visible:e.ImgCutterData.visible,"append-to-body":!0},on:{"update:visible":function(t){return e.$set(e.ImgCutterData,"visible",t)}}},[e.ImgCutterData.visible?r("img-cutter",e._b({ref:"ImgCutter",attrs:{showChooseBtn:!1,isModal:!1},on:{loaded:e.imgCutterLoaded,cutDown:e.imgCutDown,onClearAll:function(t){e.ImgCutterData.visible=!1},changeAllreadyCut:e.changeAllreadyCut}},"img-cutter",e.imgCutOption,!1)):e._e()],1)],1)},i=[],o=(r("d3b7"),r("3ca3"),r("ddb0"),r("b0c0"),function(){return r.e("ImgCutter").then(r.bind(null,"447d"))}),n={name:"kr-upload",components:{ImgCutter:o},props:{tooltip:String,isView:{type:Boolean,default:!0},uploadType:{type:String,default:"file"},dragOption:{type:Object,default:function(){return{width:"360px",height:"220px"}}},imgCutOption:{type:Object,default:function(){return{boxHeight:400,boxWidth:800,originalGraph:!1,rate:null}}},imgEditEnable:{type:Boolean,default:!1}},data:function(){return{isAlreadyCut:!1,dialogImageUrl:"",dialogVisible:!1,ImgCutterData:{loadImgCutter:!1,visible:!1,file:null},uid:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeAllreadyCut:function(e){this.isAlreadyCut=e},uploadSuccess:function(e,t,r){this.loading=!1},uploadImgsChange:function(e,t){!0!==this.$attrs.multiple&&(this.$refs.upload._data.uploadFiles=[e]),this.isAlreadyCut||this.uid===e.uid||(this.ImgCutterData.visible=!0,this.ImgCutterData.file=e),this.uid=e.uid},handleRemove:function(e){this.$attrs["on-remove"](e,this.$refs.upload._data.uploadFiles),this.$emit("remove")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleEditImg:function(e){e.name||(e.name="无名称.png"),this.ImgCutterData.file=e,this.ImgCutterData.visible=!0},imgCutterLoaded:function(){console.log(),this.$refs.ImgCutter.handleOpen(this.ImgCutterData.file)},imgCutDown:function(e){this.ImgCutterData.file.raw=e.file,this.ImgCutterData.file.raw.uid=this.ImgCutterData.file.uid,this.ImgCutterData.file.url=e.dataURL,this.ImgCutterData.file.size=e.file.size,this.ImgCutterData.file.status="ready",this.ImgCutterData.visible=!1,!1!==this.$attrs["auto-upload"]&&this.$refs.upload.submit(),this.$emit("cutDown",this.ImgCutterData.file)}}},l=n,s=(r("6395"),r("2877")),u=Object(s["a"])(l,a,i,!1,null,"b560955c",null);t["a"]=u.exports},"8d65":function(e,t,r){"use strict";r("102e")},c502:function(e,t,r){},d4ec:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return a}))}}]);