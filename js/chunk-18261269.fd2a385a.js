(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18261269"],{"1a2c":function(t,e,i){"use strict";var a=i("7bc1");e["a"]={getStatisticsForForum:function(t){return a["a"].get("/forum/backend/home/getStatistics",t)},getStatisticsForCms:function(t){return a["a"].get("/cms/backend/home/getStatistics",t)},getArticleIncr:function(t){return a["a"].post("/cms/backend/home/getArticleIncr",t)},getScoreRank:function(t){return a["a"].post("/cms/backend/home/getScoreRank",t)},homeSteamerList:function(t){return a["a"].post("/cms/backend/steamer/page",t)},homeSteamerSave:function(t){return a["a"].post("/cms/backend/steamer/save",t)},homeSteamerInfo:function(t){return a["a"].get("/cms/backend/steamer/getById",t)},homeSteamerDel:function(t){return a["a"].get("/cms/backend/steamer/delete",t)},homeSteamerTurnon:function(t){return a["a"].get("/cms/backend/steamer/updateUsableById",t)}}},"46bf":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.visible,title:t.title,width:t.width},on:{"update:visible":function(e){t.visible=e},close:t.close}},[i("el-form",{ref:"form",attrs:{"label-width":"150px",model:t.form,size:"medium",rules:t.rules,disabled:"view"===t.method},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"横幅名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"是否启用",prop:"usable"}},[i("el-radio-group",{model:{value:t.form.usable,callback:function(e){t.$set(t.form,"usable",e)},expression:"form.usable"}},[i("el-radio-button",{attrs:{label:"1"}},[t._v("是")]),i("el-radio-button",{attrs:{label:"0"}},[t._v("否")])],1)],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"横幅图:"}},[i("kr-upload",{ref:"isAlreadyCut",attrs:{"http-request":t.httpRequest,action:t.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png, .jpg, .gif","list-type":"picture-card","on-remove":t.handleImgRemove,isView:"view"!==t.method,imgEditEnable:!0,"file-list":t.imgFileList,imgCutOption:t.imgCutOption,"before-upload":t.beforeupload}})],1)],1)],1)],1),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.close}},[t._v("取 消")]),i("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},r=[],s=i("1da1"),n=(i("c740"),i("a434"),i("96cf"),i("1a2c")),o=i("85b6"),l=i("d4ec"),u=i("ade3"),c=function t(){Object(l["a"])(this,t),Object(u["a"])(this,"name",""),Object(u["a"])(this,"id",null),Object(u["a"])(this,"image",null),Object(u["a"])(this,"remarks",""),Object(u["a"])(this,"usable",0)},d=i("5444"),m={components:{krUpload:o["a"]},props:{imgCutOption:{type:Object,default:function(){return{boxWidth:920,boxHeight:520,originalGraph:!1,cutWidth:1220,cutHeight:105}}},imgCutOptionT:{type:Object,default:function(){return{boxWidth:920,boxHeight:520,cutWidth:240,cutHeight:420,originalGraph:!1}}},width:{type:String,default:"60%"}},watch:{},data:function(){return{theoryEducationMenuOptions:[],imgFileList:[],visible:!1,nodeIds:"",parentId:"",pid:0,source:"file",method:"",form:new c,typeList:[],rules:{menuType:[{required:!0,message:"专题分类类型不能为空",trigger:"blur"}],name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},id:"",title:"",defaultProps:{children:"children",label:"name"}}},methods:{init:function(t,e,i){var a=this;this.imgFileList=[],this.method=t,"add"===t?(this.nodeIds="",this.form=new c,this.title="新增横幅"):this.title="view"===t?"查看横幅":"编辑横幅",this.id=e,this.$nextTick(Object(s["a"])(regeneratorRuntime.mark((function i(){var r,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a.visible=!0,"edit"!==t&&"view"!==t){i.next=12;break}return i.next=4,n["a"].homeSteamerInfo({id:e});case 4:if(r=i.sent,s=r.data,"add"!==t&&(a.imgFileList=null!==s&&void 0!==s&&s.data.image?[{url:null===s||void 0===s?void 0:s.data.image}]:[]),0==s.code){i.next=10;break}return a.$message.error("获取数据失败"),i.abrupt("return");case 10:a.form=s.data,a.nodeIds=s.data.parentNodeIds;case 12:case"end":return i.stop()}}),i)}))))},httpRequest:function(t){setTimeout((function(){t.onProgress({percent:25})}),1e3),setTimeout((function(){t.onProgress({percent:65})}),2e3),setTimeout((function(){t.onProgress({percent:100})}),3e3),setTimeout((function(){t.onSuccess()}),4e3)},handleImgRemove:function(t,e){var i=e.findIndex((function(e){return e.uid===t.uid}));i>=0&&e.splice(i,1)},getValue:function(t){this.form.parentNodeIds=t.nodeIds},beforeupload:function(t){var e=this,i="image/jpeg"===t.type||"image/png"==t.type,a=t.size/1024/1024<20;if(i){if(a)return d["d"].uploadFile({file:t,pid:this.pid,source:this.source}).then((function(t){e.form.image="/file/"+t.data.data.path}));this.$message.error("上传图片大小不能超过 20MB")}else this.$message.error("上传图片只能是JPG或PNG格式")},close:function(){this.visible=!1,this.$refs.isAlreadyCut.isAlreadyCut=!1},submit:function(){var t=this;try{if(!this.form.image)return this.$message.error("横幅图不能为空"),!1;this.$refs.form.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(i){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=13;break}return a=t.form,e.next=4,n["a"].homeSteamerSave(a);case 4:if(r=e.sent,s=r.data,0==s.code){e.next=8;break}return e.abrupt("return",t.$message.error(s.msg));case 8:t.$message.success(s.msg),t.$parent.$refs.table.init(),t.close(),e.next=14;break;case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(e){this.$message.error(e)}}}},p=m,f=i("2877"),g=Object(f["a"])(p,a,r,!1,null,null,null);e["default"]=g.exports},6395:function(t,e,i){"use strict";i("c502")},"85b6":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload",style:{"--drag-width":t.dragOption.width||"360px","--drag-height":t.dragOption.height||"220px"}},["picture-card"===t.$attrs["list-type"]?i("el-upload",t._b({ref:"upload",attrs:{"on-change":t.uploadImgsChange,"on-success":t.uploadSuccess,headers:{token:t.$store.state.user.user.token}},scopedSlots:t._u([{key:"file",fn:function(e){var a=e.file;return i("div",{},[i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:a.url,alt:""}}),i("span",{staticClass:"el-upload-list__item-actions"},[i("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(a)}}},[i("i",{staticClass:"el-icon-zoom-in"})]),t.imgEditEnable&&t.isView?i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleEditImg(a)}}},[i("i",{staticClass:"el-icon-edit-outline"})]):t._e(),t.isView?i("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove(a)}}},[i("i",{staticClass:"el-icon-delete"})]):t._e()])])}}],null,!1,863019275)},"el-upload",t.$attrs,!1),[i("i",{staticClass:"el-icon-plus"})]):i("el-upload",t._b({ref:"upload",attrs:{headers:{token:t.$store.state.user.user.token}},on:{"on-success":t.uploadImgsSuccess}},"el-upload",t.$attrs,!1),[t.$attrs.drag?i("div",{staticClass:"drag-tooltip"},[i("i",{staticClass:"el-icon-upload drag-tooltip-icon"}),i("div",{staticClass:"drag-tooltip-text"},[t._v(" 将文件拖到此处，或 "),i("em",[t._v("点击上传")])]),t.tooltip?i("div",{staticClass:"tooltip-text"},[t._v("支持扩展名："+t._s(t.tooltip))]):t._e()]):t._e(),i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),!t.$attrs.drag&&t.tooltip?i("div",{staticClass:"tooltip-text",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tooltip))]):t._e()],1),i("el-dialog",{attrs:{title:"图片预览",visible:t.dialogVisible,top:"3vh","append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),i("el-dialog",{attrs:{title:"图片剪裁",visible:t.ImgCutterData.visible,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.ImgCutterData,"visible",e)}}},[t.ImgCutterData.visible?i("img-cutter",t._b({ref:"ImgCutter",attrs:{showChooseBtn:!1,isModal:!1},on:{loaded:t.imgCutterLoaded,cutDown:t.imgCutDown,onClearAll:function(e){t.ImgCutterData.visible=!1},changeAllreadyCut:t.changeAllreadyCut}},"img-cutter",t.imgCutOption,!1)):t._e()],1)],1)},r=[],s=(i("d3b7"),i("3ca3"),i("ddb0"),i("b0c0"),function(){return i.e("ImgCutter").then(i.bind(null,"447d"))}),n={name:"kr-upload",components:{ImgCutter:s},props:{tooltip:String,isView:{type:Boolean,default:!0},uploadType:{type:String,default:"file"},dragOption:{type:Object,default:function(){return{width:"360px",height:"220px"}}},imgCutOption:{type:Object,default:function(){return{boxHeight:400,boxWidth:800,originalGraph:!1,rate:null}}},imgEditEnable:{type:Boolean,default:!1}},data:function(){return{isAlreadyCut:!1,dialogImageUrl:"",dialogVisible:!1,ImgCutterData:{loadImgCutter:!1,visible:!1,file:null},uid:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeAllreadyCut:function(t){this.isAlreadyCut=t},uploadSuccess:function(t,e,i){this.loading=!1},uploadImgsChange:function(t,e){!0!==this.$attrs.multiple&&(this.$refs.upload._data.uploadFiles=[t]),this.isAlreadyCut||this.uid===t.uid||(this.ImgCutterData.visible=!0,this.ImgCutterData.file=t),this.uid=t.uid},handleRemove:function(t){this.$attrs["on-remove"](t,this.$refs.upload._data.uploadFiles),this.$emit("remove")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleEditImg:function(t){t.name||(t.name="无名称.png"),this.ImgCutterData.file=t,this.ImgCutterData.visible=!0},imgCutterLoaded:function(){console.log(),this.$refs.ImgCutter.handleOpen(this.ImgCutterData.file)},imgCutDown:function(t){this.ImgCutterData.file.raw=t.file,this.ImgCutterData.file.raw.uid=this.ImgCutterData.file.uid,this.ImgCutterData.file.url=t.dataURL,this.ImgCutterData.file.size=t.file.size,this.ImgCutterData.file.status="ready",this.ImgCutterData.visible=!1,!1!==this.$attrs["auto-upload"]&&this.$refs.upload.submit(),this.$emit("cutDown",this.ImgCutterData.file)}}},o=n,l=(i("6395"),i("2877")),u=Object(l["a"])(o,a,r,!1,null,"b560955c",null);e["a"]=u.exports},c502:function(t,e,i){},d4ec:function(t,e,i){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return a}))}}]);