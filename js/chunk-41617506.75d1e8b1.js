(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41617506","chunk-51d13558","chunk-e23c7110","chunk-16d33815"],{"2c67":function(e,t,r){},"3da7":function(e,t,r){},"3e06":function(e,t,r){"use strict";r("4b01")},"4b01":function(e,t,r){},5678:function(e,t,r){"use strict";r("3da7")},"60d1":function(e,t,r){"use strict";r("2c67")},"73b1":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"服务运行时详情",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"container"},[r("el-descriptions",{staticClass:"margin-top",attrs:{column:2,border:""}},[r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 程序名称 ")]),e._v(" "+e._s(e.info.name)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" bytesRead ")]),e._v(" "+e._s(e.info.bytesRead)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" bytesWritten ")]),e._v(" "+e._s(e.info.bytesWritten)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务启动命令 ")]),e._v(" "+e._s(e.info.commandLine)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" CPU使用百分比 ")]),e._v(" "+e._s(e.info.cpuPercent)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" currentWorkingDirectory ")]),e._v(" "+e._s(e.info.currentWorkingDirectory)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 分组 ")]),e._v(" "+e._s(e.info.group)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 分组ID ")]),e._v(" "+e._s(e.info.groupID)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" kernelTime ")]),e._v(" "+e._s(e.info.kernelTime)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 打开文件数量 ")]),e._v(" "+e._s(e.info.openFiles)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 父程序pid ")]),e._v(" "+e._s(e.info.parentProcessID)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务路径")]),e._v(" "+e._s(e.info.path)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" priority")]),e._v(" "+e._s(e.info.priority)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 程序pid")]),e._v(" "+e._s(e.info.processID)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" residentSetSize")]),e._v(" "+e._s(e.info.residentSetSize)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务开始时间")]),e._v(" "+e._s(e.info.startTime)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务线程数量")]),e._v(" "+e._s(e.info.threadCount)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务持续时间")]),e._v(" "+e._s(e.info.upTime)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务启动用户")]),e._v(" "+e._s(e.info.user)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" virtualSize")]),e._v(" "+e._s(e.info.virtualSize)+" ")],2)],1)],1)])},s=[],n=r("1da1"),a=(r("96cf"),r("d6cce")),o={data:function(){return{info:{},dialogVisible:!1}},methods:{getData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a["a"].status({id:e});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.info=s.data;case 8:case"end":return r.stop()}}),r)})))()},showInfo:function(e){this.getData(e),this.dialogVisible=!0}}},l=o,c=(r("60d1"),r("2877")),u=Object(c["a"])(l,i,s,!1,null,"a349bd4a",null);t["default"]=u.exports},"918c":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"服务详情",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{staticClass:"container"},[r("kr-panel",{staticClass:"button-panel",attrs:{title:"服务配置详情"}},[r("el-descriptions",{staticClass:"margin-top",attrs:{column:2,border:""}},[r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务名 ")]),e._v(" "+e._s(e.info.name)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务状态查询名 ")]),e._v(" "+e._s(e.info.appName)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务状态 ")]),e._v(" "+e._s(e.info.status)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务分组 ")]),e._v(" "+e._s(e.info.group)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 任务描述 ")]),e._v(" "+e._s(e.info.description)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务程序路径 ")]),e._v(" "+e._s(e.info.jobPath)+" ")],2),r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务控制类型 ")]),e._v(" "+e._s(0==e.info.scriptType?"通过脚本文件控制":"通过命令控制")+" ")],2),0==e.info.scriptType?r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 控制脚本文件 ")]),e._v(" "+e._s(e.info.scriptName)+" ")],2):e._e(),1==e.info.scriptType?r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务重启命令 ")]),e._v(" "+e._s(e.info.scriptRestart)+" ")],2):e._e(),1==e.info.scriptType?r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务启动命令 ")]),e._v(" "+e._s(e.info.scriptStart)+" ")],2):e._e(),1==e.info.scriptType?r("el-descriptions-item",[r("template",{slot:"label"},[e._v(" 服务停止命令 ")]),e._v(" "+e._s(e.info.scriptStop)+" ")],2):e._e()],1)],1),r("kr-panel",{staticClass:"button-panel margin-t-20",attrs:{title:"操作历史"}},[r("kr-table",{ref:"table",attrs:{columns:e.columns,rows:e.tableData,fetchFunc:e.getList,searchParams:e.searchParams}})],1)],1)])},s=[],n=r("1da1"),a=(r("96cf"),r("159b"),r("d6cce")),o={data:function(){return{info:{},dialogVisible:!1,searchProps:[],columns:[{prop:"controlType",label:"操作类型"},{prop:"controlTime",label:"操作时间"},{prop:"controlResult",label:"操作结果"},{prop:"description",label:"操作描述"}],tableData:[],id:""}},computed:{getList:function(){return a["a"].history},searchParams:function(){var e={id:this.id};return this.searchProps.forEach((function(t){e[t.field]=t.value})),e}},methods:{getData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a["a"].queryById({id:e});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.info=s.data;case 8:case"end":return r.stop()}}),r)})))()},showInfo:function(e){var t=this;this.id=e,this.getData(e),this.dialogVisible=!0,this.$nextTick((function(){t.$refs.table.init()}))}}},l=o,c=(r("b72b"),r("2877")),u=Object(c["a"])(l,i,s,!1,null,"7b46d4a0",null);t["default"]=u.exports},b3a3:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("KrSearch",{staticClass:"search",attrs:{searchProps:e.searchProps},on:{search:e.search}}),r("div",{staticClass:"mainview common-shadow"},[r("kr-table",{ref:"table",attrs:{columns:e.columns,rows:e.tableData,fetchFunc:e.getList,searchParams:e.searchParams},on:{"selection-change":e.handleSelectionChange}},[r("div",{attrs:{slot:"handleButtons"},slot:"handleButtons"},[r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addtask}},[e._v("新增服务信息")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger",plain:"",disabled:0==e.selection.length},on:{click:function(t){return e.del(e.selection)}}},[e._v("批量删除("+e._s(e.selection.length)+")")])],1)])],1),r("listform",{ref:"form"}),r("serviceInfo",{ref:"refServiceInfo"}),r("formInfo",{ref:"refFormInfo"})],1)},s=[],n=r("1da1"),a=r("5530"),o=(r("96cf"),r("159b"),r("a15b"),r("d81d"),r("b87c")),l=r("d6cce"),c=r("73b1"),u=r("918c"),p=r("2f62"),f={computed:Object(a["a"])({getList:function(){return l["a"].list},searchParams:function(){var e={};return this.searchProps.forEach((function(t){e[t.field]=t.value})),e}},Object(p["c"])({size:function(e){return e.config.defaultSize}})),data:function(){this.$createElement;var e=this;return{searchProps:[{isShow:!0,type:"input",field:"name",value:""}],columns:[{prop:"appName",label:"服务状态查询名"},{prop:"name",label:"服务名"},{prop:"description",label:"任务描述"},{prop:"jobPath",label:"服务程序路径"},{prop:"status",label:"状态"},{label:"操作",headerAlign:"center",fixed:"right",align:"right",width:460,render:function(t,r,i){return t("div",[t("el-button",{on:{click:function(){return e.configinfo(r,i)}},attrs:{type:"text",size:e.size,icon:"el-icon-view"}},["配置详情"]),t("el-button",{on:{click:function(){return e.info(r,i)}},attrs:{type:"text",size:e.size,icon:"el-icon-view"}},["运行时详情"]),t("el-button",{on:{click:function(){return e.edit(r,i)}},attrs:{type:"text",size:e.size,icon:"el-icon-edit-outline"}},["监控设置"]),"STOPPED"==r.status&&t("div",{style:"display:inline-block;margin:0 10px"},[t("el-button",{attrs:{size:e.size,type:"text"},on:{click:function(){return e.start(r,i)}},class:"krIconfont kr-putongzhihang"},["启动"])]),"RUNNING"==r.status&&t("div",{style:"display:inline-block;margin:0 10px"},[t("el-button",{attrs:{size:e.size,type:"text"},on:{click:function(){return e.stop(r,i)}},class:"krIconfont kr-tingzhi"},["停止"]),t("el-button",{attrs:{size:e.size,type:"text"},on:{click:function(){return e.restart(r,i)}},class:"krIconfont kr-zhongqi"},["重启"])]),t("el-button",{attrs:{size:e.size,type:"text"},on:{click:function(){return e.del(r,i)}},class:"krIconfont kr-shanchu danger"},["删除"])])}}],tableData:[],selection:[]}},components:{listform:o["default"],serviceInfo:c["default"],formInfo:u["default"]},methods:{search:function(){this.$refs.table.insidePage=1,this.$refs.table.init()},addtask:function(){this.$refs.form.initForm("add")},edit:function(e,t){this.$refs.form.initForm("edit",e)},configinfo:function(e){this.$refs.refFormInfo.showInfo(e.id)},info:function(e){this.$refs.refServiceInfo.showInfo(e.id)},del:function(e){var t=this;if(e instanceof Array||(e=[e]),0==e.length)return this.$message.error("请选择需要删除的项!");this.$confirm("您确认要删除该内容吗？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.map((function(e){return e.id})).join(","),r.next=3,l["a"].delete({ids:i});case 3:if(s=r.sent,n=s.data,0==n.code){r.next=8;break}return t.$message.error(n.msg),r.abrupt("return");case 8:t.$refs.table.init(),t.$message({type:"success",message:"删除成功!"});case 10:case"end":return r.stop()}}),r)}))))},startTask:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].resume({id:e});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$refs.table.init(),r.abrupt("return",t.$message.error(s.msg));case 7:t.$refs.table.init(),t.$message.success(s.msg);case 9:case"end":return r.stop()}}),r)})))()},stopTask:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].stop({id:e});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$refs.table.init(),r.abrupt("return",t.$message.error(s.msg));case 7:t.$refs.table.init(),t.$message.success(s.msg);case 9:case"end":return r.stop()}}),r)})))()},handleSelectionChange:function(e){this.selection=e},startOrStop:function(e){console.log(e)},start:function(e){var t=this;this.$confirm("您确认要启动该服务吗？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].start({id:e.id});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.$refs.table.init(),t.$message({type:"success",message:"启动成功!"});case 9:case"end":return r.stop()}}),r)}))))},stop:function(e){var t=this;this.$confirm("您确认要停止该服务吗？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].stop({id:e.id});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.$refs.table.init(),t.$message({type:"success",message:"停止成功!"});case 9:case"end":return r.stop()}}),r)}))))},restart:function(e){var t=this;this.$confirm("您确认要重启该服务吗？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,l["a"].restart({id:e.id});case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.$refs.table.init(),t.$message({type:"success",message:"重启成功!"});case 9:case"end":return r.stop()}}),r)}))))}}},m=f,d=(r("3e06"),r("2877")),b=Object(d["a"])(m,i,s,!1,null,"0a871906",null);t["default"]=b.exports},b72b:function(e,t,r){"use strict";r("d241")},b87c:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,top:"3vh",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px",rules:e.rules}},[r("el-form-item",{attrs:{label:"服务状态查询名",prop:"appName"}},[r("el-input",{model:{value:e.form.appName,callback:function(t){e.$set(e.form,"appName",t)},expression:"form.appName"}})],1),r("el-form-item",{attrs:{label:"服务名",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"服务分组",prop:"group"}},[r("el-input",{model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}})],1),r("el-form-item",{attrs:{label:"服务程序路径",prop:"jobPath"}},[r("el-input",{model:{value:e.form.jobPath,callback:function(t){e.$set(e.form,"jobPath",t)},expression:"form.jobPath"}})],1),r("el-form-item",{attrs:{label:"任务描述",prop:"description"}},[r("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),r("el-form-item",{attrs:{label:"服务控制类型",prop:"scriptType"}},[r("el-select",{staticClass:"wid100",attrs:{placeholder:"请选择服务控制类型"},model:{value:e.form.scriptType,callback:function(t){e.$set(e.form,"scriptType",t)},expression:"form.scriptType"}},[r("el-option",{attrs:{label:"通过脚本文件控制",value:"0"}}),r("el-option",{attrs:{label:"通过命令控制",value:"1"}})],1)],1),"0"===e.form.scriptType?r("el-form-item",{attrs:{label:"控制脚本文件",prop:"scriptName"}},[r("el-input",{model:{value:e.form.scriptName,callback:function(t){e.$set(e.form,"scriptName",t)},expression:"form.scriptName"}})],1):e._e(),1==e.form.scriptType?r("el-form-item",{attrs:{label:"服务启动命令",prop:"scriptStart"}},[r("el-input",{model:{value:e.form.scriptStart,callback:function(t){e.$set(e.form,"scriptStart",t)},expression:"form.scriptStart"}})],1):e._e(),1==e.form.scriptType?r("el-form-item",{attrs:{label:"服务重启命令",prop:"scriptRestart"}},[r("el-input",{model:{value:e.form.scriptRestart,callback:function(t){e.$set(e.form,"scriptRestart",t)},expression:"form.scriptRestart"}})],1):e._e(),1==e.form.scriptType?r("el-form-item",{attrs:{label:"服务停止命令",prop:"scriptStop"}},[r("el-input",{model:{value:e.form.scriptStop,callback:function(t){e.$set(e.form,"scriptStop",t)},expression:"form.scriptStop"}})],1):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.clickSub}},[e._v("确 定")])],1)],1)},s=[],n=r("1da1"),a=(r("96cf"),r("d6cce")),o={data:function(){return{form:{name:"",description:"",group:"",scriptType:"",jobPath:"",scriptName:"",scriptRestart:"",scriptStart:"",scriptStop:""},dialogVisible:!1,title:"",type:"",rules:{appName:[{required:!0,message:"请输入服务状态查询名",trigger:"blur"}],name:[{required:!0,message:"请输入服务名",trigger:"blur"}],scriptType:[{required:!0,message:"请选择服务控制类型",trigger:"change"}],group:[{required:!0,message:"请填写服务分组",trigger:"blur"}]}}},methods:{initForm:function(e,t){var r=this;this.type=e,this.title="add"==e?"新增":"编辑",this.dialogVisible=!0,this.$nextTick((function(){r.$refs.form.resetFields(),"add"!=e&&(r.form=JSON.parse(JSON.stringify(t)))}))},clickSub:function(){var e=this;try{this.$refs.form.validate((function(t){if(!t)return!1;var r=JSON.parse(JSON.stringify(e.form));"add"==e.type?e.postAdd(r):e.postEdit(r)}))}catch(t){this.$message.error(t)}},postAdd:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a["a"].add(e);case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.$message.success(s.data),t.$parent.$refs.table.init(),t.dialogVisible=!1;case 10:case"end":return r.stop()}}),r)})))()},postEdit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a["a"].edit(e);case 2:if(i=r.sent,s=i.data,0==s.code){r.next=7;break}return t.$message.error(s.msg),r.abrupt("return");case 7:t.$message.success(s.data),t.$parent.$refs.table.init(),t.dialogVisible=!1;case 10:case"end":return r.stop()}}),r)})))()}}},l=o,c=(r("5678"),r("2877")),u=Object(c["a"])(l,i,s,!1,null,"5f5bbf93",null);t["default"]=u.exports},d241:function(e,t,r){},d6cce:function(e,t,r){"use strict";var i=r("7bc1");t["a"]={list:function(e){return i["a"].post("/service/list",e)},add:function(e){return i["a"].post("/service/add",e)},edit:function(e){return i["a"].post("/service/edit",e)},delete:function(e){return i["a"].get("/service/delete",e)},restart:function(e){return i["a"].get("/service/control/restart",e)},start:function(e){return i["a"].get("/service/control/start",e)},stop:function(e){return i["a"].get("/service/control/stop",e)},status:function(e){return i["a"].get("/service/status",e)},history:function(e){return i["a"].get("/service/control/history",e)},queryById:function(e){return i["a"].get("/service/queryById",e)}}}}]);