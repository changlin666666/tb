(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-416b4262","chunk-1081f010","chunk-238644e8"],{"0e56":function(e,t,r){"use strict";r("b154")},1107:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("d4ec"),i=r("ade3"),s=function e(){Object(n["a"])(this,e),Object(i["a"])(this,"href",""),Object(i["a"])(this,"id",""),Object(i["a"])(this,"permission",""),Object(i["a"])(this,"icon",""),Object(i["a"])(this,"menuType","1"),Object(i["a"])(this,"nodeId",""),Object(i["a"])(this,"nodeIds",""),Object(i["a"])(this,"parentNodeIds",""),Object(i["a"])(this,"name",""),Object(i["a"])(this,"isAllot","1"),Object(i["a"])(this,"sort",1),Object(i["a"])(this,"target",""),Object(i["a"])(this,"remarks",""),Object(i["a"])(this,"isShow","1"),Object(i["a"])(this,"projectId","")}},"246f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"container"},[r("el-col",{staticClass:"content",attrs:{span:24}},[r("kr-table",{ref:"table",attrs:{columns:e.columns,fetchFunc:e.getTree,selection:!1,showPagination:!1,getTree:""},on:{getData:e.getData,"selection-change":e.handleSelectionChange}},[r("div",{attrs:{slot:"handleButtons"},slot:"handleButtons"},[r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.add}},[e._v("新建")])],1)])],1),r("listForm",{ref:"listForm",attrs:{treeData:e.tableData},on:{update:function(t){return e.$refs.table.init()}}})],1)},i=[],s=r("1da1"),a=r("5530"),o=(r("96cf"),r("6d42")),l=r("f477"),c=r("0208"),u=r("2f62"),f={components:{listForm:o["default"]},computed:Object(a["a"])(Object(a["a"])({},Object(u["c"])({size:function(e){return e.config.defaultSize}})),{},{getTree:function(){return c["a"].getMenu}}),data:function(e){this.$createElement;return{columns:[{prop:"name",label:"名称"},{prop:"icon",label:"图标",render:function(e,t){return e("i",{class:t.icon})}},{prop:"type",sortable:!0,label:"类型",render:function(t,r){return t("span",["0"==r.menuType&&t("el-tag",{attrs:{size:e.size,type:"primary"}},[l["a"].getDictLabel("menu_type","0")]),1==r.menuType&&t("el-tag",{attrs:{size:e.size,type:"success"}},[l["a"].getDictLabel("menu_type",1)]),2==r.menuType&&t("el-tag",{attrs:{size:e.size,type:"info"}},[l["a"].getDictLabel("menu_type",2)]),3==r.menuType&&t("el-tag",{attrs:{size:e.size,type:"info"}},[l["a"].getDictLabel("menu_type",3)])])}},{prop:"isShow",sortable:!0,label:"是否显示",render:function(t,r){return t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",value:1==r.isShow,size:e.size},on:{change:function(){return e.changeUse(r)}}})}},{prop:"sort",label:"排序",sortable:!0,align:"center"},{prop:"href",label:"链接",render:function(e,t){return e("el-tooltip",{class:"item",attrs:{effect:"dark",content:t.href,placement:"top-start"}},[e("div",{class:"textover1"},[t.href])])}},{fixed:"right",align:"right",width:300,render:function(t,r,n){return t("div",[t("el-button",{attrs:{icon:" kr-tianxie krIconfont",size:e.size,type:"text"},on:{click:function(){return e.edit(r,n)}}},["编辑"]),t("el-button",{attrs:{icon:" krIconfont kr-icon_yulan",size:e.size,type:"text"},on:{click:function(){return e.view(r,n)}}},["查看"]),t("el-button",{attrs:{icon:"krIconfont kr-add-circle",size:e.size,type:"text"},on:{click:function(){return e.addChild(r,n)}}},["添加下级"]),t("el-button",{attrs:{icon:" kr-shanchu krIconfont",size:e.size,type:"text"},on:{click:function(){return e.del(r,n)}},style:"color:red"},["删除"])])}}],tableData:[],selection:[]}},methods:{getData:function(e){this.tableData=e},changeSort:function(e){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},changeUse:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.isShow=0==e.isShow?"1":"0",delete e.children,r.next=4,c["a"].save(e);case 4:if(n=r.sent,i=n.data,0==i.code){r.next=8;break}return r.abrupt("return",t.$message.error(i.msg));case 8:t.$refs.table.init(),t.$message.success(i.msg);case 10:case"end":return r.stop()}}),r)})))()},addChild:function(e){this.$refs.listForm.init("addChild",e.id,e)},allocate:function(e){this.$refs.AuthForm.init(e.id)},handleSelectionChange:function(e){this.selection=e},add:function(){this.$refs.listForm.init("add")},view:function(e){this.$refs.listForm.init("view",e.id,e)},edit:function(e){this.$refs.listForm.init("edit",e.id,e)},del:function(e){var t=this,r="";r=e.children.length>0?"该菜单存在子菜单，是否确认删除？":"确定要删除选择项？",this.$confirm(r,"提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"error"}).then(Object(s["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c["a"].del({menuId:e.id});case 2:if(n=r.sent,i=n.data,0==i.code){r.next=6;break}return r.abrupt("return",t.$message.error(i.msg));case 6:t.$message.success(i.msg),t.$refs.table.init();case 8:case"end":return r.stop()}}),r)})))).catch((function(e){e.type}))}}},d=f,m=(r("0e56"),r("2877")),p=Object(m["a"])(d,n,i,!1,null,"a8e7ad7c",null);t["default"]=p.exports},2645:function(e,t,r){},"3fcf":function(e,t,r){"use strict";r("2645")},"6d42":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,title:e.title,width:e.width},on:{"update:visible":function(t){e.visible=t},close:function(t){e.visible=!1}}},[r("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,size:"medium",rules:e.rules,disabled:"view"===e.method},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[r("el-row",[1!=e.form.id?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[r("el-radio-group",{model:{value:e.form.menuType,callback:function(t){e.$set(e.form,"menuType",t)},expression:"form.menuType"}},e._l(e.typeList,(function(t){return r("el-radio-button",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.value))])})),1)],1)],1):e._e(),1!=e.form.id?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"上级菜单"}},[e.visible?r("kr-tree-select",{staticStyle:{width:"100%"},attrs:{props:e.treeProps,nodeKey:"nodeIds",data:e.treeData},on:{getValue:e.getValue},model:{value:e.nodeIds,callback:function(t){e.nodeIds=t},expression:"nodeIds"}}):e._e()],1)],1):e._e(),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:(e.typeList[e.form.menuType]?e.typeList[e.form.menuType].value:"")+"名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),3!=e.form.menuType?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:(e.typeList[e.form.menuType]?e.typeList[e.form.menuType].value:"")+"图标",prop:"icon"}},[r("el-input",{on:{focus:function(t){return e.$refs.iconList.init()}},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1)],1):e._e(),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"授权标识",prop:"permission"}},[r("el-input",{attrs:{placeholder:"请输入授权标识"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1)],1),1==e.form.menuType?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"链接地址",prop:"href"}},[r("el-input",{attrs:{placeholder:"请输入链接地址"},model:{value:e.form.href,callback:function(t){e.$set(e.form,"href",t)},expression:"form.href"}})],1)],1):e._e(),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否显示",prop:"isShow"}},[r("el-radio-group",{model:{value:e.form.isShow,callback:function(t){e.$set(e.form,"isShow",t)},expression:"form.isShow"}},[r("el-radio-button",{attrs:{label:"1"}},[e._v("是")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否可分配",prop:"isAllot"}},[r("el-radio-group",{model:{value:e.form.isAllot,callback:function(t){e.$set(e.form,"isAllot",t)},expression:"form.isAllot"}},[r("el-radio-button",{attrs:{label:"1"}},[e._v("是")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{min:1,label:"排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1),r("iconList",{ref:"iconList",on:{choseIcon:e.choseIcon}})],1)},i=[],s=r("1da1"),a=(r("96cf"),r("c6da")),o=r("f477"),l=r("0208"),c=r("1107"),u={components:{iconList:a["default"]},props:{width:{type:String,default:"50%"},treeData:{type:Array,default:function(){return[]}},treeProps:{type:Object,default:function(){return{children:"children",label:"name",disabled:"disabled"}}}},watch:{},data:function(){return{visible:!1,nodeIds:"",parentId:"",method:"",form:new c["a"],typeList:[],rules:{menuType:[{required:!0,message:"菜单类型不能为空",trigger:"blur"}],name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},id:"",title:""}},methods:{init:function(e,t,r){var n=this;this.typeList=o["a"].getDictList("menu_type"),this.method=e,"add"===e?(this.nodeIds="",this.form=new c["a"],this.title="新建菜单"):"view"===e?this.title="查看菜单":"addChild"===e?(this.title="添加下级菜单",this.form=new c["a"],this.nodeIds=r.nodeIds,this.form.parentNodeIds=r.nodeIds):this.title="编辑菜单",this.id=t,this.$nextTick(Object(s["a"])(regeneratorRuntime.mark((function r(){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.visible=!0,"edit"!==e&&"view"!==e){r.next=11;break}return r.next=4,l["a"].queryById({menuId:t});case 4:if(i=r.sent,s=i.data,0==s.code){r.next=9;break}return n.$message.error("获取数据失败"),r.abrupt("return");case 9:n.form=s.data,n.nodeIds=s.data.parentNodeIds;case 11:case"end":return r.stop()}}),r)}))))},choseIcon:function(e){this.form.icon=e},getValue:function(e){this.form.parentNodeIds=e.nodeIds},submit:function(){var e=this;try{this.$refs.form.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}return n=e.form,t.next=4,l["a"].save(n);case 4:if(i=t.sent,s=i.data,0==s.code){t.next=8;break}return t.abrupt("return",e.$message.error(s.msg));case 8:e.$message.success(s.msg),e.$emit("update"),e.visible=!1,t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error(t)}}}},f=u,d=r("2877"),m=Object(d["a"])(f,n,i,!1,null,null,null);t["default"]=m.exports},b154:function(e,t,r){},c6da:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"icon-dialog",attrs:{visible:e.visible,title:e.title,"append-to-body":"","lock-scroll":""},on:{"update:visible":function(t){e.visible=t},close:function(t){e.visible=!1}}},[r("Icon",{attrs:{showCopyBtn:!1},on:{selected:e.chosed}})],1)},i=[],s=r("d575"),a={components:{Icon:s["a"]},props:{width:{type:String,default:"50%"}},data:function(){return{visible:!1,method:"",form:{name:"",code:"",type:"",use:!0,sort:1,desc:""},rules:{type:[{required:!0,message:"岗位类型不能为空",trigger:"blur"}]},id:"",title:""}},methods:{init:function(e,t,r){var n=this;this.method=e,this.title="选择图标",this.id=t,this.visible=!0,this.$nextTick((function(){"add"!==e&&(n.form=JSON.parse(JSON.stringify(r)))}))},chosed:function(e){this.$emit("choseIcon",e),this.visible=!1},submit:function(){var e=this;try{this.$refs.form.validate((function(t){if(!t)return!1;e.$message.success("操作成功!"),e.visible=!1}))}catch(t){this.$message.error(t)}}}},o=a,l=(r("3fcf"),r("2877")),c=Object(l["a"])(o,n,i,!1,null,"34a6a84a",null);t["default"]=c.exports},d4ec:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))}}]);