(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55a15972","chunk-677ac3ef"],{"0275":function(e,t,a){},"038f":function(e,t,a){"use strict";var i=a("5530"),r=a("7bc1");t["a"]={save:function(e){return r["a"].post("/cms/backend/article/save",Object(i["a"])({contributeFlag:1},e))},list:function(e){return r["a"].post("/cms/backend/article/page",e)},del:function(e){return r["a"].get("/cms/backend/article/delete",e)},detail:function(e){return r["a"].get("/cms/backend/article/getById",e)},copyToOtherMenu:function(e){return r["a"].get("/cms/backend/article/copyToOtherMenu",e)},publish:function(e){return r["a"].post("/cms/backend/article/updateArticleStatus",e)},getOaDeptTree:function(e){return r["a"].get("/sys/oadept/getOaDeptTree",e)},getMenuList:function(e){return r["a"].get("/cms/backend/menu/getMenuList",e)},getMenuTreeForAudit:function(e){return r["a"].get("/cms/backend/menu/getMenuTreeForAudit",e)},getCommentPage:function(e){return r["a"].post("/cms/backend/comment/page",e)},deleteComment:function(e){return r["a"].get("/cms/backend/comment/delete",e)},getArticleTileListByMenuNodeIdsAndKeyword:function(e){return r["a"].get("/cms/backend/article/getArticleTileListByMenuNodeIdsAndKeyword",e)},getTheoryEducationMenuTree:function(e){return r["a"].get("/cms/backend/menu/getTheoryEducationMenuTree",e)},getUsableTheoryEducationMenuTree:function(e){return r["a"].get("/cms/backend/menu/getUsableTheoryEducationMenuTree",e)},queryMenuById:function(e){return r["a"].get("/cms/backend/menu/getById",e)},saveMenu:function(e){return r["a"].post("/cms/backend/menu/save",e)},delMenu:function(e){return r["a"].get("/cms/backend/menu/delete",e)},getSpecialSubjectMenuTree:function(e){return r["a"].get("/cms/backend/menu/getSpecialSubjectMenuTree",e)},getRightSubjectMenuTree:function(e){return r["a"].get("/cms/backend/menu/getPopUpMenuTree",e)},getSpecialSubjectMenuTreeUsable:function(e){return r["a"].get("/cms/backend/menu/getUsablePopUpMenuTree",e)},getUsableSpecialSubjectMenuTree:function(e){return r["a"].get("/cms/backend/menu/getUsableSpecialSubjectMenuTree",e)},getForumArticleList:function(e){return r["a"].post("/forum/backend/article/page",e)},deleteForumArticleById:function(e){return r["a"].get("/forum/backend/article/delete",e)},saveForumArticle:function(e){return r["a"].post("/forum/backend/article/save",e)},queryForumArticleById:function(e){return r["a"].get("/forum/backend/article/getById",e)},getForumModulePage:function(e){return r["a"].post("/forum/backend/module/page",e)},updateEssenceById:function(e){return r["a"].get("/forum/backend/article/updateEssenceById",e)},updateToppingById:function(e){return r["a"].get("/forum/backend/article/updateToppingById",e)},getForumCommentList:function(e){return r["a"].post("/forum/backend/comment/page",e)},deleteForumCommentById:function(e){return r["a"].get("/forum/backend/comment/delete",e)},getArticleTileListByKeyword:function(e){return r["a"].get("/forum/backend/article/getArticleTileListByKeyword",e)},getCmsHistoryPage:function(e){return r["a"].post("/cms/backend/history/page",e)},getCmsScorePage:function(e){return r["a"].post("/cms/backend/score/page",e)},getOptoutscorePage:function(e){return r["a"].post("/cms/backend/optoutscore/page",e)},SaveOptoutscore:function(e){return r["a"].post("/cms/backend/optoutscore/save",e)},getAllOaDeptTree:function(e){return r["a"].get("/sys/oadept/getAllOaDeptTree",e)},getBannerList:function(e){return r["a"].post("/cms/backend/banner/page",e)},getBannerDetail:function(e){return r["a"].get("/cms/backend/banner/getById",e)},saveBanner:function(e){return r["a"].post("/cms/backend/banner/save",e)},deleteBannerByid:function(e){return r["a"].get("/cms/backend/banner/delete",e)},getViewBannerByTime:function(e){return r["a"].get("/cms/backend/banner/getByTime",e)}}},"2eee":function(e){e.exports=JSON.parse('{"Play":"播放","Pause":"暂停","Current Time":"当前时间","Duration":"时长","Remaining Time":"剩余时间","Stream Type":"媒体流类型","LIVE":"直播","Loaded":"加载完成","Progress":"进度","Fullscreen":"全屏","Non-Fullscreen":"退出全屏","Picture-in-Picture":"画中画","Exit Picture-in-Picture":"退出画中画","Mute":"静音","Unmute":"取消静音","Playback Rate":"播放速度","Subtitles":"字幕","subtitles off":"关闭字幕","Captions":"内嵌字幕","captions off":"关闭内嵌字幕","Chapters":"节目段落","Close Modal Dialog":"关闭弹窗","Descriptions":"描述","descriptions off":"关闭描述","Audio Track":"音轨","You aborted the media playback":"视频播放被终止","A network error caused the media download to fail part-way.":"网络错误导致视频下载中途失败。","The media could not be loaded, either because the server or network failed or because the format is not supported.":"视频因格式不支持或者服务器或网络的问题无法加载。","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"由于视频文件损坏或是该视频使用了你的浏览器不支持的功能，播放终止。","No compatible source was found for this media.":"无法找到此视频兼容的源。","The media is encrypted and we do not have the keys to decrypt it.":"视频已加密，无法解密。","Play Video":"播放视频","Close":"关闭","Modal Window":"弹窗","This is a modal window":"这是一个弹窗","This modal can be closed by pressing the Escape key or activating the close button.":"可以按ESC按键或启用关闭按钮来关闭此弹窗。",", opens captions settings dialog":", 开启标题设置弹窗",", opens subtitles settings dialog":", 开启字幕设置弹窗",", opens descriptions settings dialog":", 开启描述设置弹窗",", selected":", 选择","captions settings":"字幕设定","Audio Player":"音频播放器","Video Player":"视频播放器","Replay":"重新播放","Progress Bar":"进度条","Volume Level":"音量","subtitles settings":"字幕设定","descriptions settings":"描述设定","Text":"文字","White":"白","Black":"黑","Red":"红","Green":"绿","Blue":"蓝","Yellow":"黄","Magenta":"紫红","Cyan":"青","Background":"背景","Window":"窗口","Transparent":"透明","Semi-Transparent":"半透明","Opaque":"不透明","Font Size":"字体尺寸","Text Edge Style":"字体边缘样式","None":"无","Raised":"浮雕","Depressed":"压低","Uniform":"均匀","Dropshadow":"下阴影","Font Family":"字体库","Proportional Sans-Serif":"比例无细体","Monospace Sans-Serif":"单间隔无细体","Proportional Serif":"比例细体","Monospace Serif":"单间隔细体","Casual":"舒适","Script":"手写体","Small Caps":"小型大写字体","Reset":"重置","restore all settings to the default values":"恢复全部设定至预设值","Done":"完成","Caption Settings Dialog":"字幕设定窗口","Beginning of dialog window. Escape will cancel and close the window.":"打开对话窗口。Escape键将取消并关闭对话窗口","End of dialog window.":"结束对话窗口","Seek to live, currently behind live":"尝试直播，当前为延时播放","Seek to live, currently playing live":"尝试直播，当前为实时播放","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"正在加载 {1}。"}')},"38a0":function(e,t,a){"use strict";a("d428")},6395:function(e,t,a){"use strict";a("c502")},"715c":function(e,t,a){"use strict";a("0275")},"85b6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload",style:{"--drag-width":e.dragOption.width||"360px","--drag-height":e.dragOption.height||"220px"}},["picture-card"===e.$attrs["list-type"]?a("el-upload",e._b({ref:"upload",attrs:{"on-change":e.uploadImgsChange,"on-success":e.uploadSuccess,headers:{token:e.$store.state.user.user.token}},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:i.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(i)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e.imgEditEnable&&e.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleEditImg(i)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(i)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])])}}],null,!1,863019275)},"el-upload",e.$attrs,!1),[a("i",{staticClass:"el-icon-plus"})]):a("el-upload",e._b({ref:"upload",attrs:{headers:{token:e.$store.state.user.user.token}},on:{"on-success":e.uploadImgsSuccess}},"el-upload",e.$attrs,!1),[e.$attrs.drag?a("div",{staticClass:"drag-tooltip"},[a("i",{staticClass:"el-icon-upload drag-tooltip-icon"}),a("div",{staticClass:"drag-tooltip-text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),e.tooltip?a("div",{staticClass:"tooltip-text"},[e._v("支持扩展名："+e._s(e.tooltip))]):e._e()]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),!e.$attrs.drag&&e.tooltip?a("div",{staticClass:"tooltip-text",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tooltip))]):e._e()],1),a("el-dialog",{attrs:{title:"图片预览",visible:e.dialogVisible,top:"3vh","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("el-dialog",{attrs:{title:"图片剪裁",visible:e.ImgCutterData.visible,"append-to-body":!0},on:{"update:visible":function(t){return e.$set(e.ImgCutterData,"visible",t)}}},[e.ImgCutterData.visible?a("img-cutter",e._b({ref:"ImgCutter",attrs:{showChooseBtn:!1,isModal:!1},on:{loaded:e.imgCutterLoaded,cutDown:e.imgCutDown,onClearAll:function(t){e.ImgCutterData.visible=!1},changeAllreadyCut:e.changeAllreadyCut}},"img-cutter",e.imgCutOption,!1)):e._e()],1)],1)},r=[],o=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),function(){return a.e("ImgCutter").then(a.bind(null,"447d"))}),n={name:"kr-upload",components:{ImgCutter:o},props:{tooltip:String,isView:{type:Boolean,default:!0},uploadType:{type:String,default:"file"},dragOption:{type:Object,default:function(){return{width:"360px",height:"220px"}}},imgCutOption:{type:Object,default:function(){return{boxHeight:400,boxWidth:800,originalGraph:!1,rate:null}}},imgEditEnable:{type:Boolean,default:!1}},data:function(){return{isAlreadyCut:!1,dialogImageUrl:"",dialogVisible:!1,ImgCutterData:{loadImgCutter:!1,visible:!1,file:null},uid:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeAllreadyCut:function(e){this.isAlreadyCut=e},uploadSuccess:function(e,t,a){this.loading=!1},uploadImgsChange:function(e,t){!0!==this.$attrs.multiple&&(this.$refs.upload._data.uploadFiles=[e]),this.isAlreadyCut||this.uid===e.uid||(this.ImgCutterData.visible=!0,this.ImgCutterData.file=e),this.uid=e.uid},handleRemove:function(e){this.$attrs["on-remove"](e,this.$refs.upload._data.uploadFiles),this.$emit("remove")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleEditImg:function(e){e.name||(e.name="无名称.png"),this.ImgCutterData.file=e,this.ImgCutterData.visible=!0},imgCutterLoaded:function(){console.log(),this.$refs.ImgCutter.handleOpen(this.ImgCutterData.file)},imgCutDown:function(e){this.ImgCutterData.file.raw=e.file,this.ImgCutterData.file.raw.uid=this.ImgCutterData.file.uid,this.ImgCutterData.file.url=e.dataURL,this.ImgCutterData.file.size=e.file.size,this.ImgCutterData.file.status="ready",this.ImgCutterData.visible=!1,!1!==this.$attrs["auto-upload"]&&this.$refs.upload.submit(),this.$emit("cutDown",this.ImgCutterData.file)}}},s=n,l=(a("6395"),a("2877")),u=Object(l["a"])(s,i,r,!1,null,"b560955c",null);t["a"]=u.exports},bcf1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,title:"文章管理",width:"80%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},["add"==e.method?a("div",{staticClass:"form-page"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"9em",disabled:"view"==e.method},on:{validate:e.formValidated}},[a("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"作者:",prop:"author"}},[a("el-input",{attrs:{placeholder:"请输入文章作者",clearable:""},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),a("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[a("el-input",{attrs:{placeholder:"请输入副标题",clearable:""},model:{value:e.form.subtitle,callback:function(t){e.$set(e.form,"subtitle",t)},expression:"form.subtitle"}})],1),a("el-form-item",{attrs:{label:"来源名称:",prop:"sourceName"}},[a("el-input",{attrs:{placeholder:"请输入来源名称",clearable:""},model:{value:e.form.sourceName,callback:function(t){e.$set(e.form,"sourceName",t)},expression:"form.sourceName"}})],1),a("el-form-item",{attrs:{label:"密级:",prop:"secretGrade"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",size:e.size},model:{value:e.form.secretGrade,callback:function(t){e.$set(e.form,"secretGrade",t)},expression:"form.secretGrade"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"部门:"}},[a("el-col",{staticClass:"margin-t-20",attrs:{span:8}},[a("el-cascader",{staticStyle:{width:"250px"},attrs:{options:e.options2,props:e.expandTrigger},model:{value:e.inputs1,callback:function(t){e.inputs1=t},expression:"inputs1"}})],1)],1),a("el-form-item",{attrs:{label:"是否置顶:",prop:"topping"}},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.topping,callback:function(t){e.$set(e.form,"topping",t)},expression:"form.topping"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.form.topping,callback:function(t){e.$set(e.form,"topping",t)},expression:"form.topping"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"标题图:"}},[a("kr-upload",{attrs:{"http-request":e.httpRequest,action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png, .jpg, .gif","list-type":"picture-card","on-remove":e.handleImgRemove,imgEditEnable:!0,imgCutOption:e.imgCutOption,"before-upload":e.beforeupload}})],1),a("el-form-item",{attrs:{label:"视频:"}},[a("el-upload",{attrs:{action:e.$BASE_URL+"/source/upload",headers:{token:e.$store.state.user.user.token},accept:".mp4, .rmvb, .mkv, .wmv, .flv","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.videoUploaded,multiple:!1,limit:1,data:{pid:1,source:"file"},"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),"view"!==e.method?a("div",{directives:[{name:"show",rawName:"v-show",value:e.form.video,expression:"form.video"}],attrs:{id:"video-box"}},[a("video",{staticClass:"video-js vjs-default-skin vjs-big-play-centered",attrs:{id:"videoplayer",controls:"",preload:"none"}})]):e._e()],1),a("el-form-item",{attrs:{label:"视频时长（秒）：",prop:"videoDuration"}},[a("el-input",{attrs:{clearable:"",readonly:""},model:{value:e.form.videoDuration,callback:function(t){e.$set(e.form,"videoDuration",t)},expression:"form.videoDuration"}})],1),a("el-form-item",{attrs:{label:"正文:",prop:"content"}},[e.visible?a("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:600},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}):e._e()],1),a("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):e._e(),"edit"==e.method?a("div",{staticClass:"form-page"},[a("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.rules,"label-width":"9em",disabled:"view"==e.method},on:{validate:e.formValidated}},[a("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:e.form1.title,callback:function(t){e.$set(e.form1,"title",t)},expression:"form1.title"}})],1),a("el-form-item",{attrs:{label:"作者:",prop:"author"}},[a("el-input",{attrs:{placeholder:"请输入文章作者",clearable:""},model:{value:e.form1.author,callback:function(t){e.$set(e.form1,"author",t)},expression:"form1.author"}})],1),a("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[a("el-input",{attrs:{placeholder:"请输入副标题",clearable:""},model:{value:e.form1.subtitle,callback:function(t){e.$set(e.form1,"subtitle",t)},expression:"form1.subtitle"}})],1),null!=e.form1.sourceName?a("el-form-item",{attrs:{label:"来源名称:",prop:"sourceName"}},[a("el-input",{attrs:{placeholder:"请输入来源名称",clearable:""},model:{value:e.form1.sourceName,callback:function(t){e.$set(e.form1,"sourceName",t)},expression:"form1.sourceName"}})],1):e._e(),a("el-form-item",{attrs:{label:"密级:",prop:"secretGrade"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",size:e.size},model:{value:e.form1.secretGrade,callback:function(t){e.$set(e.form1,"secretGrade",t)},expression:"form1.secretGrade"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"部门:"}},[a("el-col",{staticClass:"margin-t-20",attrs:{span:8}},[a("el-cascader",{staticStyle:{width:"250px"},attrs:{options:e.options2,props:e.expandTrigger},model:{value:e.inputs2,callback:function(t){e.inputs2=t},expression:"inputs2"}})],1)],1),a("el-form-item",{attrs:{label:"是否置顶:",prop:"topping"}},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form1.topping,callback:function(t){e.$set(e.form1,"topping",t)},expression:"form1.topping"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.form1.topping,callback:function(t){e.$set(e.form1,"topping",t)},expression:"form1.topping"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"标题图:"}},[a("kr-upload",{attrs:{action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png, .jpg, .gif","list-type":"picture-card","on-remove":e.handleImgRemove,imgEditEnable:!0,imgCutOption:e.imgCutOption,"file-list":e.fileList1,"before-upload":e.beforeupload}})],1),a("el-form-item",{attrs:{label:"视频:"}},[a("el-upload",{attrs:{action:e.$BASE_URL+"/source/upload",headers:{token:e.$store.state.user.user.token},accept:".mp4, .rmvb, .mkv, .wmv, .flv","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.videoUploaded,multiple:!1,limit:1,data:{pid:1,source:"file"},"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),"edit"==e.method?a("div",{directives:[{name:"show",rawName:"v-show",value:e.form1.video,expression:"form1.video"}],attrs:{id:"video-box"}},[a("video",{staticClass:"video-js vjs-default-skin vjs-big-play-centered",attrs:{id:"videoplayer",controls:"",preload:"none"}})]):e._e()],1),a("el-form-item",{attrs:{label:"正文:",prop:"content"}},[e.visible?a("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:600},model:{value:e.form1.content,callback:function(t){e.$set(e.form1,"content",t)},expression:"form1.content"}}):e._e()],1),a("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):e._e(),"view"==e.method?a("div",{staticClass:"form-page"},[a("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.rules,"label-width":"9em",disabled:"view"==e.method},on:{validate:e.formValidated}},[a("el-form-item",{attrs:{label:"文章标题：",prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入文章标题",clearable:""},model:{value:e.form1.title,callback:function(t){e.$set(e.form1,"title",t)},expression:"form1.title"}})],1),a("el-form-item",{attrs:{label:"作者:",prop:"author"}},[a("el-input",{attrs:{placeholder:"请输入文章作者",clearable:""},model:{value:e.form1.author,callback:function(t){e.$set(e.form1,"author",t)},expression:"form1.author"}})],1),a("el-form-item",{attrs:{label:"副标题:",prop:"subtitle"}},[a("el-input",{attrs:{placeholder:"请输入副标题",clearable:""},model:{value:e.form1.subtitle,callback:function(t){e.$set(e.form1,"subtitle",t)},expression:"form1.subtitle"}})],1),null!=e.form1.sourceName?a("el-form-item",{attrs:{label:"来源名称:",prop:"sourceName"}},[a("el-input",{attrs:{placeholder:"请输入来源名称",clearable:""},model:{value:e.form1.sourceName,callback:function(t){e.$set(e.form1,"sourceName",t)},expression:"form1.sourceName"}})],1):e._e(),a("el-form-item",{attrs:{label:"密级:",prop:"secretGrade"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择",size:e.size},model:{value:e.form1.secretGrade,callback:function(t){e.$set(e.form1,"secretGrade",t)},expression:"form1.secretGrade"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"标题图:",prop:"image"}},[e.form1.image?a("img",{staticStyle:{width:"148px",height:"148px"},attrs:{src:e.previewUrl,alt:""}}):a("span",[e._v("暂无")])]),a("el-form-item",{attrs:{label:"视频:"}},["view"==e.method?a("div",{directives:[{name:"show",rawName:"v-show",value:e.form1.video,expression:"form1.video"}],attrs:{id:"video-box"}},[a("video",{staticClass:"video-js vjs-default-skin vjs-big-play-centered",attrs:{id:"videoplayer",controls:"",preload:"none"}})]):e._e()]),a("el-form-item",{attrs:{label:"视频时长（秒）：",prop:"videoDuration"}},[a("el-input",{attrs:{clearable:"",readonly:""},model:{value:e.form1.videoDuration,callback:function(t){e.$set(e.form1,"videoDuration",t)},expression:"form1.videoDuration"}})],1),a("el-form-item",{attrs:{label:"正文:",prop:"content"}},[e.visible?a("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:600},model:{value:e.form1.content,callback:function(t){e.$set(e.form1,"content",t)},expression:"form1.content"}}):e._e()],1),a("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):e._e(),"view"!=e.method?a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"warning"},on:{click:function(t){return e.validForm(0)}}},[e._v(" "+e._s("add"==e.method?"新增草稿":"保存草稿")+" ")]),a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.validForm(1)}}},[e._v("提交审核")])],1):e._e()])},r=[],o=a("1da1"),n=a("5530"),s=(a("96cf"),a("99af"),a("b0c0"),a("c740"),a("a434"),a("b680"),a("d3b7"),a("25f0"),a("f477")),l=a("9f0d"),u=a("c19a"),c=a("038f"),d=a("85b6"),m=a("5444"),p=a("2f62"),f=a("f0e2"),g=(a("fda2"),a("2eee"));f["a"].addLanguage("zh",g);var b={components:{userSelect:l["a"],krUpload:d["a"]},props:{},data:function(){return{myPlayer:"",videoUrl:"",dictUtils:s["a"],visible:!1,data:null,form:new u["a"],form1:new u["a"],fileList:[],userIds:[],select1:"",organId:"",videoOptions:{autoplay:!0,controls:!0,sources:[{src:"http://1257120875.vod2.myqcloud.com/0ef121cdvodtransgzp1257120875/3055695e5285890780828799271/v.f230.m3u8"}]},options:[{value:"核心",label:"核心"},{value:"绝密",label:"绝密"},{value:"机密",label:"机密"},{value:"秘密",label:"秘密"},{value:"公开",label:"公开"}],options1:[{value:1,label:"刊稿"},{value:0,label:"投稿"}],selectes:"",rules:{title:{required:!0,message:"请输入文章标题",trigger:"blur"},type:{required:!0,message:"请选择文章类型",trigger:"blur"},content:{required:!0,message:"请输入文章内容",trigger:"blur"},author:{required:!0,message:"请输入作者",trigger:"blur"},subtitle:{required:!0,message:"请输入副标题",trigger:"blur"},sourceName:{required:!0,message:"请输入来源名称",trigger:"blur"},secretGrade:{required:!0,message:"请输入来源密级",trigger:"blur"},inputs1:{required:!0,message:"请选择部门:",trigger:"blur"}},method:"",imgCutOption:{boxWidth:636,boxHeight:520,originalGraph:!1,rate:"4:3"},fileList1:[{url:""}],fileListimg:[],fileList2:[],inputs1:"",inputs2:"",size:"",fileSysType:"",currentFolderId:"",acceptFormate:"",previewUrl:"",cupload:{name:"",percent:0},options2:[{}],expandTrigger:{label:"name",value:"organId",children:"children"},pid:0,source:"file",duration:""}},computed:Object(n["a"])({},Object(p["c"])({user:function(e){return e.user.user}})),watch:{"form.fullFlag":{handler:function(e){0==e&&(this.form.notifyRecordIds=[])}},visible:{handler:function(e){var t=this;e&&this.$nextTick((function(){t.initVideo("")}))}},immediate:!0},created:function(){},mounted:function(){function e(){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate(),o=e.getHours(),n=e.getMinutes(),s=e.getSeconds(),l=a+"-"+t(i)+"-"+t(r)+" "+t(o)+":"+t(n)+":"+t(s);return l}function t(e){return e<10?"0"+e:e}this.form.publishTime=e(this.form.publishTime),this.optiones()},methods:{initVideo:function(e,t){if(this.myPlayer){this.myPlayer.dispose();var a=document.getElementById("video-box");a.innerHTML='<video id="videoplayer" class="video-js vjs-default-skin" controls width="500" height="300"></video>'}var i=this;i.form.videoDuration="",this.myPlayer=Object(f["a"])("videoplayer",{controls:!0,muted:!0,autoplay:!1,preload:"auto",width:500,height:300,sources:[{src:e}],playbackRates:[.5,1,1.5,2]},(function(){f["a"].log("Your player is ready!"),this.on("ended",(function(){f["a"].log("Awww...over so soon?!")})),this.on("loadedmetadata",(function(){var e=Math.ceil(this.duration());i.form.video=t||"",i.form.videoDuration=e||"未上传视频"}))}))},videoUploaded:function(e){var t=this,a="",i="";e.data.path&&(a=this.$BASE_URL+"/file/"+e.data.path,i="/file/"+e.data.path,this.$nextTick((function(){t.initVideo(a,i)})))},handleRemove:function(e,t){},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},optiones:function(){var e=this;c["a"].getOaDeptTree().then((function(t){e.options2=t.data.data}))},httpRequest:function(e){setTimeout((function(){e.onProgress({percent:25})}),1e3),setTimeout((function(){e.onProgress({percent:65})}),2e3),setTimeout((function(){e.onProgress({percent:100})}),3e3),setTimeout((function(){e.onSuccess()}),4e3)},handleImgRemove:function(e,t){var a=t.findIndex((function(t){return t.uid===e.uid}));a>=0&&t.splice(a,1)},beforeupload:function(e){var t=this,a="image/jpeg"===e.type||"image/png"==e.type,i=e.size/1024/1024<20;if(a){if(i)return m["d"].uploadFile({file:e,pid:this.pid,source:this.source}).then((function(e){t.form.image=e.data.data.path,t.form.articleFiles[0].fileId=e.data.data.id,t.form.articleFiles[0].name=e.data.data.name,t.form.articleFiles[0].size=e.data.data.size,t.form.articleFiles[0].path=e.data.data.path,t.form.articleFiles[0].type=1}));this.$message.error("上传头像图片大小不能超过 20MB")}else this.$message.error("上传图片只能是JPG或PNG格式")},init:function(e,t){var a=this;this.method=e,this.visible=!0,this.userIds=[],this.from1=new u["a"],this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function i(){var r,o,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("add"==e){i.next=9;break}return i.next=3,c["a"].detail({articleId:t.id});case 3:n=i.sent,a.form1=n.data.data,a.previewUrl=null!==n&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.data.image?a.$BASE_URL+"/file/"+a.form1.image:"",a.fileList1=null!==n&&void 0!==n&&null!==(o=n.data)&&void 0!==o&&o.data.image?[{url:a.$BASE_URL+"/file/"+a.form1.image}]:[],a.form1.type=String(a.form.type),a.initVideo(a.$BASE_URL+a.form1.video);case 9:case"end":return i.stop()}}),i)}))))},close:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.method="",e.visible=!1;case 2:case"end":return t.stop()}}),t)})))()},converseSize:function(e){var t="";return t=e>=1073741824?(e/1073741824).toFixed(2)+"G":e>=1048576?(e/1024/1024).toFixed(0)+"M":e>=1024?(e/1024).toFixed(0)+"kb":e&&e+"B",t},validForm:function(e){var t=this;if("add"==this.method){if(console.log(this.form),1==this.inputs1.length)this.form.deptId=this.inputs1.toString();else if(this.inputs1.length>1){var a=this.inputs1.splice(0,1);this.form.deptId=a.toString()}this.$refs.form.validate(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i){a.next=14;break}return t.form.status=e,a.next=4,c["a"].save(t.form);case 4:if(r=a.sent,o=r.data,console.log(c["a"]),0==o.code){a.next=9;break}return a.abrupt("return",t.$message.error(o.msg));case 9:t.$message.success(o.msg),t.$parent.$refs.table.init(),t.close(),a.next=15;break;case 14:return a.abrupt("return",!1);case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}else{if(1==this.inputs2.length)this.form1.deptId=this.inputs2.toString();else if(this.inputs2.length>1){var i=this.inputs2.splice(0,1);this.form1.deptId=i.toString()}this.$refs.form1.validate(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i){a.next=13;break}return t.form1.status=e,a.next=4,c["a"].save(t.form1);case 4:if(r=a.sent,o=r.data,0==o.code){a.next=8;break}return a.abrupt("return",t.$message.error(o.msg));case 8:t.$message.success(o.msg),t.$parent.$refs.table.init(),t.close(),a.next=14;break;case 13:return a.abrupt("return",!1);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},formValidated:function(e,t,a){},getDictList:function(e){return s["a"].getDictList(e)}}},h=b,v=(a("715c"),a("38a0"),a("2877")),y=Object(v["a"])(h,i,r,!1,null,"45efab8f",null);t["default"]=y.exports},c19a:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("d4ec"),r=a("ade3"),o=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(i["a"])(this,e),Object(r["a"])(this,"allowComment",1),Object(r["a"])(this,"allowSearch",1),Object(r["a"])(this,"articleCustoms",[]),Object(r["a"])(this,"articleFiles",[]),Object(r["a"])(this,"author",""),Object(r["a"])(this,"content",""),Object(r["a"])(this,"contributeFlag",1),Object(r["a"])(this,"deptId",""),Object(r["a"])(this,"editor",""),Object(r["a"])(this,"id",""),Object(r["a"])(this,"image",""),Object(r["a"])(this,"linkUrl",""),Object(r["a"])(this,"menuId",""),Object(r["a"])(this,"orgId",""),Object(r["a"])(this,"publishTime",""),Object(r["a"])(this,"secretGrade","秘密"),Object(r["a"])(this,"sort",100),Object(r["a"])(this,"sourceName",""),Object(r["a"])(this,"status",0),Object(r["a"])(this,"tags",""),Object(r["a"])(this,"title",""),Object(r["a"])(this,"topping",0),Object(r["a"])(this,"type",0),Object(r["a"])(this,"video",""),Object(r["a"])(this,"videoDuration",0),Object(r["a"])(this,"videoName",""),Object(r["a"])(this,"pdf",""),Object(r["a"])(this,"pdfName",""),Object(r["a"])(this,"pdfPage",0),this.menuId=t,this.articleCustoms=a}},c502:function(e,t,a){},d428:function(e,t,a){},d4ec:function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return i}))}}]);