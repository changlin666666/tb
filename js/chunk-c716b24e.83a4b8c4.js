(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c716b24e"],{"797f":function(e,t,a){"use strict";var s=a("7bc1");t["a"]={tree:function(e){return s["a"].get("/data-share/resource-catalog/getTree",e)},use:function(e){return s["a"].get("/data-share/resource-catalog/updateUsableById",e)},add:function(e){return s["a"].post("/data-share/resource-catalog/add",e)},save:function(e){return s["a"].post("/data-share/resource-catalog/edit",e)},del:function(e){return s["a"].get("/data-share/resource-catalog/deleteById",e)}}},"8dbd":function(e,t,a){"use strict";var s=a("7bc1");t["a"]={tree:function(e){return s["a"].get("/data-share/resource-tag/getTree",e)},use:function(e){return s["a"].get("/data-share/resource-tag/updateUsableById",e)},add:function(e){return s["a"].post("/data-share/resource-tag/add",e)},save:function(e){return s["a"].post("/data-share/resource-tag/edit",e)},del:function(e){return s["a"].get("/data-share/resource-tag/deleteById",e)}}},c1cb:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"container"},[a("el-row",{staticClass:"top"},[a("el-col",{staticClass:"title",attrs:{span:24}},[e._v(" "+e._s(e.data.name)+" ")]),a("el-col",{staticClass:"content",attrs:{span:24}},[a("el-col",{staticClass:"item",attrs:{span:8}},[a("span",{staticClass:"label"},[e._v(" 资源类型： ")]),e._v(" "+e._s(1==e.data.resourceType?"外部接口资源":"模型资源")+" ")]),a("el-col",{staticClass:"item",attrs:{span:8,offset:2}},[a("span",{staticClass:"label"},[e._v(" 资源目录： ")]),e._v(" "+e._s(e.getTreeName(e.data.catalogId))+" ")]),a("el-col",{staticClass:"item",attrs:{span:8}},[a("span",{staticClass:"label"},[e._v(" 资源标签： ")]),e.data.resourceTags&&e.data.resourceTags.length>0?e._l(e.data.resourceTags,(function(t){return a("el-tag",{key:t.id,staticStyle:{"margin-right":"4px"},attrs:{size:"small",type:e.getFlag(t)}},[e._v(e._s(t.names))])})):[e._v(" 无 ")]],2),a("el-col",{staticClass:"item",attrs:{span:8,offset:2}},[a("span",{staticClass:"label"},[e._v(" 更新时间： ")]),e._v(e._s(e.data.updateTime)+" ")]),a("el-col",{staticClass:"item",attrs:{span:24}},[a("el-tag",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"}},[e._v(" 访问量："+e._s(e.data.viewNum))]),a("el-tag",{attrs:{type:"success"}},[e._v(" 使用量："+e._s(Number(e.data.successNum)+Number(e.data.errorNum))+" ")])],1)],1)],1),a("el-row",{staticClass:"bottom"},[a("div",{staticClass:"title"},e._l(e.tabs,(function(t,s){return a("div",{key:s,staticClass:"item",class:e.active==s?"active":"",on:{click:function(t){return e.changeActive(s)}}},[e._v(" "+e._s(t)+" ")])})),0),a("el-col",{staticClass:"content",attrs:{span:24}},[a("el-col",{staticClass:"subtitle",attrs:{span:24}},[e._v(e._s(e.tabs[e.active]))]),a("el-col",{attrs:{span:24}},[0==e.active?[a("el-descriptions",{staticStyle:{"margin-top":"20px"},attrs:{column:2,border:""}},[a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 联系人 ")]),e._v(" "+e._s(e.data.extraContact)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 联系方式 ")]),e._v(" "+e._s(e.data.extraContactWay)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 数据格式 ")]),e._v(" "+e._s(e.data.extraDataFormat)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 部门地址 ")]),e._v(" "+e._s(e.data.extraDeptAddr)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 所属行业 ")]),e._v(" "+e._s(e.data.extraIndustry)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 开放方式 ")]),e._v(" "+e._s(e.data.extraOpenMode)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 数据来源 ")]),e._v(" "+e._s(e.data.extraSource)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 来源部门 ")]),e._v(" "+e._s(e.data.extraSourceDept)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 所属主题 ")]),e._v(" "+e._s(e.data.extraSubject)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 更新频率 ")]),e._v(" "+e._s(e.data.extraUpdateFrequency)+" ")],2)],1)]:e._e(),1==e.active&&0==e.$route.query.type?[a("div",{staticClass:"database"},[a("div",{staticClass:"name"},[e._v("数据库："+e._s(e.baseData.schemaName))]),a("div",{staticClass:"name"},[e._v("表名："+e._s(e.baseData.tableName))]),a("div",{staticClass:"table"},[e._v("表中文名："+e._s(e.baseData.remarks||"无"))])]),a("el-table",{attrs:{data:e.dataFields,border:"",stripe:"",size:"small"}},[a("el-table-column",{attrs:{label:"序号",sortable:"",prop:"ordinalPosition"}}),a("el-table-column",{attrs:{label:"字段名称",prop:"columnName"}}),a("el-table-column",{attrs:{label:"字段类型",prop:"columnType"}}),a("el-table-column",{attrs:{label:"字段大小",prop:"columnSize"}}),a("el-table-column",{attrs:{label:"字段长度",prop:"columnLength"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}})],1)]:e._e(),1==e.active&&1==e.$route.query.type?[a("el-descriptions",{staticStyle:{"margin-top":"20px"},attrs:{column:2,border:""}},[a("el-descriptions-item",{attrs:{span:"2","label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 请求地址 ")]),e._v(" "+e._s(e.data.httpResource.url)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 请求重试次数 ")]),e._v(" "+e._s(e.data.httpResource.retryCount)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 重试时间间隔(ms) ")]),e._v(" "+e._s(e.data.httpResource.retryInterval)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 请求成功条件 ")]),e._v(" "+e._s(e.data.httpResource.successWhen)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 报文体类型 ")]),e._v(" "+e._s(e.data.httpResource.bodyType)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 编码格式 ")]),e._v(" "+e._s(e.data.httpResource.charset)+" ")],2),a("el-descriptions-item",{attrs:{"label-class-name":"labelItem"}},[a("template",{slot:"label"},[e._v(" 请求类型 ")]),e._v(" "+e._s(e.data.httpResource.httpMethod)+" ")],2)],1),a("el-col",{staticClass:"subtitle",staticStyle:{margin:"20px 0"},attrs:{span:24}},[e._v(" 请求参数 ")]),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",border:"",stripe:"",data:e.data.httpResource.httpResourceParams}},[a("el-table-column",{attrs:{prop:"paramKey",label:"字段名"}}),a("el-table-column",{attrs:{prop:"paramValue",label:"字段值"}}),a("el-table-column",{attrs:{prop:"paramType",label:"字段类型"}}),a("el-table-column",{attrs:{prop:"must",label:"是否必填"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.must?"是":"否"))]}}],null,!1,2654948127)}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}})],1)]:e._e(),2==e.active?[a("el-empty")]:e._e(),3==e.active?[a("el-empty")]:e._e()],2)],1)],1)],1)},l=[],r=a("2909"),n=a("3835"),c=a("1da1"),o=a("b85c"),i=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("a15b"),a("b0c0"),a("99af"),a("7db0"),a("ecef")),d=a("797f"),u=a("8dbd");function m(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=Object(o["a"])(e);try{for(s.s();!(t=s.n()).done;){var l=t.value;a.push(l),l.children&&l.children.length>0&&m(l.children,a)}}catch(r){s.e(r)}finally{s.f()}return a}var p={data:function(){return{data:"",treeData:[],baseData:"",ModelTabs:["基本信息","数据项","API服务","关联信息"],HttpTabs:["基本信息","参数配置","API服务","关联信息"],active:0,dataFields:[],tagList:[],catalogList:[]}},mounted:function(){this.init()},computed:{tabs:function(){return 0==this.$route.query.type?this.ModelTabs:this.HttpTabs}},methods:{init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function t(){var a,s,l,r,c,o,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([d["a"].tree(),i["a"].detail({id:e.$route.query.id}),u["a"].tree()]);case 2:if(a=t.sent,s=Object(n["a"])(a,3),l=s[0].data,r=s[1].data,c=s[2].data,e.treeData=l.data,e.data=r.data,e.tagTree=c.data,e.catalogList=m(e.treeData),e.tagList=m(e.tagTree),e.getNames(),0!=e.$route.query.type){t.next=20;break}return t.next=16,i["a"].more({dataSourceId:r.data.modelResource.dataSourceId,schemaName:r.data.modelResource.schemaName,tableName:r.data.modelResource.tableName});case 16:o=t.sent,p=o.data,e.baseData=p.data,e.dataFields=p.data.columns;case 20:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})))()},getTreeName:function(e){var t,a=[],s=Object(o["a"])(this.catalogList);try{for(s.s();!(t=s.n()).done;){var l=t.value;l.id==e&&(a.push(l.name),a=[].concat(Object(r["a"])(a),Object(r["a"])(this.getTreeParent(this.catalogList,l.parentNodeIds))))}}catch(n){s.e(n)}finally{s.f()}return a.join("--")},getNames:function(){function e(t,a){var s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(o["a"])(a);try{for(r.s();!(s=r.n()).done;){var n=s.value;n.nodeIds==t&&(l.push(n.name),n.parentNodeIds&&"000"!=n.parentNodeIds&&e(n.parentNodeIds,a,l))}}catch(c){r.e(c)}finally{r.f()}return l}var t,a=Object(o["a"])(this.data.resourceTags);try{for(a.s();!(t=a.n()).done;){var s=t.value,l=e(s.nodeIds,this.tagList).reverse().join("-");this.$set(s,"names",l)}}catch(r){a.e(r)}finally{a.f()}},getFlag:function(e){var t=this.tagList.find((function(t){return t.id==e.id}));if(t)switch(t.id%3){case 0:return"primary";case 1:return"success";case 2:return"warning"}},getTreeParent:function(e,t){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=Object(o["a"])(e);try{for(l.s();!(a=l.n()).done;){var r=a.value;r.nodeIds==t&&(s.push(r.name),this.getTreeParent(e,r.parentNodeIds,s))}}catch(n){l.e(n)}finally{l.f()}return s},changeActive:function(e){this.active=e}}},b=p,v=(a("c599"),a("2877")),_=Object(v["a"])(b,s,l,!1,null,"e63ca320",null);t["default"]=_.exports},c599:function(e,t,a){"use strict";a("fa9f")},ecef:function(e,t,a){"use strict";var s=a("7bc1");t["a"]={list:function(e){return s["a"].post("/data-share/resource/page",e)},add:function(e){return s["a"].post("/data-share/resource/add",e)},del:function(e){return s["a"].get("/data-share/resource/deleteById",e)},save:function(e){return s["a"].post("/data-share/resource/edit",e)},detail:function(e){return s["a"].get("/data-share/resource/getById",e)},more:function(e){return s["a"].get("/data-share/resource/getTableDetail",e)},modelDetail:function(e){return s["a"].get("/data-share/resource/getTableDetailById",e)},getTableModelList:function(e){return s["a"].get("/data-share/resource/getTableModelList",e)},getById:function(e){return s["a"].get("/data-share/resource/getById",e)}}},fa9f:function(e,t,a){}}]);