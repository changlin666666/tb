(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5595adaf"],{"038f":function(e,t,a){"use strict";var n=a("5530"),i=a("7bc1");t["a"]={save:function(e){return i["a"].post("/cms/backend/article/save",Object(n["a"])({contributeFlag:1},e))},list:function(e){return i["a"].post("/cms/backend/article/page",e)},del:function(e){return i["a"].get("/cms/backend/article/delete",e)},detail:function(e){return i["a"].get("/cms/backend/article/getById",e)},copyToOtherMenu:function(e){return i["a"].get("/cms/backend/article/copyToOtherMenu",e)},publish:function(e){return i["a"].post("/cms/backend/article/updateArticleStatus",e)},getOaDeptTree:function(e){return i["a"].get("/sys/oadept/getOaDeptTree",e)},getMenuList:function(e){return i["a"].get("/cms/backend/menu/getMenuList",e)},getMenuTreeForAudit:function(e){return i["a"].get("/cms/backend/menu/getMenuTreeForAudit",e)},getCommentPage:function(e){return i["a"].post("/cms/backend/comment/page",e)},deleteComment:function(e){return i["a"].get("/cms/backend/comment/delete",e)},getArticleTileListByMenuNodeIdsAndKeyword:function(e){return i["a"].get("/cms/backend/article/getArticleTileListByMenuNodeIdsAndKeyword",e)},getTheoryEducationMenuTree:function(e){return i["a"].get("/cms/backend/menu/getTheoryEducationMenuTree",e)},getUsableTheoryEducationMenuTree:function(e){return i["a"].get("/cms/backend/menu/getUsableTheoryEducationMenuTree",e)},queryMenuById:function(e){return i["a"].get("/cms/backend/menu/getById",e)},saveMenu:function(e){return i["a"].post("/cms/backend/menu/save",e)},delMenu:function(e){return i["a"].get("/cms/backend/menu/delete",e)},getSpecialSubjectMenuTree:function(e){return i["a"].get("/cms/backend/menu/getSpecialSubjectMenuTree",e)},getRightSubjectMenuTree:function(e){return i["a"].get("/cms/backend/menu/getPopUpMenuTree",e)},getSpecialSubjectMenuTreeUsable:function(e){return i["a"].get("/cms/backend/menu/getUsablePopUpMenuTree",e)},getUsableSpecialSubjectMenuTree:function(e){return i["a"].get("/cms/backend/menu/getUsableSpecialSubjectMenuTree",e)},getForumArticleList:function(e){return i["a"].post("/forum/backend/article/page",e)},deleteForumArticleById:function(e){return i["a"].get("/forum/backend/article/delete",e)},saveForumArticle:function(e){return i["a"].post("/forum/backend/article/save",e)},queryForumArticleById:function(e){return i["a"].get("/forum/backend/article/getById",e)},getForumModulePage:function(e){return i["a"].post("/forum/backend/module/page",e)},updateEssenceById:function(e){return i["a"].get("/forum/backend/article/updateEssenceById",e)},updateToppingById:function(e){return i["a"].get("/forum/backend/article/updateToppingById",e)},getForumCommentList:function(e){return i["a"].post("/forum/backend/comment/page",e)},deleteForumCommentById:function(e){return i["a"].get("/forum/backend/comment/delete",e)},getArticleTileListByKeyword:function(e){return i["a"].get("/forum/backend/article/getArticleTileListByKeyword",e)},getCmsHistoryPage:function(e){return i["a"].post("/cms/backend/history/page",e)},getCmsScorePage:function(e){return i["a"].post("/cms/backend/score/page",e)},getOptoutscorePage:function(e){return i["a"].post("/cms/backend/optoutscore/page",e)},SaveOptoutscore:function(e){return i["a"].post("/cms/backend/optoutscore/save",e)},getAllOaDeptTree:function(e){return i["a"].get("/sys/oadept/getAllOaDeptTree",e)},getBannerList:function(e){return i["a"].post("/cms/backend/banner/page",e)},getBannerDetail:function(e){return i["a"].get("/cms/backend/banner/getById",e)},saveBanner:function(e){return i["a"].post("/cms/backend/banner/save",e)},deleteBannerByid:function(e){return i["a"].get("/cms/backend/banner/delete",e)},getViewBannerByTime:function(e){return i["a"].get("/cms/backend/banner/getByTime",e)}}},"27a9":function(e,t,a){"use strict";a("5a7b")},"5a7b":function(e,t,a){},6106:function(e,t,a){"use strict";a("6459")},6459:function(e,t,a){},"66f6":function(e,t,a){"use strict";a("b476")},"6ab3":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("d4ec"),i=a("ade3"),r=function e(){Object(n["a"])(this,e),Object(i["a"])(this,"content",""),Object(i["a"])(this,"defaultShow",0),Object(i["a"])(this,"endTime",""),Object(i["a"])(this,"id",null),Object(i["a"])(this,"image",""),Object(i["a"])(this,"startTime","")}},"7ae9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,title:"Banner管理",width:"60%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},[a("div",{staticClass:"form-page"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"12em",disabled:"view"==e.method},on:{validate:e.formValidated}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"名称：",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否为默认配置:",prop:"defaultShow"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 是否为默认配置： "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"如果为默认配置，当前Banner图以及提示文字永久有效，如果当前日期没有指定的Banner图，则使用默认配置的Banner图",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.defaultShow,callback:function(t){e.$set(e.form,"defaultShow",t)},expression:"form.defaultShow"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"提示文字："}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 提示文字： "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"允许为空；不为空时，用户进入系统时，系统会通过动画的方式展示提示文字",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),a("el-input",{attrs:{placeholder:"请输入提示文字",maxlength:"17","show-word-limit":"",clearable:""},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Banner图:"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" Banner图： "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"推荐图片尺寸：1900 × 280，为保证最佳显示效果，请尽量上传推荐尺寸的图片",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),a("kr-upload",{ref:"isAlreadyCut",attrs:{"http-request":e.httpRequest,action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png, .jpg","list-type":"picture-card","on-remove":e.handleImgRemove,isView:"view"!==e.method,imgEditEnable:!0,"file-list":e.imgFileList,imgCutOption:e.imgCutOption,"before-upload":e.beforeupload}})],1)],1),0===e.form.defaultShow?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"有效日期"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 有效日期： "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"开始日期（包含）~ 结束日期（包含）",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateOption,callback:function(t){e.dateOption=t},expression:"dateOption"}})],1)],1):e._e(),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1)],1),"view"!=e.method?a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.validForm(1)}}},[e._v("发布 ")])],1):e._e()])},i=[],r=a("1da1"),o=a("5530"),s=(a("96cf"),a("c740"),a("a434"),a("ac1f"),a("5319"),a("f477")),l=a("9f0d"),u=a("6ab3"),c=a("038f"),d=a("e718"),m=a("5444"),p=a("2f62"),f={components:{userSelect:l["a"],krUpload:d["a"]},props:{},data:function(){return{dictUtils:s["a"],visible:!1,data:null,form:new u["a"],userIds:[],select1:"",organId:"",imgFileList:[],dateOption:null,rules:{name:{required:!0,message:"请输入名称",trigger:"blur"}},method:"",imgCutOption:{boxWidth:1900,boxHeight:280,originalGraph:!1,cutWidth:1900,cutHeight:280},size:"",pid:0,source:"file"}},computed:Object(o["a"])({},Object(p["c"])({user:function(e){return e.user.user}})),watch:{"form.fullFlag":{handler:function(e){0==e&&(this.form.notifyRecordIds=[])}}},created:function(){},mounted:function(){},methods:{httpRequest:function(e){setTimeout((function(){e.onProgress({percent:25})}),1e3),setTimeout((function(){e.onProgress({percent:65})}),2e3),setTimeout((function(){e.onProgress({percent:100})}),3e3),setTimeout((function(){e.onSuccess()}),4e3)},handleImgRemove:function(e,t){var a=t.findIndex((function(t){return t.uid===e.uid}));a>=0&&t.splice(a,1)},beforeupload:function(e){var t=this,a="image/jpeg"===e.type||"image/png"==e.type,n=e.size/1024/1024<20;if(a){if(n)return m["d"].uploadFile({file:e,pid:0,source:"file"}).then((function(e){t.form.image="/file/"+e.data.data.path}));this.$message.error("上传头像图片大小不能超过 20MB")}else this.$message.error("上传图片只能是JPG或PNG格式")},init:function(e,t){var a=this;this.method=e,this.visible=!0,this.imgFileList=[],this.dateOption=null,this.form=new u["a"],this.$nextTick(Object(r["a"])(regeneratorRuntime.mark((function n(){var i,r,o,s,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("add"===e){n.next=7;break}return n.next=3,c["a"].getBannerDetail({bannerId:t.id});case 3:o=n.sent,a.form=o.data.data,a.imgFileList=null!==o&&void 0!==o&&null!==(i=o.data)&&void 0!==i&&i.data.image?[{url:null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.data.image}]:[],0===a.form.defaultShow&&(a.dateOption=[null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.data.startTime,null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.data.endTime]);case 7:case"end":return n.stop()}}),n)}))))},close:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.method="",e.visible=!1;case 2:case"end":return t.stop()}}),t)})))()},validForm:function(e){var t=this;if(1===this.form.defaultShow)this.form.startTime="2001-01-01 00:00:00",this.form.endTime="2001-01-01 00:00:00";else{if(!this.dateOption)return void this.$message.error("请选择有效日期");this.form.startTime=this.dateOption[0],this.form.endTime=this.dateOption[1].replace("00:00:00","23:59:59")}this.$refs.form.validate(function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(n){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n){a.next=13;break}return t.form.status=e,a.next=4,c["a"].saveBanner(t.form);case 4:if(i=a.sent,r=i.data,0==r.code){a.next=8;break}return a.abrupt("return",t.$message.error(r.msg));case 8:t.$message.success(r.msg),t.$parent.$refs.table.init(),t.close(),a.next=14;break;case 13:return a.abrupt("return",!1);case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},formValidated:function(e,t,a){console.log(e,t,a)}}},g=f,b=(a("6106"),a("27a9"),a("2877")),h=Object(b["a"])(g,n,i,!1,null,"53c07948",null);t["default"]=h.exports},b476:function(e,t,a){},d4ec:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return n}))},e718:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload",style:{"--drag-width":e.dragOption.width||"360px","--drag-height":e.dragOption.height||"220px"}},["picture-card"===e.$attrs["list-type"]?a("el-upload",e._b({ref:"upload",attrs:{"on-change":e.uploadImgsChange,"on-success":e.uploadSuccess,headers:{token:e.$store.state.user.user.token}},scopedSlots:e._u([{key:"file",fn:function(t){var n=t.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(n)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e.imgEditEnable&&e.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleEditImg(n)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(n)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])])}}],null,!1,863019275)},"el-upload",e.$attrs,!1),[a("i",{staticClass:"el-icon-plus"})]):a("el-upload",e._b({ref:"upload",attrs:{headers:{token:e.$store.state.user.user.token}},on:{"on-success":e.uploadImgsSuccess}},"el-upload",e.$attrs,!1),[e.$attrs.drag?a("div",{staticClass:"drag-tooltip"},[a("i",{staticClass:"el-icon-upload drag-tooltip-icon"}),a("div",{staticClass:"drag-tooltip-text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),e.tooltip?a("div",{staticClass:"tooltip-text"},[e._v("支持扩展名："+e._s(e.tooltip))]):e._e()]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),!e.$attrs.drag&&e.tooltip?a("div",{staticClass:"tooltip-text",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tooltip))]):e._e()],1),a("el-dialog",{attrs:{title:"图片预览",visible:e.dialogVisible,top:"3vh","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("el-dialog",{attrs:{title:"图片剪裁",visible:e.ImgCutterData.visible,"append-to-body":!0},on:{"update:visible":function(t){return e.$set(e.ImgCutterData,"visible",t)}}},[e.ImgCutterData.visible?a("img-cutter",e._b({ref:"ImgCutter",attrs:{showChooseBtn:!1,isModal:!1},on:{loaded:e.imgCutterLoaded,cutDown:e.imgCutDown,onClearAll:function(t){e.ImgCutterData.visible=!1}}},"img-cutter",e.imgCutOption,!1)):e._e()],1)],1)},i=[],r=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),function(){return a.e("ImgCutter").then(a.bind(null,"447d"))}),o={name:"kr-upload",components:{ImgCutter:r},props:{tooltip:String,isView:{type:Boolean,default:!0},uploadType:{type:String,default:"file"},dragOption:{type:Object,default:function(){return{width:"360px",height:"220px"}}},imgCutOption:{type:Object,default:function(){return{boxHeight:400,boxWidth:800,originalGraph:!1,rate:null}}},imgEditEnable:{type:Boolean,default:!1}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,ImgCutterData:{loadImgCutter:!1,visible:!1,file:null},uid:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{uploadSuccess:function(e,t,a){this.loading=!1},uploadImgsChange:function(e,t){!0!==this.$attrs.multiple&&(this.$refs.upload._data.uploadFiles=[e]),this.uid=e.uid},handleRemove:function(e){this.$attrs["on-remove"](e,this.$refs.upload._data.uploadFiles),this.$emit("remove")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleEditImg:function(e){e.name||(e.name="无名称.png"),this.ImgCutterData.file=e,this.ImgCutterData.visible=!0},imgCutterLoaded:function(){console.log(),this.$refs.ImgCutter.handleOpen(this.ImgCutterData.file)},imgCutDown:function(e){this.ImgCutterData.file.raw=e.file,this.ImgCutterData.file.raw.uid=this.ImgCutterData.file.uid,this.ImgCutterData.file.url=e.dataURL,this.ImgCutterData.file.size=e.file.size,this.ImgCutterData.file.status="ready",this.ImgCutterData.visible=!1,!1!==this.$attrs["auto-upload"]&&this.$refs.upload.submit(),this.$emit("cutDown",this.ImgCutterData.file)}}},s=o,l=(a("66f6"),a("2877")),u=Object(l["a"])(s,n,i,!1,null,"7d0f29f4",null);t["a"]=u.exports}}]);