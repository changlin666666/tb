(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54513812","chunk-19ba145a"],{"038f":function(e,t,n){"use strict";var r=n("5530"),a=n("7bc1");t["a"]={save:function(e){return a["a"].post("/cms/backend/article/save",Object(r["a"])({contributeFlag:1},e))},list:function(e){return a["a"].post("/cms/backend/article/page",e)},del:function(e){return a["a"].get("/cms/backend/article/delete",e)},detail:function(e){return a["a"].get("/cms/backend/article/getById",e)},copyToOtherMenu:function(e){return a["a"].get("/cms/backend/article/copyToOtherMenu",e)},publish:function(e){return a["a"].post("/cms/backend/article/updateArticleStatus",e)},getOaDeptTree:function(e){return a["a"].get("/sys/oadept/getOaDeptTree",e)},getMenuList:function(e){return a["a"].get("/cms/backend/menu/getMenuList",e)},getMenuTreeForAudit:function(e){return a["a"].get("/cms/backend/menu/getMenuTreeForAudit",e)},getCommentPage:function(e){return a["a"].post("/cms/backend/comment/page",e)},deleteComment:function(e){return a["a"].get("/cms/backend/comment/delete",e)},getArticleTileListByMenuNodeIdsAndKeyword:function(e){return a["a"].get("/cms/backend/article/getArticleTileListByMenuNodeIdsAndKeyword",e)},getTheoryEducationMenuTree:function(e){return a["a"].get("/cms/backend/menu/getTheoryEducationMenuTree",e)},getUsableTheoryEducationMenuTree:function(e){return a["a"].get("/cms/backend/menu/getUsableTheoryEducationMenuTree",e)},queryMenuById:function(e){return a["a"].get("/cms/backend/menu/getById",e)},saveMenu:function(e){return a["a"].post("/cms/backend/menu/save",e)},delMenu:function(e){return a["a"].get("/cms/backend/menu/delete",e)},getSpecialSubjectMenuTree:function(e){return a["a"].get("/cms/backend/menu/getSpecialSubjectMenuTree",e)},getRightSubjectMenuTree:function(e){return a["a"].get("/cms/backend/menu/getPopUpMenuTree",e)},getSpecialSubjectMenuTreeUsable:function(e){return a["a"].get("/cms/backend/menu/getUsablePopUpMenuTree",e)},getUsableSpecialSubjectMenuTree:function(e){return a["a"].get("/cms/backend/menu/getUsableSpecialSubjectMenuTree",e)},getForumArticleList:function(e){return a["a"].post("/forum/backend/article/page",e)},deleteForumArticleById:function(e){return a["a"].get("/forum/backend/article/delete",e)},saveForumArticle:function(e){return a["a"].post("/forum/backend/article/save",e)},queryForumArticleById:function(e){return a["a"].get("/forum/backend/article/getById",e)},getForumModulePage:function(e){return a["a"].post("/forum/backend/module/page",e)},updateEssenceById:function(e){return a["a"].get("/forum/backend/article/updateEssenceById",e)},updateToppingById:function(e){return a["a"].get("/forum/backend/article/updateToppingById",e)},getForumCommentList:function(e){return a["a"].post("/forum/backend/comment/page",e)},deleteForumCommentById:function(e){return a["a"].get("/forum/backend/comment/delete",e)},getArticleTileListByKeyword:function(e){return a["a"].get("/forum/backend/article/getArticleTileListByKeyword",e)},getCmsHistoryPage:function(e){return a["a"].post("/cms/backend/history/page",e)},getCmsScorePage:function(e){return a["a"].post("/cms/backend/score/page",e)},getOptoutscorePage:function(e){return a["a"].post("/cms/backend/optoutscore/page",e)},SaveOptoutscore:function(e){return a["a"].post("/cms/backend/optoutscore/save",e)},getAllOaDeptTree:function(e){return a["a"].get("/sys/oadept/getAllOaDeptTree",e)},getBannerList:function(e){return a["a"].post("/cms/backend/banner/page",e)},getBannerDetail:function(e){return a["a"].get("/cms/backend/banner/getById",e)},saveBanner:function(e){return a["a"].post("/cms/backend/banner/save",e)},deleteBannerByid:function(e){return a["a"].get("/cms/backend/banner/delete",e)},getViewBannerByTime:function(e){return a["a"].get("/cms/backend/banner/getByTime",e)}}},"086e":function(e,t,n){"use strict";n("620f")},"3e2a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.visible,title:e.title,width:e.width},on:{"update:visible":function(t){e.visible=t},close:function(t){e.visible=!1}}},[n("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,size:"medium",rules:e.rules,disabled:"view"===e.method},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[n("el-row",[1!=e.form.id?n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"上级模块"}},[e.visible?n("kr-tree-select",{staticStyle:{width:"100%"},attrs:{props:e.treeProps,disabled:"",nodeKey:"nodeIds",data:e.treeData2},on:{getValue:e.getValue},model:{value:e.nodeIds,callback:function(t){e.nodeIds=t},expression:"nodeIds"}}):e._e()],1)],1):e._e(),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:(e.typeList[e.form.menuType]?e.typeList[e.form.menuType].value:"")+"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"是否启用",prop:"usable"}},[n("el-radio-group",{model:{value:e.form.usable,callback:function(t){e.$set(e.form,"usable",t)},expression:"form.usable"}},[n("el-radio-button",{attrs:{label:"1"}},[e._v("是")]),n("el-radio-button",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,label:"排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),n("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},a=[],i=n("1da1"),o=(n("96cf"),n("038f")),s=n("d4ec"),c=n("ade3"),u=function e(){Object(s["a"])(this,e),Object(c["a"])(this,"aliasName",""),Object(c["a"])(this,"allowComment",1),Object(c["a"])(this,"allowScore",1),Object(c["a"])(this,"allowSearch",0),Object(c["a"])(this,"contentType",""),Object(c["a"])(this,"href",""),Object(c["a"])(this,"id",null),Object(c["a"])(this,"menuType","文章"),Object(c["a"])(this,"name",""),Object(c["a"])(this,"navigation",0),Object(c["a"])(this,"nodeId",""),Object(c["a"])(this,"nodeIds",""),Object(c["a"])(this,"parentNodeIds",""),Object(c["a"])(this,"remarks",""),Object(c["a"])(this,"sort",0),Object(c["a"])(this,"target",""),Object(c["a"])(this,"usable",1)},l={props:{width:{type:String,default:"50%"},treeData:{type:Array,default:function(){return[]}},treeProps:{type:Object,default:function(){return{children:"children",label:"name",disabled:"disabled"}}}},watch:{},data:function(){return{treeData2:[],visible:!1,nodeIds:"",parentId:"",method:"",form:new u,typeList:[],rules:{menuType:[{required:!0,message:"模块类型不能为空",trigger:"blur"}],name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},id:"",title:""}},methods:{init:function(e,t,n){var r=this;this.treeData2=[{nodeIds:"000/003",name:"理论教育",children:this.treeData}],this.method=e,"add"===e?(this.nodeIds="",this.form=new u,this.title="新建模块"):"view"===e?this.title="查看模块":"addChild"===e?(this.title="添加下级模块",this.form=new u,this.nodeIds=n.nodeIds,this.form.parentNodeIds=n.nodeIds):this.title="编辑模块",this.id=t,this.$nextTick(Object(i["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.visible=!0,"edit"!==e&&"view"!==e){n.next=11;break}return n.next=4,o["a"].queryMenuById({menuId:t});case 4:if(a=n.sent,i=a.data,0==i.code){n.next=9;break}return r.$message.error("获取数据失败"),n.abrupt("return");case 9:r.form=i.data,r.nodeIds=i.data.parentNodeIds;case 11:case"end":return n.stop()}}),n)}))))},choseIcon:function(e){this.form.icon=e},getValue:function(e){this.form.parentNodeIds=e.nodeIds},submit:function(){var e=this;try{this.$refs.form.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=13;break}return r=e.form,t.next=4,o["a"].saveMenu(r);case 4:if(a=t.sent,i=a.data,0==i.code){t.next=8;break}return t.abrupt("return",e.$message.error(i.msg));case 8:e.$message.success(i.msg),e.$emit("update"),e.visible=!1,t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error(t)}}}},d=l,m=n("2877"),f=Object(m["a"])(d,r,a,!1,null,null,null);t["default"]=f.exports},"620f":function(e,t,n){},"7a00":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"container"},[n("el-col",{staticClass:"content",attrs:{span:24}},[n("kr-table",{ref:"table",attrs:{columns:e.columns,fetchFunc:e.getTree,selection:!1,showPagination:!1,getTree:""},on:{getData:e.getData,"selection-change":e.handleSelectionChange}})],1),n("listForm",{ref:"listForm",attrs:{treeData:e.tableData},on:{update:function(t){return e.$refs.table.init()}}})],1)},a=[],i=n("1da1"),o=n("5530"),s=(n("96cf"),n("3e2a")),c=n("038f"),u=n("2f62"),l={components:{listForm:s["default"]},computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({size:function(e){return e.config.defaultSize}})),{},{getTree:function(){return c["a"].getTheoryEducationMenuTree}}),data:function(e){this.$createElement;return{columns:[{prop:"name",label:"名称"},{prop:"usable",sortable:!0,label:"是否启用",render:function(t,n){return t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",value:1==n.usable,disabled:"000/003/001"===n.nodeIds||"000/003/002"===n.nodeIds||"000/003/003"===n.nodeIds||"000/003/004"===n.nodeIds,size:e.size},on:{change:function(){return e.changeUse(n)}}})}},{prop:"sort",label:"排序",sortable:!0,align:"center"},{fixed:"right",align:"right",width:300,render:function(t,n,r){return t("div",["000/003/001"!==n.nodeIds&&"000/003/002"!==n.nodeIds&&"000/003/003"!==n.nodeIds&&"000/003/004"!==n.nodeIds?t("el-button",{attrs:{icon:" kr-tianxie krIconfont",size:e.size,type:"text"},on:{click:function(){return e.edit(n,r)}}},["编辑"]):"",t("el-button",{attrs:{icon:" krIconfont kr-icon_yulan",size:e.size,type:"text"},on:{click:function(){return e.view(n,r)}}},["查看"]),"000/003/001"!==n.nodeIds&&"000/003/002"!==n.nodeIds&&"000/003/003"!==n.nodeIds&&"000/003/004"!==n.nodeIds?"":t("el-button",{attrs:{icon:"krIconfont kr-add-circle",size:e.size,type:"text"},on:{click:function(){return e.addChild(n,r)}}},["添加下级"]),"000/003/001"!==n.nodeIds&&"000/003/002"!==n.nodeIds&&"000/003/003"!==n.nodeIds&&"000/003/004"!==n.nodeIds?t("el-button",{attrs:{icon:" kr-shanchu krIconfont",size:e.size,type:"text"},on:{click:function(){return e.del(n,r)}},style:"color:red"},["删除"]):""])}}],tableData:[],selection:[]}},methods:{getData:function(e){this.tableData=e},changeSort:function(e){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},changeUse:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.usable=0==e.usable?"1":"0",delete e.children,n.next=4,c["a"].saveMenu(e);case 4:if(r=n.sent,a=r.data,0==a.code){n.next=8;break}return n.abrupt("return",t.$message.error(a.msg));case 8:t.$refs.table.init(),t.$message.success(a.msg);case 10:case"end":return n.stop()}}),n)})))()},addChild:function(e){this.$refs.listForm.init("addChild",e.id,e)},allocate:function(e){this.$refs.AuthForm.init(e.id)},handleSelectionChange:function(e){this.selection=e},add:function(){this.$refs.listForm.init("add")},view:function(e){this.$refs.listForm.init("view",e.id,e)},edit:function(e){this.$refs.listForm.init("edit",e.id,e)},del:function(e){var t,n=this,r="";r=(null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length)>0?"该菜单存在子菜单，是否确认删除？":"确定要删除选择项？",this.$confirm(r,"提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"error"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].delMenu({menuId:e.id});case 2:if(r=t.sent,a=r.data,0==a.code){t.next=6;break}return t.abrupt("return",n.$message.error(a.msg));case 6:n.$message.success(a.msg),n.$refs.table.init();case 8:case"end":return t.stop()}}),t)})))).catch((function(e){e.type}))}}},d=l,m=(n("086e"),n("2877")),f=Object(m["a"])(d,r,a,!1,null,"29e56ba0",null);t["default"]=f.exports},d4ec:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))}}]);