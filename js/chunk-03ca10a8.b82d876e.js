(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03ca10a8"],{"0c3f":function(t,e,a){"use strict";var i=a("7bc1");e["a"]={list:function(t){return i["a"].post("/exam/backend/question-classify/page",t)},save:function(t){return i["a"].post("/exam/backend/question-classify/save",t)},del:function(t){return i["a"].get("/exam/backend/question-classify/delete",t)},detail:function(t){return i["a"].get("/exam/backend/question-classify/getById",t)},getQuestionlist:function(t){return i["a"].post("/exam/backend/question/page",t)},getQuestionByIdList:function(t){return i["a"].post("/exam/backend/question/getByIdList",t)},saveQuestion:function(t){return i["a"].post("/exam/backend/question/save",t)},getQuestionDetailById:function(t){return i["a"].get("/exam/backend/question/getById",t)},deleteQuestionById:function(t){return i["a"].get("/exam/backend/question/delete",t)},downloadTemplate:function(t){return i["a"].getBlob("/exam/backend/question/downloadTemplate",t,!0)},getPaperlist:function(t){return i["a"].post("/exam/backend/paper/page",t)},savePaper:function(t){return i["a"].post("/exam/backend/paper/save",t)},getPaperDetailById:function(t){return i["a"].get("/exam/backend/paper/getById",t)},deletePaperById:function(t){return i["a"].get("/exam/backend/paper/delete",t)},openPaperById:function(t){return i["a"].get("/exam/backend/paper/open",t)},closePaperById:function(t){return i["a"].get("/exam/backend/paper/close",t)},getPaperListByNameKeyword:function(t){return i["a"].get("/exam/backend/paper/getPaperListByNameKeyword",t)},paperInspectionPage:function(t){return i["a"].post("/exam/backend/paper/paperInspectionPage",t)},getPaperedList:function(t){return i["a"].post("/exam/backend/user-paper-record/testPaperPage",t)},getUserPaperRecordById:function(t){return i["a"].get("/exam/backend/user-paper-record/getById",t)},marking:function(t){return i["a"].post("/exam/backend/user-paper-record/update",t)},getTestPaperStatistics:function(t){return i["a"].get("/exam/backend/paper/getTestPaperStatistics",t)},getTestPaperStatisticsUserPage:function(t){return i["a"].post("/exam/backend/paper/getTestPaperStatisticsUserPage",t)},getTestPaperStatisticsDeptPage:function(t){return i["a"].get("/exam/backend/paper/getTestPaperStatisticsDeptPage",t)},questionnaireStatistics:function(t){return i["a"].get("/exam/backend/paper/questionnaireStatistics",t)},questionnaireStatisticsForShortAnswerAndFillInTheBlanks:function(t){return i["a"].post("/exam/backend/paper/questionnaireStatisticsForShortAnswerAndFillInTheBlanks",t)},getPaperStatistics:function(t){return i["a"].get("/exam/backend/paper/getById",t)}}},"3e8f":function(t,e){},5169:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,title:"导入数据",width:"50%"},on:{"update:visible":function(e){t.visible=e},close:t.close}},[a("div",{staticClass:"form-page"},[a("el-form",{ref:"form",attrs:{model:t.importData,rules:t.rules,"label-width":"7em",disabled:"view"==t.method},on:{validate:t.formValidated}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"所属分类：",prop:"classifyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属分类",size:t.size},model:{value:t.importData.classifyId,callback:function(e){t.$set(t.importData,"classifyId",e)},expression:"importData.classifyId"}},t._l(t.allClassifyTypeList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"导入数据：",prop:"classifyId"}},[a("el-upload",{staticStyle:{display:"inline-block",margin:"0 10px"},attrs:{action:t.$BASE_URL+"/exam/backend/question/upload","on-success":t.uploadSuccess,headers:t.headers,data:t.importData,"show-file-list":!1}},[t.importData.classifyId?a("el-button",{attrs:{icon:"el-icon-upload",type:"success"}},[t._v("导入数据")]):a("span",[t._v("请选择所属分类")])],1)],1)],1)],1)],1)])},s=[],n=a("1da1"),r=a("5530"),o=(a("96cf"),a("a434"),a("159b"),a("4e82"),a("f477")),l=a("9f0d"),u=a("e63d"),c=a("0c3f"),d=a("85b6"),p=a("2f62"),f=(a("3e8f"),{components:{userSelect:l["a"],krUpload:d["a"]},props:{allClassifyTypeList:{type:Array,default:function(){return[]}}},data:function(){return{dictUtils:o["a"],visible:!1,data:null,subjective:!1,showIsTianKong:!0,headers:{},importData:{paperType:1,classifyId:""},difficultyLevelOptions:[{value:0,label:"简单"},{value:1,label:"一般"},{value:2,label:"较难"},{value:3,label:"很难"}],form:new u["a"],rules:{type:{required:!0,message:"请选择试题类型",trigger:"blur"},classifyId:{required:!0,message:"请选择所属分类",trigger:"blur"},content:{required:!0,message:"请输入题目内容",trigger:"blur"}},method:"",size:""}},computed:Object(r["a"])({},Object(p["c"])({user:function(t){return t.user.user}})),watch:{"form.fullFlag":{handler:function(t){0==t&&(this.form.notifyRecordIds=[])}}},created:function(){},mounted:function(){this.headers.token=this.user.token},methods:{uploadSuccess:function(t){0==t.code?(this.$message.success("导入成功"),this.close(),this.$parent.$refs.table.init()):this.$message.error("导入失败"+t.msg)},init:function(){this.visible=!0,this.importData={paperType:1,classifyId:null}},handleAdd:function(){this.form.answers.push({analysis:"",content:"",correct:0,questionId:null,sort:1})},removeItem:function(t){this.form.answers.splice(t,1)},close:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.method="",t.visible=!1;case 2:case"end":return e.stop()}}),e)})))()},typeChange:function(t){switch(t){case 0:case 1:case 2:this.subjective=!0,this.showIsTianKong=!0;break;case 3:this.subjective=!1,this.showIsTianKong=!0;break;case 4:this.subjective=!0,this.showIsTianKong=!1;break}},validForm:function(){var t=this;if(0===this.form.type||1===this.form.type||2===this.form.type||4===this.form.type){var e=0;if(this.form.answers.forEach((function(t){t.content||(e+=1)})),e>0)return void this.$message({message:"不允许有空的选项内容",type:"warning"})}var a=0;if(this.form.answers.forEach((function(t){t.correct&&t.content&&(a+=1)})),0===this.form.type){if(a<1)return void this.$message({message:"单选题必须有一个答案",type:"warning"});if(a>1)return void this.$message({message:"单选题答案只能有一个",type:"warning"})}if(1===this.form.type&&a<2)this.$message({message:"多选题至少要有两个正确答案！",type:"warning"});else if(2!==this.form.type||1===a){if(3===this.form.type&&(this.form.answers=[]),4===this.form.type){this.form.answers.forEach((function(t){t.analysis="",t.correct=1}));var i=0;if(this.form.answers.forEach((function(t){t.content&&(i+=1)})),i<1)return void this.$message({message:"填空题至少有一个答案",type:"warning"});var s=0;if(this.form.answers.forEach((function(t){t.content.indexOf("\n")>0&&(s+=1)})),s>0)return void this.$message({message:"填空题答案不允许有换行符",type:"warning"})}console.log(this.form),this.form.answers.forEach((function(t,e){t.sort=e+1})),this.$refs.form.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return e.next=3,c["a"].saveQuestion(t.form);case 3:if(i=e.sent,s=i.data,0==s.code){e.next=7;break}return e.abrupt("return",t.$message.error(s.msg));case 7:t.$message.success(s.msg),t.$parent.$refs.table.init(),t.close(),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else this.$message({message:"判断题只能有一个正确项！",type:"warning"})},formValidated:function(t,e,a){console.log(t,e,a)},getDictList:function(t){return o["a"].getDictList(t)}}}),m=f,g=(a("b80d"),a("60a7"),a("2877")),h=Object(g["a"])(m,i,s,!1,null,"3c8eb322",null);e["default"]=h.exports},"60a7":function(t,e,a){"use strict";a("dfc3")},6395:function(t,e,a){"use strict";a("c502")},"6ac7":function(t,e,a){},"85b6":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload",style:{"--drag-width":t.dragOption.width||"360px","--drag-height":t.dragOption.height||"220px"}},["picture-card"===t.$attrs["list-type"]?a("el-upload",t._b({ref:"upload",attrs:{"on-change":t.uploadImgsChange,"on-success":t.uploadSuccess,headers:{token:t.$store.state.user.user.token}},scopedSlots:t._u([{key:"file",fn:function(e){var i=e.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:i.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(i)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),t.imgEditEnable&&t.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleEditImg(i)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):t._e(),t.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove(i)}}},[a("i",{staticClass:"el-icon-delete"})]):t._e()])])}}],null,!1,863019275)},"el-upload",t.$attrs,!1),[a("i",{staticClass:"el-icon-plus"})]):a("el-upload",t._b({ref:"upload",attrs:{headers:{token:t.$store.state.user.user.token}},on:{"on-success":t.uploadImgsSuccess}},"el-upload",t.$attrs,!1),[t.$attrs.drag?a("div",{staticClass:"drag-tooltip"},[a("i",{staticClass:"el-icon-upload drag-tooltip-icon"}),a("div",{staticClass:"drag-tooltip-text"},[t._v(" 将文件拖到此处，或 "),a("em",[t._v("点击上传")])]),t.tooltip?a("div",{staticClass:"tooltip-text"},[t._v("支持扩展名："+t._s(t.tooltip))]):t._e()]):t._e(),a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),!t.$attrs.drag&&t.tooltip?a("div",{staticClass:"tooltip-text",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.tooltip))]):t._e()],1),a("el-dialog",{attrs:{title:"图片预览",visible:t.dialogVisible,top:"3vh","append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),a("el-dialog",{attrs:{title:"图片剪裁",visible:t.ImgCutterData.visible,"append-to-body":!0},on:{"update:visible":function(e){return t.$set(t.ImgCutterData,"visible",e)}}},[t.ImgCutterData.visible?a("img-cutter",t._b({ref:"ImgCutter",attrs:{showChooseBtn:!1,isModal:!1},on:{loaded:t.imgCutterLoaded,cutDown:t.imgCutDown,onClearAll:function(e){t.ImgCutterData.visible=!1},changeAllreadyCut:t.changeAllreadyCut}},"img-cutter",t.imgCutOption,!1)):t._e()],1)],1)},s=[],n=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),function(){return a.e("ImgCutter").then(a.bind(null,"447d"))}),r={name:"kr-upload",components:{ImgCutter:n},props:{tooltip:String,isView:{type:Boolean,default:!0},uploadType:{type:String,default:"file"},dragOption:{type:Object,default:function(){return{width:"360px",height:"220px"}}},imgCutOption:{type:Object,default:function(){return{boxHeight:400,boxWidth:800,originalGraph:!1,rate:null}}},imgEditEnable:{type:Boolean,default:!1}},data:function(){return{isAlreadyCut:!1,dialogImageUrl:"",dialogVisible:!1,ImgCutterData:{loadImgCutter:!1,visible:!1,file:null},uid:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeAllreadyCut:function(t){this.isAlreadyCut=t},uploadSuccess:function(t,e,a){this.loading=!1},uploadImgsChange:function(t,e){!0!==this.$attrs.multiple&&(this.$refs.upload._data.uploadFiles=[t]),this.isAlreadyCut||this.uid===t.uid||(this.ImgCutterData.visible=!0,this.ImgCutterData.file=t),this.uid=t.uid},handleRemove:function(t){this.$attrs["on-remove"](t,this.$refs.upload._data.uploadFiles),this.$emit("remove")},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleEditImg:function(t){t.name||(t.name="无名称.png"),this.ImgCutterData.file=t,this.ImgCutterData.visible=!0},imgCutterLoaded:function(){console.log(),this.$refs.ImgCutter.handleOpen(this.ImgCutterData.file)},imgCutDown:function(t){this.ImgCutterData.file.raw=t.file,this.ImgCutterData.file.raw.uid=this.ImgCutterData.file.uid,this.ImgCutterData.file.url=t.dataURL,this.ImgCutterData.file.size=t.file.size,this.ImgCutterData.file.status="ready",this.ImgCutterData.visible=!1,!1!==this.$attrs["auto-upload"]&&this.$refs.upload.submit(),this.$emit("cutDown",this.ImgCutterData.file)}}},o=r,l=(a("6395"),a("2877")),u=Object(l["a"])(o,i,s,!1,null,"b560955c",null);e["a"]=u.exports},b80d:function(t,e,a){"use strict";a("6ac7")},c502:function(t,e,a){},d4ec:function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}a.d(e,"a",(function(){return i}))},dfc3:function(t,e,a){},e63d:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("d4ec"),s=a("ade3"),n=function t(){Object(i["a"])(this,t),Object(s["a"])(this,"authorities",[]),Object(s["a"])(this,"authorityType",0),Object(s["a"])(this,"delFlag",0),Object(s["a"])(this,"expirationTime",""),Object(s["a"])(this,"id",null),Object(s["a"])(this,"limitCount",1),Object(s["a"])(this,"name",""),Object(s["a"])(this,"notice",""),Object(s["a"])(this,"paperType",0),Object(s["a"])(this,"questions",[]),Object(s["a"])(this,"remarks",""),Object(s["a"])(this,"resultDisplay",1),Object(s["a"])(this,"scoreComplete",0),Object(s["a"])(this,"status",0)}}}]);