(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f9fd001"],{"0773":function(e,t,r){},2668:function(e,t,r){},"9fac":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,title:"通知管理",width:"80%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},["view"!=e.method?r("div",{staticClass:"form-page"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"7em",disabled:"view"==e.method},on:{validate:e.formValidated}},[r("el-form-item",{attrs:{label:"通知标题：",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入通知标题",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("div",{staticClass:"inline"},[r("el-form-item",{attrs:{label:"通知类型：",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择通知类型",clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.getDictList("news_type").filter((function(e){return 2!=e.code})),(function(e){return r("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})})),1)],1),r("el-form-item",{attrs:{label:"通知范围：",prop:"notifyRecordIds"}},[r("el-radio-group",{model:{value:e.form.fullFlag,callback:function(t){e.$set(e.form,"fullFlag",t)},expression:"form.fullFlag"}},[r("el-radio-button",{attrs:{label:1}},[e._v("全员")]),r("el-radio-button",{attrs:{label:0}},[e._v("指定人员")])],1),0==e.form.fullFlag?r("userSelect",{model:{value:e.form.notifyRecordIds,callback:function(t){e.$set(e.form,"notifyRecordIds",t)},expression:"form.notifyRecordIds"}}):e._e()],1)],1),r("el-form-item",{attrs:{label:"通知内容：",prop:"content"}},[e.visible?r("Editor",{ref:"editor",attrs:{readonly:"view"==e.method,height:500},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}):e._e()],1),r("el-form-item",{staticStyle:{"text-align":"center"}})],1)],1):r("div",{staticClass:"el-dialog-div"},[r("p",{staticClass:"noti-title"},[e._v(e._s(e.form.title))]),r("div",{staticClass:"desc"},[r("span",[e._v("发布时间："+e._s(e.form.createTime))]),r("span",[e._v("发布人："+e._s(e.form.createUserName))]),r("span",[e._v("公告类型："+e._s(e.dictUtils.getDictLabel("news_type",e.form.type)))])]),r("p",{domProps:{innerHTML:e._s(e.form.content)}})]),"view"==e.method?r("el-form",{attrs:{model:e.form,rules:e.rules,"label-width":"7em"},on:{validate:e.formValidated}},["view"==e.method&&e.form.notifyRecordList.length>0?r("el-form-item",{attrs:{label:"阅读列表"}},[r("el-table",{attrs:{data:e.form.notifyRecordList}},[r("el-table-column",{attrs:{label:"接收人",prop:"userName"}}),r("el-table-column",{attrs:{label:"阅读状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:t.row.readFlag?"success":"primary"}},[e._v(e._s(t.row.readFlag?"已读":"未读"))])]}}],null,!1,965423750)}),r("el-table-column",{attrs:{label:"阅读时间",prop:"readDate"}})],1)],1):e._e()],1):e._e(),"view"!=e.method?r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"warning"},on:{click:function(t){return e.validForm(0)}}},[e._v(e._s("add"==e.method?"新增草稿":"保存草稿"))]),r("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:function(t){return e.validForm(1)}}},[e._v("立即发布")])],1):e._e()],1)},o=[],n=r("1da1"),i=(r("96cf"),r("f477")),s=r("9f0d"),l=r("d4ec"),c=r("ade3"),f=function e(){Object(l["a"])(this,e),Object(c["a"])(this,"content",""),Object(c["a"])(this,"files",""),Object(c["a"])(this,"id",""),Object(c["a"])(this,"notifyRecordIds",[]),Object(c["a"])(this,"notifyRecordList",[]),Object(c["a"])(this,"fullFlag",1),Object(c["a"])(this,"status",""),Object(c["a"])(this,"title",""),Object(c["a"])(this,"type","")},u=r("96e6"),d={components:{userSelect:s["a"]},props:{},data:function(){return{dictUtils:i["a"],visible:!1,data:null,form:new f,userIds:[],rules:{title:{required:!0,message:"请输入通知标题",trigger:"blur"},type:{required:!0,message:"请选择通知类型",trigger:"blur"},content:{required:!0,message:"请输入通知内容",trigger:"blur"}},method:""}},computed:{},watch:{"form.fullFlag":{handler:function(e){0==e&&(this.form.notifyRecordIds=[])}}},created:function(){},mounted:function(){},methods:{init:function(e,t){var r=this;this.method=e,this.visible=!0,this.userIds=[],this.from=new f,this.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("add"==e){a.next=6;break}return a.next=3,u["a"].detail({id:t.id});case 3:o=a.sent,r.form=o.data.data,r.form.type=String(r.form.type);case 6:case"end":return a.stop()}}),a)}))))},close:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.visible=!1;case 1:case"end":return t.stop()}}),t)})))()},validForm:function(e){var t=this;this.$refs.form.validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(a){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=13;break}return t.form.status=e,r.next=4,u["a"].save(t.form);case 4:if(o=r.sent,n=o.data,0==n.code){r.next=8;break}return r.abrupt("return",t.$message.error(n.msg));case 8:t.$message.success(n.msg),t.$parent.$refs.table.init(),t.close(),r.next=14;break;case 13:return r.abrupt("return",!1);case 14:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},formValidated:function(e,t,r){console.log(e,t,r)},getDictList:function(e){return i["a"].getDictList(e)}}},m=d,p=(r("c0a5"),r("ff63"),r("2877")),b=Object(p["a"])(m,a,o,!1,null,"05f650d0",null);t["default"]=b.exports},c0a5:function(e,t,r){"use strict";r("2668")},d4ec:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return a}))},ff63:function(e,t,r){"use strict";r("0773")}}]);