(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bf1792a"],{"038f":function(e,t,a){"use strict";var i=a("5530"),n=a("7bc1");t["a"]={save:function(e){return n["a"].post("/cms/backend/article/save",Object(i["a"])({contributeFlag:1},e))},list:function(e){return n["a"].post("/cms/backend/article/page",e)},del:function(e){return n["a"].get("/cms/backend/article/delete",e)},detail:function(e){return n["a"].get("/cms/backend/article/getById",e)},copyToOtherMenu:function(e){return n["a"].get("/cms/backend/article/copyToOtherMenu",e)},publish:function(e){return n["a"].post("/cms/backend/article/updateArticleStatus",e)},getOaDeptTree:function(e){return n["a"].get("/sys/oadept/getOaDeptTree",e)},getMenuList:function(e){return n["a"].get("/cms/backend/menu/getMenuList",e)},getMenuTreeForAudit:function(e){return n["a"].get("/cms/backend/menu/getMenuTreeForAudit",e)},getCommentPage:function(e){return n["a"].post("/cms/backend/comment/page",e)},deleteComment:function(e){return n["a"].get("/cms/backend/comment/delete",e)},getArticleTileListByMenuNodeIdsAndKeyword:function(e){return n["a"].get("/cms/backend/article/getArticleTileListByMenuNodeIdsAndKeyword",e)},getTheoryEducationMenuTree:function(e){return n["a"].get("/cms/backend/menu/getTheoryEducationMenuTree",e)},getUsableTheoryEducationMenuTree:function(e){return n["a"].get("/cms/backend/menu/getUsableTheoryEducationMenuTree",e)},queryMenuById:function(e){return n["a"].get("/cms/backend/menu/getById",e)},saveMenu:function(e){return n["a"].post("/cms/backend/menu/save",e)},delMenu:function(e){return n["a"].get("/cms/backend/menu/delete",e)},getSpecialSubjectMenuTree:function(e){return n["a"].get("/cms/backend/menu/getSpecialSubjectMenuTree",e)},getRightSubjectMenuTree:function(e){return n["a"].get("/cms/backend/menu/getPopUpMenuTree",e)},getSpecialSubjectMenuTreeUsable:function(e){return n["a"].get("/cms/backend/menu/getUsablePopUpMenuTree",e)},getUsableSpecialSubjectMenuTree:function(e){return n["a"].get("/cms/backend/menu/getUsableSpecialSubjectMenuTree",e)},getForumArticleList:function(e){return n["a"].post("/forum/backend/article/page",e)},deleteForumArticleById:function(e){return n["a"].get("/forum/backend/article/delete",e)},saveForumArticle:function(e){return n["a"].post("/forum/backend/article/save",e)},queryForumArticleById:function(e){return n["a"].get("/forum/backend/article/getById",e)},getForumModulePage:function(e){return n["a"].post("/forum/backend/module/page",e)},updateEssenceById:function(e){return n["a"].get("/forum/backend/article/updateEssenceById",e)},updateToppingById:function(e){return n["a"].get("/forum/backend/article/updateToppingById",e)},getForumCommentList:function(e){return n["a"].post("/forum/backend/comment/page",e)},deleteForumCommentById:function(e){return n["a"].get("/forum/backend/comment/delete",e)},getArticleTileListByKeyword:function(e){return n["a"].get("/forum/backend/article/getArticleTileListByKeyword",e)},getCmsHistoryPage:function(e){return n["a"].post("/cms/backend/history/page",e)},getCmsScorePage:function(e){return n["a"].post("/cms/backend/score/page",e)},getOptoutscorePage:function(e){return n["a"].post("/cms/backend/optoutscore/page",e)},SaveOptoutscore:function(e){return n["a"].post("/cms/backend/optoutscore/save",e)},getAllOaDeptTree:function(e){return n["a"].get("/sys/oadept/getAllOaDeptTree",e)},getBannerList:function(e){return n["a"].post("/cms/backend/banner/page",e)},getBannerDetail:function(e){return n["a"].get("/cms/backend/banner/getById",e)},saveBanner:function(e){return n["a"].post("/cms/backend/banner/save",e)},deleteBannerByid:function(e){return n["a"].get("/cms/backend/banner/delete",e)},getViewBannerByTime:function(e){return n["a"].get("/cms/backend/banner/getByTime",e)}}},"08d0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,title:e.title,width:e.width},on:{"update:visible":function(t){e.visible=t},close:e.close}},[a("el-form",{ref:"form",attrs:{"label-width":"150px",model:e.form,size:"medium",rules:e.rules,disabled:"view"===e.method},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"专题分类名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否启用",prop:"usable"}},[a("el-radio-group",{model:{value:e.form.usable,callback:function(t){e.$set(e.form,"usable",t)},expression:"form.usable"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("是")]),a("el-radio-button",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标题图:"}},[a("kr-upload",{ref:"isAlreadyCut",attrs:{"http-request":e.httpRequest,action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png, .jpg, .gif","list-type":"picture-card","on-remove":e.handleImgRemove,isView:"view"!==e.method,imgEditEnable:!0,"file-list":e.imgFileList,imgCutOption:e.imgCutOption,"before-upload":e.beforeupload}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"绑定理论教育模块",prop:"boundNodeIds"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 绑定理论教育模块 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认不填（该专题内容需要单独管理），选择《理论教育》模块之后该专题与所选模块绑定，该专题展示的内容从绑定的模块获取。",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),a("kr-tree-select",{staticStyle:{width:"100%"},attrs:{data:e.theoryEducationMenuOptions,props:e.defaultProps,"disable-branch-nodes":!0,nodeKey:"nodeIds"},on:{getValue:e.getTheoryEducationMenuValue},model:{value:e.form.boundNodeIds,callback:function(t){e.$set(e.form,"boundNodeIds",t)},expression:"form.boundNodeIds"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:1,label:"排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"popUp"}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 是否弹窗 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"前台网站左侧弹窗同时只能存在一个，如果选择是的话会取消其他专题则会被替换",placement:"top"}},[a("i",{staticClass:"el-icon-info",staticStyle:{cursor:"pointer"}})])],1),a("el-radio-group",{model:{value:e.form.popUp,callback:function(t){e.$set(e.form,"popUp",t)},expression:"form.popUp"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("是")]),a("el-radio-button",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"弹窗图:"}},[a("kr-upload",{ref:"isAlreadyCut",attrs:{"http-request":e.httpRequest,action:e.$BASE_URL+"/source/upload","auto-upload":!0,accept:".png, .jpg, .gif","list-type":"picture-card","on-remove":e.handleImgRemove,isView:"view"!==e.method,imgEditEnable:!0,"file-list":e.imgFileListT,imgCutOption:e.imgCutOptionT,"before-upload":e.beforeuploadT}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{directives:[{name:"noMoreClick",rawName:"v-noMoreClick"}],attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},n=[],r=a("1da1"),o=(a("c740"),a("a434"),a("159b"),a("96cf"),a("038f")),s=a("85b6"),u=a("d4ec"),l=a("ade3"),c=function e(){Object(u["a"])(this,e),Object(l["a"])(this,"nodeIds",""),Object(l["a"])(this,"parentNodeIds","000/015"),Object(l["a"])(this,"sort",100),Object(l["a"])(this,"name",""),Object(l["a"])(this,"id",null),Object(l["a"])(this,"nodeId",""),Object(l["a"])(this,"aliasName",null),Object(l["a"])(this,"href",null),Object(l["a"])(this,"target",null),Object(l["a"])(this,"menuType",null),Object(l["a"])(this,"contentType",null),Object(l["a"])(this,"remarks",""),Object(l["a"])(this,"usable",1),Object(l["a"])(this,"allowComment",1),Object(l["a"])(this,"navigation",0),Object(l["a"])(this,"allowSearch",0),Object(l["a"])(this,"allowScore",0),Object(l["a"])(this,"popUp","0"),Object(l["a"])(this,"popUpImg","")},d=a("5444"),p={components:{krUpload:s["a"]},props:{imgCutOption:{type:Object,default:function(){return{boxWidth:920,boxHeight:520,originalGraph:!1,cutWidth:619.5,cutHeight:129}}},imgCutOptionT:{type:Object,default:function(){return{boxWidth:920,boxHeight:520,cutWidth:240,cutHeight:420,originalGraph:!1}}},width:{type:String,default:"60%"},treeProps:{type:Object,default:function(){return{children:"children",label:"name",disabled:"disabled"}}}},watch:{},data:function(){return{theoryEducationMenuOptions:[],imgFileList:[],imgFileListT:[],visible:!1,nodeIds:"",parentId:"",pid:0,source:"file",method:"",form:new c,typeList:[],rules:{menuType:[{required:!0,message:"专题分类类型不能为空",trigger:"blur"}],name:[{required:!0,message:"名称不能为空",trigger:"blur"}]},id:"",title:"",defaultProps:{children:"children",label:"name"}}},methods:{init:function(e,t,a){var i=this;this.imgFileList=[],this.method=e,"add"===e?(this.nodeIds="",this.form=new c,this.title="新建专题分类"):this.title="view"===e?"查看专题分类":"编辑专题分类",this.getUsableTheoryEducationMenuTree(),this.id=t,this.$nextTick(Object(r["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.visible=!0,"edit"!==e&&"view"!==e){a.next=12;break}return a.next=4,o["a"].queryMenuById({menuId:t});case 4:if(n=a.sent,r=n.data,"add"!==e&&(i.imgFileList=null!==r&&void 0!==r&&r.data.href?[{url:null===r||void 0===r?void 0:r.data.href}]:[],i.imgFileListT=null!==r&&void 0!==r&&r.data.popUpImg?[{url:null===r||void 0===r?void 0:r.data.popUpImg}]:[]),0==r.code){a.next=10;break}return i.$message.error("获取数据失败"),a.abrupt("return");case 10:i.form=r.data,i.nodeIds=r.data.parentNodeIds;case 12:case"end":return a.stop()}}),a)}))))},choseIcon:function(e){this.form.icon=e},getTheoryEducationMenuValue:function(e){this.form.boundNodeIds=e?e.nodeIds:""},httpRequest:function(e){setTimeout((function(){e.onProgress({percent:25})}),1e3),setTimeout((function(){e.onProgress({percent:65})}),2e3),setTimeout((function(){e.onProgress({percent:100})}),3e3),setTimeout((function(){e.onSuccess()}),4e3)},handleImgRemove:function(e,t){var a=t.findIndex((function(t){return t.uid===e.uid}));a>=0&&t.splice(a,1)},getValue:function(e){this.form.parentNodeIds=e.nodeIds},getUsableTheoryEducationMenuTree:function(){var e=this;o["a"].getUsableTheoryEducationMenuTree().then((function(t){e.theoryEducationMenuOptions=t.data.data,e.theoryEducationMenuOptions.forEach((function(e){e.disabled=!0}))}))},beforeupload:function(e){var t=this;console.log(e.type);"image/jpeg"===e.type||e.type;var a=e.size/1024/1024<20;if(a)return d["d"].uploadFile({file:e,pid:this.pid,source:this.source}).then((function(e){t.form.href="/file/"+e.data.data.path,t.form.target="专题图"}));this.$message.error("上传图片大小不能超过 20MB")},beforeuploadT:function(e){var t=this;console.log(e);var a="image/jpeg"===e.type||"image/png"==e.type||"image/gif"==e.type,i=e.size/1024/1024<20;if(a){if(i)return d["d"].uploadFile({file:e,pid:this.pid,source:this.source}).then((function(e){t.form.popUpImg="/file/"+e.data.data.path}));this.$message.error("上传图片大小不能超过 20MB")}else this.$message.error("上传图片只能是JPG/PNG/GIF格式")},close:function(){this.visible=!1,this.$refs.isAlreadyCut.isAlreadyCut=!1},submit:function(){var e=this;try{if("1"===this.form.popUp&&!this.form.popUpImg)return this.$message.error("设置为弹窗时，弹窗图不能为空"),!1;this.$refs.form.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return i=e.form,t.next=4,o["a"].saveMenu(i);case 4:if(n=t.sent,r=n.data,0==r.code){t.next=8;break}return t.abrupt("return",e.$message.error(r.msg));case 8:e.$message.success(r.msg),e.$emit("update"),e.close(),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){this.$message.error(t)}}}},m=p,f=a("2877"),g=Object(f["a"])(m,i,n,!1,null,null,null);t["default"]=g.exports},6395:function(e,t,a){"use strict";a("c502")},"85b6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload",style:{"--drag-width":e.dragOption.width||"360px","--drag-height":e.dragOption.height||"220px"}},["picture-card"===e.$attrs["list-type"]?a("el-upload",e._b({ref:"upload",attrs:{"on-change":e.uploadImgsChange,"on-success":e.uploadSuccess,headers:{token:e.$store.state.user.user.token}},scopedSlots:e._u([{key:"file",fn:function(t){var i=t.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:i.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(i)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e.imgEditEnable&&e.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleEditImg(i)}}},[a("i",{staticClass:"el-icon-edit-outline"})]):e._e(),e.isView?a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(i)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])])}}],null,!1,863019275)},"el-upload",e.$attrs,!1),[a("i",{staticClass:"el-icon-plus"})]):a("el-upload",e._b({ref:"upload",attrs:{headers:{token:e.$store.state.user.user.token}},on:{"on-success":e.uploadImgsSuccess}},"el-upload",e.$attrs,!1),[e.$attrs.drag?a("div",{staticClass:"drag-tooltip"},[a("i",{staticClass:"el-icon-upload drag-tooltip-icon"}),a("div",{staticClass:"drag-tooltip-text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),e.tooltip?a("div",{staticClass:"tooltip-text"},[e._v("支持扩展名："+e._s(e.tooltip))]):e._e()]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),!e.$attrs.drag&&e.tooltip?a("div",{staticClass:"tooltip-text",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tooltip))]):e._e()],1),a("el-dialog",{attrs:{title:"图片预览",visible:e.dialogVisible,top:"3vh","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("el-dialog",{attrs:{title:"图片剪裁",visible:e.ImgCutterData.visible,"append-to-body":!0},on:{"update:visible":function(t){return e.$set(e.ImgCutterData,"visible",t)}}},[e.ImgCutterData.visible?a("img-cutter",e._b({ref:"ImgCutter",attrs:{showChooseBtn:!1,isModal:!1},on:{loaded:e.imgCutterLoaded,cutDown:e.imgCutDown,onClearAll:function(t){e.ImgCutterData.visible=!1},changeAllreadyCut:e.changeAllreadyCut}},"img-cutter",e.imgCutOption,!1)):e._e()],1)],1)},n=[],r=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),function(){return a.e("ImgCutter").then(a.bind(null,"447d"))}),o={name:"kr-upload",components:{ImgCutter:r},props:{tooltip:String,isView:{type:Boolean,default:!0},uploadType:{type:String,default:"file"},dragOption:{type:Object,default:function(){return{width:"360px",height:"220px"}}},imgCutOption:{type:Object,default:function(){return{boxHeight:400,boxWidth:800,originalGraph:!1,rate:null}}},imgEditEnable:{type:Boolean,default:!1}},data:function(){return{isAlreadyCut:!1,dialogImageUrl:"",dialogVisible:!1,ImgCutterData:{loadImgCutter:!1,visible:!1,file:null},uid:""}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeAllreadyCut:function(e){this.isAlreadyCut=e},uploadSuccess:function(e,t,a){this.loading=!1},uploadImgsChange:function(e,t){!0!==this.$attrs.multiple&&(this.$refs.upload._data.uploadFiles=[e]),this.isAlreadyCut||this.uid===e.uid||(this.ImgCutterData.visible=!0,this.ImgCutterData.file=e),this.uid=e.uid},handleRemove:function(e){this.$attrs["on-remove"](e,this.$refs.upload._data.uploadFiles),this.$emit("remove")},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleEditImg:function(e){e.name||(e.name="无名称.png"),this.ImgCutterData.file=e,this.ImgCutterData.visible=!0},imgCutterLoaded:function(){console.log(),this.$refs.ImgCutter.handleOpen(this.ImgCutterData.file)},imgCutDown:function(e){this.ImgCutterData.file.raw=e.file,this.ImgCutterData.file.raw.uid=this.ImgCutterData.file.uid,this.ImgCutterData.file.url=e.dataURL,this.ImgCutterData.file.size=e.file.size,this.ImgCutterData.file.status="ready",this.ImgCutterData.visible=!1,!1!==this.$attrs["auto-upload"]&&this.$refs.upload.submit(),this.$emit("cutDown",this.ImgCutterData.file)}}},s=o,u=(a("6395"),a("2877")),l=Object(u["a"])(s,i,n,!1,null,"b560955c",null);t["a"]=l.exports},c502:function(e,t,a){},d4ec:function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",(function(){return i}))}}]);