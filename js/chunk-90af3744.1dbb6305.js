(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90af3744"],{"0c3f":function(e,t,r){"use strict";var s=r("7bc1");t["a"]={list:function(e){return s["a"].post("/exam/backend/question-classify/page",e)},save:function(e){return s["a"].post("/exam/backend/question-classify/save",e)},del:function(e){return s["a"].get("/exam/backend/question-classify/delete",e)},detail:function(e){return s["a"].get("/exam/backend/question-classify/getById",e)},getQuestionlist:function(e){return s["a"].post("/exam/backend/question/page",e)},getQuestionByIdList:function(e){return s["a"].post("/exam/backend/question/getByIdList",e)},saveQuestion:function(e){return s["a"].post("/exam/backend/question/save",e)},getQuestionDetailById:function(e){return s["a"].get("/exam/backend/question/getById",e)},deleteQuestionById:function(e){return s["a"].get("/exam/backend/question/delete",e)},downloadTemplate:function(e){return s["a"].getBlob("/exam/backend/question/downloadTemplate",e,!0)},getPaperlist:function(e){return s["a"].post("/exam/backend/paper/page",e)},savePaper:function(e){return s["a"].post("/exam/backend/paper/save",e)},getPaperDetailById:function(e){return s["a"].get("/exam/backend/paper/getById",e)},deletePaperById:function(e){return s["a"].get("/exam/backend/paper/delete",e)},openPaperById:function(e){return s["a"].get("/exam/backend/paper/open",e)},closePaperById:function(e){return s["a"].get("/exam/backend/paper/close",e)},getPaperListByNameKeyword:function(e){return s["a"].get("/exam/backend/paper/getPaperListByNameKeyword",e)},paperInspectionPage:function(e){return s["a"].post("/exam/backend/paper/paperInspectionPage",e)},getPaperedList:function(e){return s["a"].post("/exam/backend/user-paper-record/testPaperPage",e)},getUserPaperRecordById:function(e){return s["a"].get("/exam/backend/user-paper-record/getById",e)},marking:function(e){return s["a"].post("/exam/backend/user-paper-record/update",e)},getTestPaperStatistics:function(e){return s["a"].get("/exam/backend/paper/getTestPaperStatistics",e)},getTestPaperStatisticsUserPage:function(e){return s["a"].post("/exam/backend/paper/getTestPaperStatisticsUserPage",e)},getTestPaperStatisticsDeptPage:function(e){return s["a"].get("/exam/backend/paper/getTestPaperStatisticsDeptPage",e)},questionnaireStatistics:function(e){return s["a"].get("/exam/backend/paper/questionnaireStatistics",e)},questionnaireStatisticsForShortAnswerAndFillInTheBlanks:function(e){return s["a"].post("/exam/backend/paper/questionnaireStatisticsForShortAnswerAndFillInTheBlanks",e)},getPaperStatistics:function(e){return s["a"].get("/exam/backend/paper/getById",e)}}},"611f":function(e,t,r){"use strict";r("9cde")},"6e48":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.visible,title:"试卷详情",width:"90%"},on:{"update:visible":function(t){e.visible=t},close:e.close}},[r("div",{staticClass:"all-box"},[r("div",{staticClass:"all-box-left"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"card-box"},e._l(e.form.questions,(function(t,s){return r("div",{key:s,staticClass:"item",on:{click:function(t){return e.fastLocation(s)}}},[r("div",{staticClass:"num",class:{right:1===e.form.userAnswers[s].correct,error:0===e.form.userAnswers[s].correct,noView:-1===e.form.userAnswers[s].correct}},[e._v(e._s(s+1))])])})),0)])],1),r("div",{staticClass:"all-box-center"},[r("el-card",{staticClass:"box-card"},e._l(e.form.questions,(function(t,s){return r("div",{key:t.id,staticClass:"clearfix"},[e.lookMasterQuestion&&3!==e.form.questions[s].type||e.lookOnlyError&&0!==e.form.userAnswers[s].correct?e._e():r("el-row",{attrs:{gutter:20,id:"qustion"+s}},[r("el-col",{attrs:{span:18}},[r("div",{staticClass:"question-top"},[r("div",{staticClass:"question-index"},[e._v(e._s(s+1))]),0===t.type?r("el-tag",{attrs:{effect:"dark"}},[e._v("单选题")]):e._e(),1===t.type?r("el-tag",{attrs:{effect:"dark",type:"success"}},[e._v("多选题")]):e._e(),2===t.type?r("el-tag",{attrs:{effect:"dark",color:"rgb(128,7,183)",type:"info"}},[e._v("判断题")]):e._e(),3===t.type?r("el-tag",{attrs:{effect:"dark",type:"warning"}},[e._v("简答题")]):e._e(),4===t.type?r("el-tag",{attrs:{effect:"dark",type:"danger"}},[e._v("填空题")]):e._e(),r("div",{staticClass:"question-title"},[e._v(" "+e._s(t.content)+" ")])],1),r("ul",{staticClass:"question-bottom"},e._l(t.answers,(function(t,s){return r("li",{key:t.id,staticClass:"question-answer"},[r("span",{staticClass:"tag"},[e._v(e._s(e.getFromCharCode(s)))]),r("p",{staticClass:"content"},[e._v(e._s(t.content))]),t.correct?r("span",{staticClass:"right"},[r("i",{staticClass:"el-icon-success",staticStyle:{color:"rgb(26, 172, 26)"}}),e._v(" 答案 ")]):e._e()])})),0),r("div",{staticClass:"as-box"},[r("div",[3!==t.type?r("div",{staticClass:"isCorrect"},[e.form.userAnswers[s].correct?r("div",[r("i",{staticClass:"el-icon-circle-check correct"}),r("span",[e._v("答对了")])]):r("div",[r("i",{staticClass:"el-icon-circle-check error"}),r("span",[e._v("答错了")])])]):e._e(),r("div",[e._v(" 学员得分："),r("span",[e._v(e._s(3===t.type&&0===e.form.status?"待阅卷后显示得分":e.form.userAnswers[s].userScore)+" ")])]),r("div",[e._v(" 学员答案： "),r("span",[e._v(" "+e._s(3===t.type?e.form.userAnswers[s].answer:e.form.userAnswers[s].answer.toUpperCase())+" ")])])]),r("div",{staticClass:"question-analysis"},[t.analysis?r("div",[e._v("大题解析：")]):e._e(),r("p",[e._v(" "+e._s(t.analysis)+" ")])])])]),r("el-col",{attrs:{span:6}},[r("div",{staticClass:"listopt clearfix"},[r("div",{staticClass:"opt-box"},[r("div",{staticClass:"item"},[e._v(" 判断： "),r("i",{staticClass:"el-icon-success check-icon",class:{"check-icon-right":1===e.form.userAnswers[s].correct},on:{click:function(t){return e.changeCorrect(s,1)}}}),r("i",{staticClass:"el-icon-error check-icon",class:{"check-icon-error":0===e.form.userAnswers[s].correct},on:{click:function(t){return e.changeCorrect(s,0)}}})]),r("div",{staticClass:"item"},[e._v(" 得分： "),r("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"mini",min:0,max:t.score},model:{value:e.form.userAnswers[s].userScore,callback:function(t){e.$set(e.form.userAnswers[s],"userScore",t)},expression:"form.userAnswers[index].userScore"}})],1),r("div",{staticClass:"item"},[e._v("总分："+e._s(t.score))])])])])],1)],1)})),0)],1),r("div",{staticClass:"all-box-right"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"card-box"},[r("div",{staticClass:"el-card__body"},[r("div",[e._v("及格分/总分")]),r("div",{staticStyle:{color:"rgb(158,9,226)"}},[e._v(" "+e._s(e.form.qualifyScore+"/"+e.form.totalScore)+" ")]),r("el-divider"),r("div",[e._v("人员姓名")]),r("div",{staticStyle:{color:"rgb(10, 132, 255)"}},[e._v(" "+e._s(e.getName)+" ")]),r("el-divider"),r("div",[e._v("考试成绩")]),r("div",{staticStyle:{color:"rgb(255, 75, 80)"}},[e._v(e._s(e.getTotalScore))]),r("el-divider"),r("div",[e._v("仅看错题")]),r("div",[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.lookOnlyError,callback:function(t){e.lookOnlyError=t},expression:"lookOnlyError"}})],1),r("el-divider"),r("div",[e._v("仅看主观题")]),r("div",[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.lookMasterQuestion,callback:function(t){e.lookMasterQuestion=t},expression:"lookMasterQuestion"}})],1),r("el-divider"),r("div",[e._v("考试状态")]),r("div",[e.isQualify?r("span",{staticStyle:{color:"green"}},[e._v("通过")]):r("span",{staticStyle:{color:"red"}},[e._v("未通过")])]),r("el-divider"),r("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:e.submit}},[e._v(" 提交阅卷 ")])],1)])])],1)])])},a=[],n=r("1da1"),i=r("5530"),o=(r("96cf"),r("b0c0"),r("159b"),r("4de4"),r("f477")),c=r("0c3f"),u=r("2f62"),l={props:{allClassifyTypeList:{type:Array,default:function(){return[]}}},data:function(){return{dictUtils:o["a"],visible:!1,loading:null,form:{userAnswers:[]},paperForm:{questions:[{content:""}]},selectedQuestionList:[],lookOnlyError:!1,lookMasterQuestion:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])({user:function(e){return e.user.user}})),{},{getTotalScore:function(){return this.form.userAnswers.reduce((function(e,t){return e+t.userScore}),0)},isQualify:function(){return this.form.userAnswers.reduce((function(e,t){return e+t.userScore}),0)>=this.form.qualifyScore},getName:function(){var e;return null===(e=JSON.parse(localStorage.getItem("allUser"))[this.form["userId"]])||void 0===e?void 0:e.name}}),watch:{},created:function(){},mounted:function(){},methods:{init:function(e){var t=this;this.visible=!0,this.lookOnlyError=!1,this.lookMasterQuestion=!1,this.$nextTick(Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a,n,i,o,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:".el-dialog__body"}),r.next=3,c["a"].getUserPaperRecordById({id:e.id});case 3:return i=r.sent,o=i.data,t.form=o.data,r.next=8,c["a"].getPaperDetailById({id:t.form.paperId});case 8:u=r.sent,t.$set(t.form,"questions",null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.data.questions),t.$set(t.form,"qualifyScore",null===u||void 0===u||null===(a=u.data)||void 0===a?void 0:a.data.qualifyScore),t.$set(t.form,"totalScore",null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.data.totalScore),0===t.form.status&&(null===(l=t.form.userAnswers)||void 0===l||l.forEach((function(e,r){var s;3===(null===(s=t.form.questions[r])||void 0===s?void 0:s.type)&&(e.correct=-1)}))),t.loading.close();case 14:case"end":return r.stop()}}),r)}))))},submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<(null===(s=e.form.userAnswers)||void 0===s?void 0:s.length))){t.next=9;break}if(a=e.form.userAnswers[r],-1!==a.correct){t.next=6;break}return e.$message.error("第 "+(r+1)+" 题暂未批阅，无法保存"),t.abrupt("return");case 6:r++,t.next=1;break;case 9:return e.form.examiner=e.user.id,e.form.qualify=e.isQualify?1:0,e.form.reviewTime=e.getTime(),e.form.score=e.getTotalScore,e.form.objectiveScore=e.form.userAnswers.filter((function(e){if(3!==e.type)return!0})).reduce((function(e,t){return e+t.userScore}),0),e.form.subjectiveScore=e.form.userAnswers.filter((function(e){if(3===e.type)return!0})).reduce((function(e,t){return e+t.userScore}),0),e.form.status=2,console.log(e.form),t.next=19,c["a"].marking(e.form);case 19:if(n=t.sent,i=n.data,0==i.code){t.next=23;break}return t.abrupt("return",e.$message.error(i.msg));case 23:e.$message.success(i.msg),e.$parent.$refs.table.init(),e.close();case 26:case"end":return t.stop()}}),t)})))()},getTime:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1,s=e.getDate(),a=e.getHours(),n=e.getMinutes(),i=e.getSeconds(),o=t+"-"+this.addZero(r)+"-"+this.addZero(s)+" "+this.addZero(a)+":"+this.addZero(n)+":"+this.addZero(i);return o},addZero:function(e){return e<10?"0"+e:e},fastLocation:function(e){var t=document.querySelector("#qustion"+e);t.scrollIntoView({block:"center",behavior:"smooth"})},close:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.visible=!1;case 1:case"end":return t.stop()}}),t)})))()},changeCorrect:function(e,t){var r=JSON.parse(JSON.stringify(this.form.userAnswers[e]));r.correct=t,r.userScore=t?this.form.questions[e].score:0,this.$set(this.form.userAnswers,e,r),console.log(this.form.userAnswers[e].correct)},getFromCharCode:function(e){return String.fromCharCode(64+parseInt(1+e))}}},d=l,f=(r("611f"),r("2877")),p=Object(f["a"])(d,s,a,!1,null,"7f1f21c0",null);t["default"]=p.exports},"9cde":function(e,t,r){}}]);